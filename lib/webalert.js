/*! webalert.js 1.0.0

Copyright (c) 2022 Ruochen Jia

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
"use strict";(()=>{function t(t,e){return null==t?e:t}function e(t){return Object.keys(t)}function n(t,e){delete t[e]}function i(t,i,o,l){Object.defineProperty(t,i,function(t){for(let i of e(t))void 0===Object.getOwnPropertyDescriptor(t,i).value&&n(t,i);return t}(Object.assign(Object.assign({},l),{value:o})))}function o(n,o,l){const r=t(l,{});for(let t of e(o)){const e=Object.getOwnPropertyDescriptor(o,t);i(n,t,e.value,Object.assign(Object.assign({},r),{get:null==e.get?r.get:e.get,set:null==e.set?r.set:e.set}))}}class l{constructor(){this.__defineGetter__=void 0,this.__defineSetter__=void 0,this.__lookupGetter__=void 0,this.__lookupSetter__=void 0,this.__proto__=void 0,this.isPrototypeOf=void 0,this.propertyIsEnumerable=void 0,this.toLocaleString=void 0,this.toString=void 0,this.valueOf=void 0,o(this,this,{writable:!1,configurable:!1,enumerable:!1}),i(this,"constructor",void 0,{writable:!1,configurable:!1,enumerable:!1})}}l.instance=new l;class r extends l{constructor(t){super(),null!=t&&(o(this,t,{}),o(this,l.instance,{writable:!1,configurable:!1,enumerable:!1}))}}var s=function(t,e,n,i){return new(n||(n=Promise))((function(o,l){function r(t){try{c(i.next(t))}catch(t){l(t)}}function s(t){try{c(i.throw(t))}catch(t){l(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((i=i.apply(t,e||[])).next())}))};class c extends r{constructor(t){super(t),this.canceled=!1}loadDocument(){return s(this,void 0,void 0,(function*(){const t=function(){const t=document.createElement("iframe");return t.setAttribute("type","text/plain"),t.setAttribute("width","1024"),t.setAttribute("height","768"),t.setAttribute("style","position:absolute;display:block;width:100%;height:100%;top:0px;left:0px;right:0px;bottom:0px;border:none;z-index:9999;"),t.setAttribute("scrolling","no"),t.setAttribute("loading","eager"),t.setAttribute("allowfullscreen","true"),t.setAttribute("allowtransparency","true"),t.setAttribute("fetchpriority","high"),t}(),e=yield new Promise((t=>{const e=document.body;null==e?document.addEventListener("DOMContentLoaded",(()=>{t(document.body)}),{once:!0,passive:!0}):t(e)}));var n;e.scrollTo(0,0),e.style.overflow="hidden",e.appendChild(t),yield(n=t,new Promise((t=>{n.addEventListener("load",(()=>{t()}),{once:!0,passive:!0})})));const i=t.contentWindow,o=i.document;o.open(),o.write('<?xml version="1.0" encoding="utf-8" ?>\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n\t<head>\n\t\t<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />\n\t\t<meta http-equiv="Referrer-Policy" content="no-referrer" />\n\t\t<meta name="referrer" content="no-referrer" />\n\t\t<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1" />\n\t\t<meta name="robots" content="noindex,nofollow" />\n\t\t<base href="undefined://undefined/" />\n\t\t<title>Dialog0</title>\n\t\t<style type="text/css">\n* {\n\tmargin: 0px;\n\tpadding: 0px;\n}\n\n*:hover, *:active {\n\t-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\ninput, select, textarea {\n\tfont-size: inherit;\n\tfont-family: inherit;\n\tfont-weight: inherit;\n\tfont-style: inherit;\n\tcolor: inherit;\n}\n\nbody {\n\tposition: absolute;\n\tdisplay: block;\n\twidth: 100%;\n\theight: 100%;\n\tfont-size: 14px;\n\tfont-weight: 500;\n\tfont-family: "Ubuntu";\n\tfont-style: normal;\n\tcolor: #000000;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\toverflow: hidden;\n}\n\n#dialog {\n\tposition: absolute;\n\tdisplay: block;\n\twidth: 250px;\n\theight: fit-content;\n\tpadding: 20px;\n\tcolor: #000000;\n\tbackground-color: #ffffff;\n\tborder-style: solid;\n\tborder-width: 1px;\n\tborder-color: #000000;\n\tborder-radius: 10px;\n\tvisibility: hidden;\n}\n\n#titlebar {\n\tposition: relative;\n\tdisplay: block;\n\twidth: 100%;\n\theight: 30px;\n\tcolor: #303030;\n\tbackground-color: rgba(0, 0, 0, 0.1);\n}\n\n#titlebar-icon {\n\tposition: absolute;\n\tdisplay: block;\n\twidth: 20px;\n\theight: 20px;\n\tleft: 5px;\n\ttop: 5px;\n}\n\n#titlebar-title {\n\tposition: absolute;\n\tdisplay: block;\n\twidth: calc(100% - 90px);\n\theight: 20px;\n\tleft: 10px;\n\ttop: 5px;\n\tcursor: default;\n\tline-height: 20px;\n\ttext-align: start;\n\tfont-size: 16px;\n\tfont-weight: 600;\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n\toverflow-wrap: break-word;\n}\n\n.titlebar-button {\n\tposition: absolute;\n\tdisplay: block;\n\twidth: 20px;\n\theight: 20px;\n\ttop: 5px;\n\tcursor: pointer;\n\tfont-size: 16px;\n\tfont-weight: 600;\n\tline-height: 20px;\n\ttext-align: center;\n\tuser-select: none;\n\tcolor: #000000;\n\tbackground-color: #a0a0a0;\n\tborder-width: 1px;\n\tborder-style: solid;\n\tborder-top-color: #ffffff;\n\tborder-left-color: #ffffff;\n\tborder-right-color: #000000;\n\tborder-bottom-color: #000000;\n}\n\n.titlebar-button[disabled="true"] {\n\tcolor: #808080;\t\n}\n\n.titlebar-button:active {\n\tborder-top-color: #000000;\n\tborder-left-color: #000000;\n\tborder-right-color: #ffffff;\n\tborder-bottom-color: #ffffff;\n}\n\n.titlebar-button[disabled="true"]:active {\n\tborder-top-color: #ffffff;\n\tborder-left-color: #ffffff;\n\tborder-right-color: #000000;\n\tborder-bottom-color: #000000;\n}\n\n#titlebar-close-button {\n\tright: 5px;\n}\n\n#titlebar-maximize-button {\n\tright: 30px;\n}\n\n#titlebar-minimize-button {\n\tright: 55px;\n}\n\n.frame {\n\tposition: relative;\n\tdisplay: block;\n\twidth: 100%;\n\theight: calc(100% - 30px);\n\tborder: none;\n\toverflow: hidden;\n}\n\n#element-container {\n\tposition: relative;\n\tdisplay: block;\n\twidth: 100%;\n\theight: fit-content;\n\tmargin-bottom: 10px;\n}\n\n.title {\n\tposition: relative;\n\tdisplay: block;\n\twidth: 100%;\n\theight: fit-content;\n\tmargin-top: 5px;\n\tmargin-bottom: 5px;\n\tline-height: 24px;\n\tfont-size: 18px;\n\tfont-weight: 600;\n\ttext-align: center;\n}\n\n.message {\n\tposition: relative;\n\tdisplay: block;\n\twidth: 100%;\n\theight: fit-content;\n\tline-height: 20px;\n\ttext-align: start;\n\toverflow-x: hidden;\n\toverflow-wrap: break-word;\n}\n\n.input {\n\tposition: relative;\n\tdisplay: block;\n\twidth: calc(100% - 10px);\n\theight: 16px;\n\tline-height: 16px;\n\tmargin-top: 10px;\n\tmargin-bottom: 10px;\n\tpadding: 5px;\n\toutline: none;\n\tborder-style: solid;\n\tborder-width: 1px;\n\tborder-color: #808080;\n\tborder-radius: 10px;\n}\n\n.input:focus {\n\tborder-color: #303030;\n}\n\n#button-bar {\n\tposition: relative;\n\tdisplay: flex;\n\twidth: fit-content;\n\theight: fit-content;\n\tmargin: auto;\n}\n\n.button {\n\tposition: relative;\n\tdisplay: block;\n\twidth: fit-content;\n\theight: fit-content;\n\tpadding: 10px;\n\tmargin-left: 5px;\n\tmargin-right: 5px;\n\tcolor: #ffffff;\n\tbackground-color: #6060ff;\n\tcursor: pointer;\n\tuser-select: none;\n\tborder-width: 1px;\n\tborder-style: solid;\n\tborder-radius: 10px;\n\tborder-top-color: #ffffff;\n\tborder-left-color: #ffffff;\n\tborder-right-color: #000000;\n\tborder-bottom-color: #000000;\n}\n\n.button:active {\n\tborder-top-color: #000000;\n\tborder-left-color: #000000;\n\tborder-right-color: #ffffff;\n\tborder-bottom-color: #ffffff;\n}\n\n.button[disabled=true] {\n\tbackground-color: #808080;\n}\n\n.button[disabled=true]:active {\n\tborder-top-color: #ffffff;\n\tborder-left-color: #ffffff;\n\tborder-right-color: #000000;\n\tborder-bottom-color: #000000;\n}\n\t\t</style>\n\t</head>\n\t<body>\n\t\t<div id="dialog"></div>\n\t\t<script type="text/javascript">\n"use strict";\n\n(() => {\n\ndocument.oncontextmenu = (e) => {\n\te.preventDefault();\n\te.stopPropagation();\n};\n\ndocument.onkeydown = (e) => {\n\tfunction checkKey() {\n\t\tconst ctrl = e.ctrlKey || e.metaKey;\n\t\tconst shift = e.shiftKey;\n\t\tconst code = e.keyCode;\n\n\t\tif (ctrl) {\n\t\t\tif (shift) {\n\t\t\t\tswitch (code) {\n\t\t\t\t\tcase 73: // ctrl+shift+i\n\t\t\t\t\tcase 74: // ctrl+shift+j\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tswitch (code) {\n\t\t\t\tcase 83: // ctrl+s\n\t\t\t\tcase 85: // ctrl+u\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tswitch (code) {\n\t\t\tcase 123: // f12\n\t\t\t\treturn true;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\tif (checkKey()) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\treturn false;\n\t}\n\n\treturn true;\n};\n\n})();\n\t\t<\/script>\n\t</body>\n</html>'),o.close(),this.frameWindow=i,this.frameDocument=o,this.currentFrame=t,this.dialogElement=o.getElementById("dialog")}))}initializeDocument(){return s(this,void 0,void 0,(function*(){}))}draggableElement(t,e=t){e.onmousedown=e=>{e.preventDefault();let n=e.clientX,i=e.clientY;t.onmouseout=t.onmouseup=e=>{e.preventDefault(),t.onmouseup=null,t.onmousemove=null},t.onmousemove=e=>{e.preventDefault();const o=e.clientX,l=e.clientY;let r=n-o,s=i-l;n=o,i=l,t.style.top=Math.round(t.offsetTop-s)+"px",t.style.left=Math.round(t.offsetLeft-r)+"px"}}}initializeDraggable(){}measureDocument(){return s(this,void 0,void 0,(function*(){const e=this.dialogElement,n=this.currentFrame,i=this.width;null!=i&&(e.style.width=i+"px");const o=this.height;null!=o&&(e.style.height=o+"px");const l=this.paddingX;null!=l&&(e.style.paddingLeft=l+"px",e.style.paddingRight=l+"px");const r=this.paddingY;if(null!=r&&(e.style.paddingTop=r+"px",e.style.paddingBottom=r+"px"),t(this.centered,!0)){const t=()=>s(this,void 0,void 0,(function*(){const t=e.clientWidth+2,i=e.clientHeight+2;e.style.left=Math.floor((n.clientWidth-t)/2)+"px",e.style.top=Math.floor((n.clientHeight-i)/2)+"px"}));yield t(),e.addEventListener("resize",t,!0),window.addEventListener("resize",t,!0)}else{const n=this.x;null!=n&&(e.style.left=n+"px");const i=this.y;null!=i&&(e.style.top=i+"px"),t(this.draggable,!1)&&this.initializeDraggable()}t(this.resizable,!1)&&(e.style.resize="both",e.style.overflow="auto"),e.style.visibility="visible"}))}show(){return s(this,void 0,void 0,(function*(){yield this.loadDocument(),yield this.initializeDocument(),yield this.measureDocument()}))}dismiss(){null!=this.currentFrame&&(document.body.style.overflow="",this.currentFrame.remove(),this.currentFrame=null)}cancel(){this.dismiss(),i(this,"canceled",!0)}close(){this.dismiss()}}var a=function(t,e,n,i){return new(n||(n=Promise))((function(o,l){function r(t){try{c(i.next(t))}catch(t){l(t)}}function s(t){try{c(i.throw(t))}catch(t){l(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((i=i.apply(t,e||[])).next())}))};function d(e,n){null!=e?(n.innerHTML=t(e.text,""),t(e.disabled,!1)?n.setAttribute("disabled","true"):n.onclick=e.onclick):n.remove()}class u extends c{constructor(t){super(t)}initializeDocument(){return a(this,void 0,void 0,(function*(){this.dialogElement.innerHTML='<div id="element-container"></div><div id="button-bar"><div id="negative-button" class="button"></div><div id="neutral-button" class="button"></div><div id="positive-button" class="button"></div></div>';const e=this.frameDocument,n=e.getElementById("element-container"),i=this.title;if(null!=i){const t=e.createElement("div");t.className="title",t.innerHTML=i,n.appendChild(t)}const o=this.message;if(null!=o){const t=e.createElement("div");t.className="message",t.innerHTML=o,n.appendChild(t)}const l=this.elements;if(null!=l)for(let i of l)if(i instanceof HTMLElement)n.appendChild(i);else{const o=e.createElement(i.type);o.className=t(i.className,""),o.innerHTML=t(i.innerHTML,"");const l=i.style;null!=l&&o.setAttribute("style",l);for(let e of t(i.attributes,[]))o.setAttribute(e.name,e.value);n.appendChild(o)}d(this.positiveButton,e.getElementById("positive-button")),d(this.negativeButton,e.getElementById("negative-button")),d(this.neutralButton,e.getElementById("neutral-button"))}))}}var f=function(t,e,n,i){return new(n||(n=Promise))((function(o,l){function r(t){try{c(i.next(t))}catch(t){l(t)}}function s(t){try{c(i.throw(t))}catch(t){l(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((i=i.apply(t,e||[])).next())}))};class h extends c{constructor(e){const n=t(e,{});super(Object.assign(Object.assign({},n),{centered:t(n.centered,!1),draggable:t(n.draggable,!0),width:t(n.width,1024),height:t(n.height,768),paddingX:void 0,paddingY:void 0})),this.maximized=!1,this.minimized=!1}minimize(){this.dismiss(),i(this,"minimized",!0)}maximize(){const t=this.dialogElement;if(this.maximized){const e=this.width,n=this.height;t.style.width=null!=e?e+"px":"",t.style.height=null!=n?n+"px":"",t.style.left="",t.style.top="",i(this,"maximized",!1)}else t.style.width="100%",t.style.height="100%",t.style.left="0px",t.style.top="0px",i(this,"maximized",!0)}initializeDraggable(){this.draggableElement(this.dialogElement,this.frameDocument.getElementById("titlebar"))}initializeDocument(){return f(this,void 0,void 0,(function*(){const e=this.dialogElement;e.style.padding="0px";let n=t(this.title,"");"string"==typeof n&&(n={title:n});const i=document.createElement("div");i.id="titlebar",e.appendChild(i);const o=n.icon;if(null!=o){if(o instanceof HTMLImageElement)return o.id="titlebar-icon",o.width=20,o.height=20,void i.appendChild(o);const t=document.createElement("img");let e;if(t.id="titlebar-icon",t.width=20,t.height=20,"string"==typeof o)e=o;else if(o instanceof URL)e=o.href;else{const t=new Uint8Array(o);e=URL.createObjectURL(new Blob([t.buffer],{type:"image",endings:"native"}))}t.src=e,i.appendChild(t)}const l=n.title;if(null!=l){const t=document.createElement("div");t.id="titlebar-title",t.innerHTML=l,i.appendChild(t)}let r=t(n.closeButton,!0);if("boolean"==typeof r&&(r={visible:r}),t(r.visible,!0)){const e=document.createElement("div");e.id="titlebar-close-button",e.className="titlebar-button",e.innerHTML="×",t(r.disabled,!1)?e.setAttribute("disabled","true"):e.onclick=()=>this.close(),i.appendChild(e)}let s=t(n.maximizeButton,!0);if("boolean"==typeof s&&(s={visible:s}),t(s.visible,!0)){const e=document.createElement("div");e.id="titlebar-maximize-button",e.className="titlebar-button",e.innerHTML="□",t(s.disabled,!1)?e.setAttribute("disabled","true"):e.onclick=()=>this.maximize(),i.appendChild(e)}let c=t(n.minimizeButton,!0);if("boolean"==typeof c&&(c={visible:c}),t(c.visible,!0)){const e=document.createElement("div");e.id="titlebar-minimize-button",e.className="titlebar-button",e.innerHTML="–",t(c.disabled,!1)?e.setAttribute("disabled","true"):e.onclick=()=>this.minimize(),i.appendChild(e)}const a=t(this.frame,"");if(a instanceof HTMLElement)return a.className="frame",void e.appendChild(a);let d;if("string"==typeof a)d=a;else if(a instanceof URL)d=a.href;else{const t=new Uint8Array(a);d=URL.createObjectURL(new Blob([t.buffer],{type:"text/html",endings:"native"}))}const u=document.createElement("embed");u.type="text/plain",u.width="1024",u.height="768",u.src=d,u.className="frame",e.appendChild(u)}))}}var p=function(t,e,n,i){return new(n||(n=Promise))((function(o,l){function r(t){try{c(i.next(t))}catch(t){l(t)}}function s(t){try{c(i.throw(t))}catch(t){l(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((i=i.apply(t,e||[])).next())}))};const m=(t,e)=>p(void 0,void 0,void 0,(function*(){const n=new u({message:t,title:e,positiveButton:{text:"OK",onclick:()=>{n.dismiss()}}});yield n.show()})),b=(t,e)=>new Promise((n=>{const i=new u({message:t,title:e,positiveButton:{text:"OK",onclick:()=>{i.dismiss(),n(!0)}},negativeButton:{text:"Cancel",onclick:()=>{i.cancel(),n(!1)}}});i.show()})),g=(e,n,i,o)=>new Promise((l=>{const r=document.createElement("input");r.type="text",r.value=t(n,""),r.placeholder=t(o,""),r.className="input";const s=new u({message:e,title:i,positiveButton:{text:"OK",onclick:()=>{s.dismiss(),l(r.value)}},negativeButton:{text:"Cancel",onclick:()=>{s.cancel(),l(null)}},elements:[r]});r.onkeydown=t=>{13==t.keyCode&&(t.preventDefault(),s.positiveButton.onclick())},s.show()}));var v=function(t,e,n,i){return new(n||(n=Promise))((function(o,l){function r(t){try{c(i.next(t))}catch(t){l(t)}}function s(t){try{c(i.throw(t))}catch(t){l(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((i=i.apply(t,e||[])).next())}))};const y=(t,e)=>v(void 0,void 0,void 0,(function*(){yield new u({message:t,title:e}).show()})),w=(e,n,i)=>new Promise((o=>{const l=t(i,[]),r=[];for(let e of l){const n=t(e.inline,!1),i=e.label;if(null!=i){const t=document.createElement("div");t.className="message",t.innerHTML=i,n&&(t.style.display="inline-block",t.style.width="fit-content"),r.push(t)}let o=e.input;if(null!=o){"string"==typeof o&&(o={type:o});const i=document.createElement("input");i.className="input",i.type=t(o.type,"text"),i.value=t(o.value,""),i.placeholder=t(o.placeholder,""),i.checked=t(o.checked,!1),i.disabled=t(o.disabled,!1);for(let e of t(o.attributes,[]))i.setAttribute(e.name,e.value);n&&(i.style.display="inline-block",i.style.width="fit-content"),r.push(i),e["\ud801"]=i}}const s=new u({message:e,title:n,elements:r,positiveButton:{text:"OK",onclick:()=>{s.dismiss();const t=[];for(let e of l){const n=e["\ud801"],i={label:e.label};if(null!=n){const t=[];for(let e=0;e<n.attributes.length;e++){const i=n.attributes.item(e);t.push({name:i.name,value:i.value})}i.value=n.value,i.checked=n.checked,i.attributes=t}t.push(i)}o(t)}},negativeButton:{text:"Cancel",onclick:()=>{s.cancel(),o(null)}}});s.show()}));var x=function(t,e,n,i){return new(n||(n=Promise))((function(o,l){function r(t){try{c(i.next(t))}catch(t){l(t)}}function s(t){try{c(i.throw(t))}catch(t){l(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,s)}c((i=i.apply(t,e||[])).next())}))};const k=(t,e)=>x(void 0,void 0,void 0,(function*(){yield new h({title:e,frame:t}).show()})),E=new r({Dialog:c,AlertDialog:u,WindowDialog:h,alert:m,confirm:b,prompt:g,block:y,form:w,popup:k});const z=window;i(z,"webAlert",E,{writable:!1,configurable:!1,enumerable:!1}),z.nativeAlert=z.alert,z.nativeConfirm=z.confirm,z.nativePrompt=z.prompt,z.alert=E.alert,z.confirm=E.confirm,z.prompt=E.prompt,z.block=E.block,z.form=E.form,z.popup=E.popup})();