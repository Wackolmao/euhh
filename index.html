<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
		<meta name="referrer" content="no-referrer" />
		<base href="/" />
		<link rel="icon" type="image/x-icon" href="favicon.ico" />
		<title>WhiteSpider</title>
		<style type="text/css">
* {
	margin: 0px;
	padding: 0px;
}

@font-face {
	font-family: "Ubuntu";
	font-style: normal;
	src: url("res/ubuntu.ttf") format("truetype");
}

@font-face {
	font-family: "Ubuntu Mono";
	font-style: normal;
	src: url("res/ubuntu-mono.ttf") format("truetype");
}

::-webkit-scrollbar {
	width: 10px;
}

::-webkit-scrollbar-track {
	border-style: solid;
	border-width: 1px;
	border-color: rgba(255, 255, 255, 0.5);
	border-radius: 5px;
}

::-webkit-scrollbar-thumb {
	background-color: rgba(255, 255, 255, 0.5);
	border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
	background-color: rgba(255, 255, 255, 0.8);
}

body {
	position: absolute;
	display: block;
	width: 100%;
	height: 100%;
	font-size: 14px;
	font-family: "Ubuntu";
	font-weight: 500;
	font-style: normal;
	color: #ffffff;
	background-color: #001a1a;
	overflow: hidden;
}

#header {
	position: absolute;
	display: flex;
	width: calc(100% - 10px);
	height: 50px;
	padding: 5px;
}

#logo {
	position: absolute;
	display: block;
	width: 200px;
	height: 50px;
	background-image: url("res/logo-low.svg");
	background-size: contain;
	background-repeat: no-repeat;
}

.nav-button {
	position: absolute;
	display: block;
	width: 60px;
	height: 100%;
	line-height: 50px;
	font-weight: 600;
	text-align: center;
	cursor: pointer;
	box-sizing: border-box;
}

.nav-button:hover {
	border-bottom-style: solid;
	border-bottom-color: #ffffff;
	border-bottom-width: 3px;
}

#tools {
	right: 10px;
}

#games {
	right: 70px;
}

#home {
	right: 130px;
}

#content {
	position: absolute;
	display: block;
	width: 100%;
	height: calc(100% - 60px);
	top: 60px;
}

#home-screen, #games-screen, #tools-screen, #noscript-screen {
	position: absolute;
	display: block;
	width: calc(100% - 40px);
	height: 100%;
	padding-left: 20px;
	padding-right: 20px;
	overflow-y: auto;
}

#noscript-screen {
	/*set the background color to override default screen*/
	background-color: #001a1a;
}

#large-logo {
	position: relative;
	display: block;
	width: 512px;
	height: 128px;
	margin: auto;
}

#description {
	position: relative;
	display: block;
	width: fit-content;
	height: fit-content;
	margin-left: auto;
	margin-right: auto;
	margin-top: 10px;
	margin-bottom: 100px;
	text-align: center;
	font-style: italic;
	font-size: 16px;
	line-height: 25px;
}

.title {
	position: relative;
	display: block;
	width: fit-content;
	height: fit-content;
	margin: auto;
	font-size: 24px;
	font-weight: 600;
	line-height: 40px;
}

.subtitle {
	position: relative;
	display: block;
	width: fit-content;
	height: fit-content;
	margin: auto;
	font-size: 18px;
	font-weight: 600;
	line-height: 25px;
}

.text {
	position: relative;
	display: block;
	width: fit-content;
	height: fit-content;
	margin: auto;
	line-height: 18px;
}

#noscript-screen .text {
	font-size: 16px;
	font-weight: 600;
	color: #ff8080;
}

a {
	color: #ffffff;
	cursor: pointer;
	text-decoration: underline;
	font-style: italic;
}

.game-label {
	position: relative;
	display: block;
	width: fit-content;
	height: fit-content;
	margin: auto;
	line-height: 18px;
	cursor: pointer;
	text-decoration: underline;
	font-style: italic;
}

.game-item {
	position: relative;
	display: block;
	width: fit-content;
	height: fit-content;
	margin: auto;
}

#html5-game-container, #dos-game-container, #flash-game-container {
	position: relative;
	display: block;
	width: fit-content;
	height: fit-content;
	margin: auto;
}

.game-frame-container {
	position: relative;
	display: block;
	width: 800px;
	height: 600px;
	margin-left: auto;
	margin-right: auto;
	margin-top: 20px;
	margin-bottom: 20px;
}

game-frame, embed {
	position: absolute;
	display: block;
	width: 100%;
	height: 100%;
}

		</style>
	</head>
	<body>
		<div id="header">
			<div id="logo"></div>
			<div id="home" class="nav-button">Home</div>
			<div id="games" class="nav-button">Games</div>
			<div id="tools" class="nav-button">Tools</div>
		</div>
		<div id="content">
			<div id="home-screen">
				<img id="large-logo" src="res/logo.svg" width="512" height="128" />
				<div id="description">An open-source ad-less unblocked games website</div>
				<div class="subtitle">Important Notice</div>
				<div class="text" style="font-size: 16px; font-weight: 600;">In order to provide the best performance, please make sure that third-party cookies are enabled.</div>
				<div class="text" style="font-size: 16px; font-weight: 600; margin-bottom: 60px;">Some games might stop working by disabling third-party cookies or blocking ads.</div>
				<div class="subtitle">Embedded Links</div>
				<div class="text">If this website has been blocked, you can try one of the following link:</div>
				<a class="text" href="https://sites.google.com/view/whitespider" target="_blank">https://sites.google.com/view/whitespider</a>
				<a class="text" href="https://sites.google.com/view/white-spider" target="_blank">https://sites.google.com/view/white-spider</a>
				<a class="text" href="https://sites.google.com/view/wsunbl" target="_blank" style="margin-bottom: 60px;">https://sites.google.com/view/wsunbl</a>
				<div class="subtitle">Alternative Links</div>
				<div class="text">You can also access this website with one of the following link:</div>
				<a class="text" href="https://whitespider.cf" target="_blank">https://whitespider.cf</a>
				<a class="text" href="https://whitespider.ga" target="_blank">https://whitespider.ga</a>
				<a class="text" href="https://whitespider.gq" target="_blank">https://whitespider.gq</a>
				<a class="text" href="https://whitespider.tk" target="_blank" style="margin-bottom: 60px;">https://whitespider.tk</a>
				<div class="subtitle">GitHub Project</div>
				<div class="text">If you are an developer, you can access the source code and contribute to the project on GitHub.</div>
				<a class="text" href="https://www.github.com/ruochenjia/whitespider" target="_blank" style="margin-bottom: 60px;">GitHub Project</a>
			</div>
			<div id="games-screen" style="display: none;">
				<div class="title" style="margin-bottom: 50px;">Games</div>
				<div class="subtitle" style="margin-bottom: 30px;">HTML5 Games</div>
				<div id="html5-game-container" style="margin-bottom: 50px;"></div>
				<div class="subtitle" style="margin-bottom: 30px;">DOS Games</div>
				<div id="dos-game-container" style="margin-bottom: 50px;"></div>
				<div class="subtitle" style="margin-bottom: 30px;">Flash Games</div>
				<div id="flash-game-container" style="margin-bottom: 50px;"></div>
				<div class="text" style="margin-bottom: 50px;">More games are coming soon!</div>
			</div>
			<div id="tools-screen" style="display: none;">
				<div class="title" style="margin-bottom: 50px;">Tools</div>
				<a class="game-label" href="https://unblocker.whitespider.gq" target="_blank">Unblocker</a>
				<div class="text" style="margin-bottom: 25px;">This tool allows you to access all blocked websites through a web proxy.</div>
				<div class="game-label" id="youtube-adless">YouTube Adless</div>
				<div class="text" style="margin-bottom: 25px;">An unofficial YouTube client, with all ads removed.</div>
				<div class="game-frame-container" id="youtube-adless-frame" style="display: none;"></div>
				<div class="game-label" id="vmlinux">VMLinux</div>
				<div class="text" style="margin-bottom: 25px;">A 32-bit PC emulator based on <a href="https://github.com/copy/v86" target="_blank">v86</a>.</div>
				<div class="game-frame-container" id="vmlinux-frame" style="display: none; width: 1100px; height: 1600px;"></div>
			</div>
			<noscript>
				<div id="noscript-screen">
					<div class="text">Please <a href="https://www.google.com/search?q=how+to+enable+javascript" target="_blank">enable JavaScript</a> and reload this page.</div>
				</div>
			</noscript>
		</div>
		<script type="module">
"use strict";

// <![CDATA[

// default error handler
window.onerror = (msg, src, lineno, colno, e) => {
};


// basic navigations
let homeScreen = document.getElementById("home-screen");
let gamesScreen = document.getElementById("games-screen");
let toolsScreen = document.getElementById("tools-screen");
document.getElementById("home").onclick = () => {
	gamesScreen.style.display = "none";
	toolsScreen.style.display = "none";
	homeScreen.style.display = "block";
};
document.getElementById("games").onclick = () => {
	homeScreen.style.display = "none";
	toolsScreen.style.display = "none";
	gamesScreen.style.display = "block";
};
document.getElementById("tools").onclick = () => {
	homeScreen.style.display = "none";
	gamesScreen.style.display = "none";
	toolsScreen.style.display = "block";
};

// load game contents
import { contents } from "./contents.js";
import { ContentFrame } from "./contentframe.js";
let html5Games = contents.html5Games;
let dosGames = contents.dosGames;
let flashGames = contents.flashGames;

function initContent(contents, container) {
	for (let i in contents) {
		let content = contents[i];
		let item = document.createElement("div");
		item.className = "game-item";
		let label = document.createElement("div");
		label.className = "game-label";
		label.innerHTML = content.name;
		item.appendChild(label);
		let frameContainer = document.createElement("div");
		frameContainer.className = "game-frame-container";
		frameContainer.style.display = "none";
		item.appendChild(frameContainer);
		container.appendChild(item);

		label.onclick = (e) => {
			e.preventDefault();
			if (frameContainer.style.display == "none") {
				let frame = document.createElement("content-frame");
				let path = content.path;
				if (path != null)
					frame.setAttribute("path", content.path);
				else frame.setAttribute("src", content.url);
				frame.setAttribute("type", "text/plain");
				frameContainer.appendChild(frame);
				frameContainer.style.display = "block";
			} else {
				frameContainer.innerHTML = "";
				frameContainer.style.display = "none";
			}
		}
	}
}

initContent(html5Games, document.getElementById("html5-game-container"));
initContent(dosGames, document.getElementById("dos-game-container"));
initContent(flashGames, document.getElementById("flash-game-container"));



document.getElementById("youtube-adless").onclick = () => {
	let frame = document.getElementById("youtube-adless-frame");
	if (frame.style.display == "none") {
		let embed = document.createElement("embed");
		embed.type = "text/plain";
		embed.width = "1024";
		embed.height = "768";
		embed.src = "ebutuoy";
		frame.appendChild(embed);
		frame.style.display = "block";
	} else {
		frame.innerHTML = "";
		frame.style.display = "none";
	}
};
document.getElementById("vmlinux").onclick = () => {
	let frame = document.getElementById("vmlinux-frame");
	if (frame.style.display == "none") {
		let embed = document.createElement("embed");
		embed.type = "text/plain";
		embed.width = "1024";
		embed.height = "768";
		embed.src = "vmlinux";
		frame.appendChild(embed);
		frame.style.display = "block";
	} else {
		frame.innerHTML = "";
		frame.style.display = "none";
	}
};


// ]]>
		</script>
	</body>
</html>