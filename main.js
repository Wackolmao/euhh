/*! For license information please see out.js.LICENSE.txt */
(()=>{"use strict";var t={383:(t,e)=>{function s(t,e){if(null==t)return{};var s,i,r={},n=Object.keys(t);for(i=0;i<n.length;i++)s=n[i],e.indexOf(s)>=0||(r[s]=t[s]);return r}class i{constructor(t,e,s){this.line=void 0,this.column=void 0,this.index=void 0,this.line=t,this.column=e,this.index=s}}class r{constructor(t,e){this.start=void 0,this.end=void 0,this.filename=void 0,this.identifierName=void 0,this.start=t,this.end=e}}function n(t,e){const{line:s,column:r,index:n}=t;return new i(s,r+e,n+e)}const a="BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED";var o={ImportMetaOutsideModule:{message:"import.meta may appear only with 'sourceType: \"module\"'",code:a},ImportOutsideModule:{message:"'import' and 'export' may appear only with 'sourceType: \"module\"'",code:a}};const h={ArrayPattern:"array destructuring pattern",AssignmentExpression:"assignment expression",AssignmentPattern:"assignment expression",ArrowFunctionExpression:"arrow function expression",ConditionalExpression:"conditional expression",CatchClause:"catch clause",ForOfStatement:"for-of statement",ForInStatement:"for-in statement",ForStatement:"for-loop",FormalParameters:"function parameter list",Identifier:"identifier",ImportSpecifier:"import specifier",ImportDefaultSpecifier:"import default specifier",ImportNamespaceSpecifier:"import namespace specifier",ObjectPattern:"object destructuring pattern",ParenthesizedExpression:"parenthesized expression",RestElement:"rest element",UpdateExpression:{true:"prefix operation",false:"postfix operation"},VariableDeclarator:"variable declaration",YieldExpression:"yield expression"},c=({type:t,prefix:e})=>"UpdateExpression"===t?h.UpdateExpression[String(e)]:h[t];var l={AccessorIsGenerator:({kind:t})=>`A ${t}ter cannot be a generator.`,ArgumentsInClass:"'arguments' is only allowed in functions and class methods.",AsyncFunctionInSingleStatementContext:"Async functions can only be declared at the top level or inside a block.",AwaitBindingIdentifier:"Can not use 'await' as identifier inside an async function.",AwaitBindingIdentifierInStaticBlock:"Can not use 'await' as identifier inside a static block.",AwaitExpressionFormalParameter:"'await' is not allowed in async function parameters.",AwaitUsingNotInAsyncContext:"'await using' is only allowed within async functions and at the top levels of modules.",AwaitNotInAsyncContext:"'await' is only allowed within async functions and at the top levels of modules.",AwaitNotInAsyncFunction:"'await' is only allowed within async functions.",BadGetterArity:"A 'get' accessor must not have any formal parameters.",BadSetterArity:"A 'set' accessor must have exactly one formal parameter.",BadSetterRestParameter:"A 'set' accessor function argument must not be a rest parameter.",ConstructorClassField:"Classes may not have a field named 'constructor'.",ConstructorClassPrivateField:"Classes may not have a private field named '#constructor'.",ConstructorIsAccessor:"Class constructor may not be an accessor.",ConstructorIsAsync:"Constructor can't be an async function.",ConstructorIsGenerator:"Constructor can't be a generator.",DeclarationMissingInitializer:({kind:t})=>`Missing initializer in ${t} declaration.`,DecoratorArgumentsOutsideParentheses:"Decorator arguments must be moved inside parentheses: use '@(decorator(args))' instead of '@(decorator)(args)'.",DecoratorBeforeExport:"Decorators must be placed *before* the 'export' keyword. Remove the 'decoratorsBeforeExport: true' option to use the 'export @decorator class {}' syntax.",DecoratorsBeforeAfterExport:"Decorators can be placed *either* before or after the 'export' keyword, but not in both locations at the same time.",DecoratorConstructor:"Decorators can't be used with a constructor. Did you mean '@dec class { ... }'?",DecoratorExportClass:"Decorators must be placed *after* the 'export' keyword. Remove the 'decoratorsBeforeExport: false' option to use the '@decorator export class {}' syntax.",DecoratorSemicolon:"Decorators must not be followed by a semicolon.",DecoratorStaticBlock:"Decorators can't be used with a static block.",DeferImportRequiresNamespace:'Only `import defer * as x from "./module"` is valid.',DeletePrivateField:"Deleting a private field is not allowed.",DestructureNamedImport:"ES2015 named imports do not destructure. Use another statement for destructuring after the import.",DuplicateConstructor:"Duplicate constructor in the same class.",DuplicateDefaultExport:"Only one default export allowed per module.",DuplicateExport:({exportName:t})=>`\`${t}\` has already been exported. Exported identifiers must be unique.`,DuplicateProto:"Redefinition of __proto__ property.",DuplicateRegExpFlags:"Duplicate regular expression flag.",DynamicImportPhaseRequiresImportExpressions:({phase:t})=>`'import.${t}(...)' can only be parsed when using the 'createImportExpressions' option.`,ElementAfterRest:"Rest element must be last element.",EscapedCharNotAnIdentifier:"Invalid Unicode escape.",ExportBindingIsString:({localName:t,exportName:e})=>`A string literal cannot be used as an exported binding without \`from\`.\n- Did you mean \`export { '${t}' as '${e}' } from 'some-module'\`?`,ExportDefaultFromAsIdentifier:"'from' is not allowed as an identifier after 'export default'.",ForInOfLoopInitializer:({type:t})=>`'${"ForInStatement"===t?"for-in":"for-of"}' loop variable declaration may not have an initializer.`,ForInUsing:"For-in loop may not start with 'using' declaration.",ForOfAsync:"The left-hand side of a for-of loop may not be 'async'.",ForOfLet:"The left-hand side of a for-of loop may not start with 'let'.",GeneratorInSingleStatementContext:"Generators can only be declared at the top level or inside a block.",IllegalBreakContinue:({type:t})=>`Unsyntactic ${"BreakStatement"===t?"break":"continue"}.`,IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list.",IllegalReturn:"'return' outside of function.",ImportAttributesUseAssert:"The `assert` keyword in import attributes is deprecated and it has been replaced by the `with` keyword. You can enable the `deprecatedAssertSyntax: true` option in the import attributes plugin to suppress this error.",ImportBindingIsString:({importName:t})=>`A string literal cannot be used as an imported binding.\n- Did you mean \`import { "${t}" as foo }\`?`,ImportCallArgumentTrailingComma:"Trailing comma is disallowed inside import(...) arguments.",ImportCallArity:({maxArgumentCount:t})=>`\`import()\` requires exactly ${1===t?"one argument":"one or two arguments"}.`,ImportCallNotNewExpression:"Cannot use new with import(...).",ImportCallSpreadArgument:"`...` is not allowed in `import()`.",ImportJSONBindingNotDefault:"A JSON module can only be imported with `default`.",ImportReflectionHasAssertion:"`import module x` cannot have assertions.",ImportReflectionNotBinding:'Only `import module x from "./module"` is valid.',IncompatibleRegExpUVFlags:"The 'u' and 'v' regular expression flags cannot be enabled at the same time.",InvalidBigIntLiteral:"Invalid BigIntLiteral.",InvalidCodePoint:"Code point out of bounds.",InvalidCoverInitializedName:"Invalid shorthand property initializer.",InvalidDecimal:"Invalid decimal.",InvalidDigit:({radix:t})=>`Expected number in radix ${t}.`,InvalidEscapeSequence:"Bad character escape sequence.",InvalidEscapeSequenceTemplate:"Invalid escape sequence in template.",InvalidEscapedReservedWord:({reservedWord:t})=>`Escape sequence in keyword ${t}.`,InvalidIdentifier:({identifierName:t})=>`Invalid identifier ${t}.`,InvalidLhs:({ancestor:t})=>`Invalid left-hand side in ${c(t)}.`,InvalidLhsBinding:({ancestor:t})=>`Binding invalid left-hand side in ${c(t)}.`,InvalidLhsOptionalChaining:({ancestor:t})=>`Invalid optional chaining in the left-hand side of ${c(t)}.`,InvalidNumber:"Invalid number.",InvalidOrMissingExponent:"Floating-point numbers require a valid exponent after the 'e'.",InvalidOrUnexpectedToken:({unexpected:t})=>`Unexpected character '${t}'.`,InvalidParenthesizedAssignment:"Invalid parenthesized assignment pattern.",InvalidPrivateFieldResolution:({identifierName:t})=>`Private name #${t} is not defined.`,InvalidPropertyBindingPattern:"Binding member expression.",InvalidRecordProperty:"Only properties and spread elements are allowed in record definitions.",InvalidRestAssignmentPattern:"Invalid rest operator's argument.",LabelRedeclaration:({labelName:t})=>`Label '${t}' is already declared.`,LetInLexicalBinding:"'let' is disallowed as a lexically bound name.",LineTerminatorBeforeArrow:"No line break is allowed before '=>'.",MalformedRegExpFlags:"Invalid regular expression flag.",MissingClassName:"A class name is required.",MissingEqInAssignment:"Only '=' operator can be used for specifying default value.",MissingSemicolon:"Missing semicolon.",MissingPlugin:({missingPlugin:t})=>`This experimental syntax requires enabling the parser plugin: ${t.map((t=>JSON.stringify(t))).join(", ")}.`,MissingOneOfPlugins:({missingPlugin:t})=>`This experimental syntax requires enabling one of the following parser plugin(s): ${t.map((t=>JSON.stringify(t))).join(", ")}.`,MissingUnicodeEscape:"Expecting Unicode escape sequence \\uXXXX.",MixingCoalesceWithLogical:"Nullish coalescing operator(??) requires parens when mixing with logical operators.",ModuleAttributeDifferentFromType:"The only accepted module attribute is `type`.",ModuleAttributeInvalidValue:"Only string literals are allowed as module attribute values.",ModuleAttributesWithDuplicateKeys:({key:t})=>`Duplicate key "${t}" is not allowed in module attributes.`,ModuleExportNameHasLoneSurrogate:({surrogateCharCode:t})=>`An export name cannot include a lone surrogate, found '\\u${t.toString(16)}'.`,ModuleExportUndefined:({localName:t})=>`Export '${t}' is not defined.`,MultipleDefaultsInSwitch:"Multiple default clauses.",NewlineAfterThrow:"Illegal newline after throw.",NoCatchOrFinally:"Missing catch or finally clause.",NumberIdentifier:"Identifier directly after number.",NumericSeparatorInEscapeSequence:"Numeric separators are not allowed inside unicode escape sequences or hex escape sequences.",ObsoleteAwaitStar:"'await*' has been removed from the async functions proposal. Use Promise.all() instead.",OptionalChainingNoNew:"Constructors in/after an Optional Chain are not allowed.",OptionalChainingNoTemplate:"Tagged Template Literals are not allowed in optionalChain.",OverrideOnConstructor:"'override' modifier cannot appear on a constructor declaration.",ParamDupe:"Argument name clash.",PatternHasAccessor:"Object pattern can't contain getter or setter.",PatternHasMethod:"Object pattern can't contain methods.",PrivateInExpectedIn:({identifierName:t})=>`Private names are only allowed in property accesses (\`obj.#${t}\`) or in \`in\` expressions (\`#${t} in obj\`).`,PrivateNameRedeclaration:({identifierName:t})=>`Duplicate private name #${t}.`,RecordExpressionBarIncorrectEndSyntaxType:"Record expressions ending with '|}' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionBarIncorrectStartSyntaxType:"Record expressions starting with '{|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionHashIncorrectStartSyntaxType:"Record expressions starting with '#{' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",RecordNoProto:"'__proto__' is not allowed in Record expressions.",RestTrailingComma:"Unexpected trailing comma after rest element.",SloppyFunction:"In non-strict mode code, functions can only be declared at top level or inside a block.",SloppyFunctionAnnexB:"In non-strict mode code, functions can only be declared at top level, inside a block, or as the body of an if statement.",SourcePhaseImportRequiresDefault:'Only `import source x from "./module"` is valid.',StaticPrototype:"Classes may not have static property named prototype.",SuperNotAllowed:"`super()` is only valid inside a class constructor of a subclass. Maybe a typo in the method name ('constructor') or not extending another class?",SuperPrivateField:"Private fields can't be accessed on super.",TrailingDecorator:"Decorators must be attached to a class element.",TupleExpressionBarIncorrectEndSyntaxType:"Tuple expressions ending with '|]' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionBarIncorrectStartSyntaxType:"Tuple expressions starting with '[|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionHashIncorrectStartSyntaxType:"Tuple expressions starting with '#[' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",UnexpectedArgumentPlaceholder:"Unexpected argument placeholder.",UnexpectedAwaitAfterPipelineBody:'Unexpected "await" after pipeline body; await must have parentheses in minimal proposal.',UnexpectedDigitAfterHash:"Unexpected digit after hash token.",UnexpectedImportExport:"'import' and 'export' may only appear at the top level.",UnexpectedKeyword:({keyword:t})=>`Unexpected keyword '${t}'.`,UnexpectedLeadingDecorator:"Leading decorators must be attached to a class declaration.",UnexpectedLexicalDeclaration:"Lexical declaration cannot appear in a single-statement context.",UnexpectedNewTarget:"`new.target` can only be used in functions or class properties.",UnexpectedNumericSeparator:"A numeric separator is only allowed between two digits.",UnexpectedPrivateField:"Unexpected private name.",UnexpectedReservedWord:({reservedWord:t})=>`Unexpected reserved word '${t}'.`,UnexpectedSuper:"'super' is only allowed in object methods and classes.",UnexpectedToken:({expected:t,unexpected:e})=>`Unexpected token${e?` '${e}'.`:""}${t?`, expected "${t}"`:""}`,UnexpectedTokenUnaryExponentiation:"Illegal expression. Wrap left hand side or entire exponentiation in parentheses.",UnexpectedUsingDeclaration:"Using declaration cannot appear in the top level when source type is `script`.",UnsupportedBind:"Binding should be performed on object property.",UnsupportedDecoratorExport:"A decorated export must export a class declaration.",UnsupportedDefaultExport:"Only expressions, functions or classes are allowed as the `default` export.",UnsupportedImport:"`import` can only be used in `import()` or `import.meta`.",UnsupportedMetaProperty:({target:t,onlyValidPropertyName:e})=>`The only valid meta property for ${t} is ${t}.${e}.`,UnsupportedParameterDecorator:"Decorators cannot be used to decorate parameters.",UnsupportedPropertyDecorator:"Decorators cannot be used to decorate object literal properties.",UnsupportedSuper:"'super' can only be used with function calls (i.e. super()) or in property accesses (i.e. super.prop or super[prop]).",UnterminatedComment:"Unterminated comment.",UnterminatedRegExp:"Unterminated regular expression.",UnterminatedString:"Unterminated string constant.",UnterminatedTemplate:"Unterminated template.",UsingDeclarationHasBindingPattern:"Using declaration cannot have destructuring patterns.",VarRedeclaration:({identifierName:t})=>`Identifier '${t}' has already been declared.`,YieldBindingIdentifier:"Can not use 'yield' as identifier inside a generator.",YieldInParameter:"Yield expression is not allowed in formal parameters.",ZeroDigitNumericSeparator:"Numeric separator can not be used after leading 0."};const p=new Set(["ArrowFunctionExpression","AssignmentExpression","ConditionalExpression","YieldExpression"]);var u={PipeBodyIsTighter:"Unexpected yield after pipeline body; any yield expression acting as Hack-style pipe body must be parenthesized due to its loose operator precedence.",PipeTopicRequiresHackPipes:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.',PipeTopicUnbound:"Topic reference is unbound; it must be inside a pipe body.",PipeTopicUnconfiguredToken:({token:t})=>`Invalid topic token ${t}. In order to use ${t} as a topic reference, the pipelineOperator plugin must be configured with { "proposal": "hack", "topicToken": "${t}" }.`,PipeTopicUnused:"Hack-style pipe body does not contain a topic reference; Hack-style pipes must use topic at least once.",PipeUnparenthesizedBody:({type:t})=>`Hack-style pipe body cannot be an unparenthesized ${c({type:t})}; please wrap it in parentheses.`,PipelineBodyNoArrow:'Unexpected arrow "=>" after pipeline body; arrow function in pipeline body must be parenthesized.',PipelineBodySequenceExpression:"Pipeline body may not be a comma-separated sequence expression.",PipelineHeadSequenceExpression:"Pipeline head should not be a comma-separated sequence expression.",PipelineTopicUnused:"Pipeline is in topic style but does not use topic reference.",PrimaryTopicNotAllowed:"Topic reference was used in a lexical context without topic binding.",PrimaryTopicRequiresSmartPipeline:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.'};const d=["toMessage"],m=["message"];function f(t,e,s){Object.defineProperty(t,e,{enumerable:!1,configurable:!0,value:s})}function y(t){let{toMessage:e}=t,r=s(t,d);return function t({loc:s,details:n}){const a=new SyntaxError;return Object.assign(a,r,{loc:s,pos:s.index}),"missingPlugin"in n&&Object.assign(a,{missingPlugin:n.missingPlugin}),f(a,"clone",(function(e={}){var r;const{line:a,column:o,index:h}=null!=(r=e.loc)?r:s;return t({loc:new i(a,o,h),details:Object.assign({},n,e.details)})})),f(a,"details",n),Object.defineProperty(a,"message",{configurable:!0,get(){const t=`${e(n)} (${s.line}:${s.column})`;return this.message=t,t},set(t){Object.defineProperty(this,"message",{value:t,writable:!0})}}),a}}function I(t,e){if(Array.isArray(t))return e=>I(e,t[0]);const i={};for(const r of Object.keys(t)){const n=t[r],a="string"==typeof n?{message:()=>n}:"function"==typeof n?{message:n}:n,{message:o}=a,h=s(a,m),c="string"==typeof o?()=>o:o;i[r]=y(Object.assign({code:"BABEL_PARSER_SYNTAX_ERROR",reasonCode:r,toMessage:c},e?{syntaxPlugin:e}:{},h))}return i}const g=Object.assign({},I(o),I(l),I({StrictDelete:"Deleting local variable in strict mode.",StrictEvalArguments:({referenceName:t})=>`Assigning to '${t}' in strict mode.`,StrictEvalArgumentsBinding:({bindingName:t})=>`Binding '${t}' in strict mode.`,StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block.",StrictNumericEscape:"The only valid numeric escape in strict mode is '\\0'.",StrictOctalLiteral:"Legacy octal literals are not allowed in strict mode.",StrictWith:"'with' in strict mode."}),I`pipelineOperator`(u)),{defineProperty:b}=Object,x=(t,e)=>b(t,e,{enumerable:!1,value:t[e]});function w(t){return t.loc.start&&x(t.loc.start,"index"),t.loc.end&&x(t.loc.end,"index"),t}class T{constructor(t,e){this.token=void 0,this.preserveSpace=void 0,this.token=t,this.preserveSpace=!!e}}const N={brace:new T("{"),j_oTag:new T("<tag"),j_cTag:new T("</tag"),j_expr:new T("<tag>...</tag>",!0)};N.template=new T("`",!0);const C=!0,v=!0,S=!0,P=!0,E=!0;class _{constructor(t,e={}){this.label=void 0,this.keyword=void 0,this.beforeExpr=void 0,this.startsExpr=void 0,this.rightAssociative=void 0,this.isLoop=void 0,this.isAssign=void 0,this.prefix=void 0,this.postfix=void 0,this.binop=void 0,this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.rightAssociative=!!e.rightAssociative,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=null!=e.binop?e.binop:null,this.updateContext=null}}const L=new Map;function k(t,e={}){e.keyword=t;const s=R(t,e);return L.set(t,s),s}function M(t,e){return R(t,{beforeExpr:C,binop:e})}let A=-1;const O=[],Z=[],j=[],D=[],Y=[],W=[];function R(t,e={}){var s,i,r,n;return++A,Z.push(t),j.push(null!=(s=e.binop)?s:-1),D.push(null!=(i=e.beforeExpr)&&i),Y.push(null!=(r=e.startsExpr)&&r),W.push(null!=(n=e.prefix)&&n),O.push(new _(t,e)),A}function F(t,e={}){var s,i,r,n;return++A,L.set(t,A),Z.push(t),j.push(null!=(s=e.binop)?s:-1),D.push(null!=(i=e.beforeExpr)&&i),Y.push(null!=(r=e.startsExpr)&&r),W.push(null!=(n=e.prefix)&&n),O.push(new _("name",e)),A}const J={bracketL:R("[",{beforeExpr:C,startsExpr:v}),bracketHashL:R("#[",{beforeExpr:C,startsExpr:v}),bracketBarL:R("[|",{beforeExpr:C,startsExpr:v}),bracketR:R("]"),bracketBarR:R("|]"),braceL:R("{",{beforeExpr:C,startsExpr:v}),braceBarL:R("{|",{beforeExpr:C,startsExpr:v}),braceHashL:R("#{",{beforeExpr:C,startsExpr:v}),braceR:R("}"),braceBarR:R("|}"),parenL:R("(",{beforeExpr:C,startsExpr:v}),parenR:R(")"),comma:R(",",{beforeExpr:C}),semi:R(";",{beforeExpr:C}),colon:R(":",{beforeExpr:C}),doubleColon:R("::",{beforeExpr:C}),dot:R("."),question:R("?",{beforeExpr:C}),questionDot:R("?."),arrow:R("=>",{beforeExpr:C}),template:R("template"),ellipsis:R("...",{beforeExpr:C}),backQuote:R("`",{startsExpr:v}),dollarBraceL:R("${",{beforeExpr:C,startsExpr:v}),templateTail:R("...`",{startsExpr:v}),templateNonTail:R("...${",{beforeExpr:C,startsExpr:v}),at:R("@"),hash:R("#",{startsExpr:v}),interpreterDirective:R("#!..."),eq:R("=",{beforeExpr:C,isAssign:P}),assign:R("_=",{beforeExpr:C,isAssign:P}),slashAssign:R("_=",{beforeExpr:C,isAssign:P}),xorAssign:R("_=",{beforeExpr:C,isAssign:P}),moduloAssign:R("_=",{beforeExpr:C,isAssign:P}),incDec:R("++/--",{prefix:E,postfix:!0,startsExpr:v}),bang:R("!",{beforeExpr:C,prefix:E,startsExpr:v}),tilde:R("~",{beforeExpr:C,prefix:E,startsExpr:v}),doubleCaret:R("^^",{startsExpr:v}),doubleAt:R("@@",{startsExpr:v}),pipeline:M("|>",0),nullishCoalescing:M("??",1),logicalOR:M("||",1),logicalAND:M("&&",2),bitwiseOR:M("|",3),bitwiseXOR:M("^",4),bitwiseAND:M("&",5),equality:M("==/!=/===/!==",6),lt:M("</>/<=/>=",7),gt:M("</>/<=/>=",7),relational:M("</>/<=/>=",7),bitShift:M("<</>>/>>>",8),bitShiftL:M("<</>>/>>>",8),bitShiftR:M("<</>>/>>>",8),plusMin:R("+/-",{beforeExpr:C,binop:9,prefix:E,startsExpr:v}),modulo:R("%",{binop:10,startsExpr:v}),star:R("*",{binop:10}),slash:M("/",10),exponent:R("**",{beforeExpr:C,binop:11,rightAssociative:!0}),_in:k("in",{beforeExpr:C,binop:7}),_instanceof:k("instanceof",{beforeExpr:C,binop:7}),_break:k("break"),_case:k("case",{beforeExpr:C}),_catch:k("catch"),_continue:k("continue"),_debugger:k("debugger"),_default:k("default",{beforeExpr:C}),_else:k("else",{beforeExpr:C}),_finally:k("finally"),_function:k("function",{startsExpr:v}),_if:k("if"),_return:k("return",{beforeExpr:C}),_switch:k("switch"),_throw:k("throw",{beforeExpr:C,prefix:E,startsExpr:v}),_try:k("try"),_var:k("var"),_const:k("const"),_with:k("with"),_new:k("new",{beforeExpr:C,startsExpr:v}),_this:k("this",{startsExpr:v}),_super:k("super",{startsExpr:v}),_class:k("class",{startsExpr:v}),_extends:k("extends",{beforeExpr:C}),_export:k("export"),_import:k("import",{startsExpr:v}),_null:k("null",{startsExpr:v}),_true:k("true",{startsExpr:v}),_false:k("false",{startsExpr:v}),_typeof:k("typeof",{beforeExpr:C,prefix:E,startsExpr:v}),_void:k("void",{beforeExpr:C,prefix:E,startsExpr:v}),_delete:k("delete",{beforeExpr:C,prefix:E,startsExpr:v}),_do:k("do",{isLoop:S,beforeExpr:C}),_for:k("for",{isLoop:S}),_while:k("while",{isLoop:S}),_as:F("as",{startsExpr:v}),_assert:F("assert",{startsExpr:v}),_async:F("async",{startsExpr:v}),_await:F("await",{startsExpr:v}),_defer:F("defer",{startsExpr:v}),_from:F("from",{startsExpr:v}),_get:F("get",{startsExpr:v}),_let:F("let",{startsExpr:v}),_meta:F("meta",{startsExpr:v}),_of:F("of",{startsExpr:v}),_sent:F("sent",{startsExpr:v}),_set:F("set",{startsExpr:v}),_source:F("source",{startsExpr:v}),_static:F("static",{startsExpr:v}),_using:F("using",{startsExpr:v}),_yield:F("yield",{startsExpr:v}),_asserts:F("asserts",{startsExpr:v}),_checks:F("checks",{startsExpr:v}),_exports:F("exports",{startsExpr:v}),_global:F("global",{startsExpr:v}),_implements:F("implements",{startsExpr:v}),_intrinsic:F("intrinsic",{startsExpr:v}),_infer:F("infer",{startsExpr:v}),_is:F("is",{startsExpr:v}),_mixins:F("mixins",{startsExpr:v}),_proto:F("proto",{startsExpr:v}),_require:F("require",{startsExpr:v}),_satisfies:F("satisfies",{startsExpr:v}),_keyof:F("keyof",{startsExpr:v}),_readonly:F("readonly",{startsExpr:v}),_unique:F("unique",{startsExpr:v}),_abstract:F("abstract",{startsExpr:v}),_declare:F("declare",{startsExpr:v}),_enum:F("enum",{startsExpr:v}),_module:F("module",{startsExpr:v}),_namespace:F("namespace",{startsExpr:v}),_interface:F("interface",{startsExpr:v}),_type:F("type",{startsExpr:v}),_opaque:F("opaque",{startsExpr:v}),name:R("name",{startsExpr:v}),string:R("string",{startsExpr:v}),num:R("num",{startsExpr:v}),bigint:R("bigint",{startsExpr:v}),decimal:R("decimal",{startsExpr:v}),regexp:R("regexp",{startsExpr:v}),privateName:R("#name",{startsExpr:v}),eof:R("eof"),jsxName:R("jsxName"),jsxText:R("jsxText",{beforeExpr:!0}),jsxTagStart:R("jsxTagStart",{startsExpr:!0}),jsxTagEnd:R("jsxTagEnd"),placeholder:R("%%",{startsExpr:!0})};function U(t){return t>=93&&t<=132}function z(t){return t>=58&&t<=132}function B(t){return t>=58&&t<=136}function V(t){return Y[t]}function G(t){return t>=129&&t<=131}function H(t){return t>=58&&t<=92}function X(t){return Z[t]}function Q(t){return j[t]}function q(t){return t>=24&&t<=25}function $(t){return O[t]}O[8].updateContext=t=>{t.pop()},O[5].updateContext=O[7].updateContext=O[23].updateContext=t=>{t.push(N.brace)},O[22].updateContext=t=>{t[t.length-1]===N.template?t.pop():t.push(N.template)},O[142].updateContext=t=>{t.push(N.j_expr,N.j_oTag)};let K="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",tt="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･";const et=new RegExp("["+K+"]"),st=new RegExp("["+K+tt+"]");K=tt=null;const it=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],rt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239];function nt(t,e){let s=65536;for(let i=0,r=e.length;i<r;i+=2){if(s+=e[i],s>t)return!1;if(s+=e[i+1],s>=t)return!0}return!1}function at(t){return t<65?36===t:t<=90||(t<97?95===t:t<=122||(t<=65535?t>=170&&et.test(String.fromCharCode(t)):nt(t,it)))}function ot(t){return t<48?36===t:t<58||!(t<65)&&(t<=90||(t<97?95===t:t<=122||(t<=65535?t>=170&&st.test(String.fromCharCode(t)):nt(t,it)||nt(t,rt))))}const ht=new Set(["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"]),ct=new Set(["implements","interface","let","package","private","protected","public","static","yield"]),lt=new Set(["eval","arguments"]);function pt(t,e){return e&&"await"===t||"enum"===t}function ut(t,e){return pt(t,e)||ct.has(t)}function dt(t){return lt.has(t)}function mt(t,e){return ut(t,e)||dt(t)}const ft=new Set(["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete","implements","interface","let","package","private","protected","public","static","yield","eval","arguments","enum","await"]);class yt{constructor(t){this.var=new Set,this.lexical=new Set,this.functions=new Set,this.flags=t}}class It{constructor(t,e){this.parser=void 0,this.scopeStack=[],this.inModule=void 0,this.undefinedExports=new Map,this.parser=t,this.inModule=e}get inTopLevel(){return(1&this.currentScope().flags)>0}get inFunction(){return(2&this.currentVarScopeFlags())>0}get allowSuper(){return(16&this.currentThisScopeFlags())>0}get allowDirectSuper(){return(32&this.currentThisScopeFlags())>0}get inClass(){return(64&this.currentThisScopeFlags())>0}get inClassAndNotInNonArrowFunction(){const t=this.currentThisScopeFlags();return(64&t)>0&&0==(2&t)}get inStaticBlock(){for(let t=this.scopeStack.length-1;;t--){const{flags:e}=this.scopeStack[t];if(128&e)return!0;if(451&e)return!1}}get inNonArrowFunction(){return(2&this.currentThisScopeFlags())>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}createScope(t){return new yt(t)}enter(t){this.scopeStack.push(this.createScope(t))}exit(){return this.scopeStack.pop().flags}treatFunctionsAsVarInScope(t){return!!(130&t.flags||!this.parser.inModule&&1&t.flags)}declareName(t,e,s){let i=this.currentScope();if(8&e||16&e)this.checkRedeclarationInScope(i,t,e,s),16&e?i.functions.add(t):i.lexical.add(t),8&e&&this.maybeExportDefined(i,t);else if(4&e)for(let r=this.scopeStack.length-1;r>=0&&(i=this.scopeStack[r],this.checkRedeclarationInScope(i,t,e,s),i.var.add(t),this.maybeExportDefined(i,t),!(387&i.flags));--r);this.parser.inModule&&1&i.flags&&this.undefinedExports.delete(t)}maybeExportDefined(t,e){this.parser.inModule&&1&t.flags&&this.undefinedExports.delete(e)}checkRedeclarationInScope(t,e,s,i){this.isRedeclaredInScope(t,e,s)&&this.parser.raise(g.VarRedeclaration,{at:i,identifierName:e})}isRedeclaredInScope(t,e,s){return!!(1&s)&&(8&s?t.lexical.has(e)||t.functions.has(e)||t.var.has(e):16&s?t.lexical.has(e)||!this.treatFunctionsAsVarInScope(t)&&t.var.has(e):t.lexical.has(e)&&!(8&t.flags&&t.lexical.values().next().value===e)||!this.treatFunctionsAsVarInScope(t)&&t.functions.has(e))}checkLocalExport(t){const{name:e}=t,s=this.scopeStack[0];s.lexical.has(e)||s.var.has(e)||s.functions.has(e)||this.undefinedExports.set(e,t.loc.start)}currentScope(){return this.scopeStack[this.scopeStack.length-1]}currentVarScopeFlags(){for(let t=this.scopeStack.length-1;;t--){const{flags:e}=this.scopeStack[t];if(387&e)return e}}currentThisScopeFlags(){for(let t=this.scopeStack.length-1;;t--){const{flags:e}=this.scopeStack[t];if(451&e&&!(4&e))return e}}}class gt extends yt{constructor(...t){super(...t),this.declareFunctions=new Set}}class bt extends It{createScope(t){return new gt(t)}declareName(t,e,s){const i=this.currentScope();if(2048&e)return this.checkRedeclarationInScope(i,t,e,s),this.maybeExportDefined(i,t),void i.declareFunctions.add(t);super.declareName(t,e,s)}isRedeclaredInScope(t,e,s){return!!super.isRedeclaredInScope(t,e,s)||!!(2048&s)&&!t.declareFunctions.has(e)&&(t.lexical.has(e)||t.functions.has(e))}checkLocalExport(t){this.scopeStack[0].declareFunctions.has(t.name)||super.checkLocalExport(t)}}class xt{constructor(){this.sawUnambiguousESM=!1,this.ambiguousScriptDifferentAst=!1}hasPlugin(t){if("string"==typeof t)return this.plugins.has(t);{const[e,s]=t;if(!this.hasPlugin(e))return!1;const i=this.plugins.get(e);for(const t of Object.keys(s))if((null==i?void 0:i[t])!==s[t])return!1;return!0}}getPluginOption(t,e){var s;return null==(s=this.plugins.get(t))?void 0:s[e]}}function wt(t,e){void 0===t.trailingComments?t.trailingComments=e:t.trailingComments.unshift(...e)}function Tt(t,e){void 0===t.innerComments?t.innerComments=e:t.innerComments.unshift(...e)}function Nt(t,e,s){let i=null,r=e.length;for(;null===i&&r>0;)i=e[--r];null===i||i.start>s.start?Tt(t,s.comments):wt(i,s.comments)}class Ct extends xt{addComment(t){this.filename&&(t.loc.filename=this.filename),this.state.comments.push(t)}processComment(t){const{commentStack:e}=this.state,s=e.length;if(0===s)return;let i=s-1;const r=e[i];r.start===t.end&&(r.leadingNode=t,i--);const{start:n}=t;for(;i>=0;i--){const s=e[i],r=s.end;if(!(r>n)){r===n&&(s.trailingNode=t);break}s.containingNode=t,this.finalizeComment(s),e.splice(i,1)}}finalizeComment(t){const{comments:e}=t;if(null!==t.leadingNode||null!==t.trailingNode)null!==t.leadingNode&&wt(t.leadingNode,e),null!==t.trailingNode&&function(t,e){void 0===t.leadingComments?t.leadingComments=e:t.leadingComments.unshift(...e)}(t.trailingNode,e);else{const{containingNode:s,start:i}=t;if(44===this.input.charCodeAt(i-1))switch(s.type){case"ObjectExpression":case"ObjectPattern":case"RecordExpression":Nt(s,s.properties,t);break;case"CallExpression":case"OptionalCallExpression":Nt(s,s.arguments,t);break;case"FunctionDeclaration":case"FunctionExpression":case"ArrowFunctionExpression":case"ObjectMethod":case"ClassMethod":case"ClassPrivateMethod":Nt(s,s.params,t);break;case"ArrayExpression":case"ArrayPattern":case"TupleExpression":Nt(s,s.elements,t);break;case"ExportNamedDeclaration":case"ImportDeclaration":Nt(s,s.specifiers,t);break;default:Tt(s,e)}else Tt(s,e)}}finalizeRemainingComments(){const{commentStack:t}=this.state;for(let e=t.length-1;e>=0;e--)this.finalizeComment(t[e]);this.state.commentStack=[]}resetPreviousNodeTrailingComments(t){const{commentStack:e}=this.state,{length:s}=e;if(0===s)return;const i=e[s-1];i.leadingNode===t&&(i.leadingNode=null)}resetPreviousIdentifierLeadingComments(t){const{commentStack:e}=this.state,{length:s}=e;0!==s&&(e[s-1].trailingNode===t?e[s-1].trailingNode=null:s>=2&&e[s-2].trailingNode===t&&(e[s-2].trailingNode=null))}takeSurroundingComments(t,e,s){const{commentStack:i}=this.state,r=i.length;if(0===r)return;let n=r-1;for(;n>=0;n--){const r=i[n],a=r.end;if(r.start===s)r.leadingNode=t;else if(a===e)r.trailingNode=t;else if(a<e)break}}}const vt=/\r\n?|[\n\u2028\u2029]/,St=new RegExp(vt.source,"g");function Pt(t){switch(t){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}const Et=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,_t=/(?:[^\S\n\r\u2028\u2029]|\/\/.*|\/\*.*?\*\/)*/g,Lt=new RegExp("(?=("+_t.source+"))\\1"+/(?=[\n\r\u2028\u2029]|\/\*(?!.*?\*\/)|$)/.source,"y");function kt(t){switch(t){case 9:case 11:case 12:case 32:case 160:case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}class Mt{constructor(){this.strict=void 0,this.curLine=void 0,this.lineStart=void 0,this.startLoc=void 0,this.endLoc=void 0,this.errors=[],this.potentialArrowAt=-1,this.noArrowAt=[],this.noArrowParamsConversionAt=[],this.maybeInArrowParameters=!1,this.inType=!1,this.noAnonFunctionType=!1,this.hasFlowComment=!1,this.isAmbientContext=!1,this.inAbstractClass=!1,this.inDisallowConditionalTypesContext=!1,this.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null},this.soloAwait=!1,this.inFSharpPipelineDirectBody=!1,this.labels=[],this.comments=[],this.commentStack=[],this.pos=0,this.type=139,this.value=null,this.start=0,this.end=0,this.lastTokEndLoc=null,this.lastTokStartLoc=null,this.lastTokStart=0,this.context=[N.brace],this.canStartJSXElement=!0,this.containsEsc=!1,this.firstInvalidTemplateEscapePos=null,this.strictErrors=new Map,this.tokensLength=0}init({strictMode:t,sourceType:e,startLine:s,startColumn:r}){this.strict=!1!==t&&(!0===t||"module"===e),this.curLine=s,this.lineStart=-r,this.startLoc=this.endLoc=new i(s,r,0)}curPosition(){return new i(this.curLine,this.pos-this.lineStart,this.pos)}clone(t){const e=new Mt,s=Object.keys(this);for(let i=0,r=s.length;i<r;i++){const r=s[i];let n=this[r];!t&&Array.isArray(n)&&(n=n.slice()),e[r]=n}return e}}var At=function(t){return t>=48&&t<=57};const Ot={decBinOct:new Set([46,66,69,79,95,98,101,111]),hex:new Set([46,88,95,120])},Zt={bin:t=>48===t||49===t,oct:t=>t>=48&&t<=55,dec:t=>t>=48&&t<=57,hex:t=>t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102};function jt(t,e,s,i,r,n){const a=s,o=i,h=r;let c="",l=null,p=s;const{length:u}=e;for(;;){if(s>=u){n.unterminated(a,o,h),c+=e.slice(p,s);break}const d=e.charCodeAt(s);if(Dt(t,d,e,s)){c+=e.slice(p,s);break}if(92===d){c+=e.slice(p,s);const a=Yt(e,s,i,r,"template"===t,n);null!==a.ch||l?c+=a.ch:l={pos:s,lineStart:i,curLine:r},({pos:s,lineStart:i,curLine:r}=a),p=s}else 8232===d||8233===d?(++r,i=++s):10===d||13===d?"template"===t?(c+=e.slice(p,s)+"\n",++s,13===d&&10===e.charCodeAt(s)&&++s,++r,p=i=s):n.unterminated(a,o,h):++s}return{pos:s,str:c,firstInvalidLoc:l,lineStart:i,curLine:r,containsInvalid:!!l}}function Dt(t,e,s,i){return"template"===t?96===e||36===e&&123===s.charCodeAt(i+1):e===("double"===t?34:39)}function Yt(t,e,s,i,r,n){const a=!r;e++;const o=t=>({pos:e,ch:t,lineStart:s,curLine:i}),h=t.charCodeAt(e++);switch(h){case 110:return o("\n");case 114:return o("\r");case 120:{let r;return({code:r,pos:e}=Wt(t,e,s,i,2,!1,a,n)),o(null===r?null:String.fromCharCode(r))}case 117:{let r;return({code:r,pos:e}=Ft(t,e,s,i,a,n)),o(null===r?null:String.fromCodePoint(r))}case 116:return o("\t");case 98:return o("\b");case 118:return o("\v");case 102:return o("\f");case 13:10===t.charCodeAt(e)&&++e;case 10:s=e,++i;case 8232:case 8233:return o("");case 56:case 57:if(r)return o(null);n.strictNumericEscape(e-1,s,i);default:if(h>=48&&h<=55){const a=e-1;let h=t.slice(a,e+2).match(/^[0-7]+/)[0],c=parseInt(h,8);c>255&&(h=h.slice(0,-1),c=parseInt(h,8)),e+=h.length-1;const l=t.charCodeAt(e);if("0"!==h||56===l||57===l){if(r)return o(null);n.strictNumericEscape(a,s,i)}return o(String.fromCharCode(c))}return o(String.fromCharCode(h))}}function Wt(t,e,s,i,r,n,a,o){const h=e;let c;return({n:c,pos:e}=Rt(t,e,s,i,16,r,n,!1,o,!a)),null===c&&(a?o.invalidEscapeSequence(h,s,i):e=h-1),{code:c,pos:e}}function Rt(t,e,s,i,r,n,a,o,h,c){const l=e,p=16===r?Ot.hex:Ot.decBinOct,u=16===r?Zt.hex:10===r?Zt.dec:8===r?Zt.oct:Zt.bin;let d=!1,m=0;for(let l=0,f=null==n?1/0:n;l<f;++l){const n=t.charCodeAt(e);let l;if(95!==n||"bail"===o){if(l=n>=97?n-97+10:n>=65?n-65+10:At(n)?n-48:1/0,l>=r){if(l<=9&&c)return{n:null,pos:e};if(l<=9&&h.invalidDigit(e,s,i,r))l=0;else{if(!a)break;l=0,d=!0}}++e,m=m*r+l}else{const r=t.charCodeAt(e-1),n=t.charCodeAt(e+1);if(o){if(Number.isNaN(n)||!u(n)||p.has(r)||p.has(n)){if(c)return{n:null,pos:e};h.unexpectedNumericSeparator(e,s,i)}}else{if(c)return{n:null,pos:e};h.numericSeparatorInEscapeSequence(e,s,i)}++e}}return e===l||null!=n&&e-l!==n||d?{n:null,pos:e}:{n:m,pos:e}}function Ft(t,e,s,i,r,n){let a;if(123===t.charCodeAt(e)){if(++e,({code:a,pos:e}=Wt(t,e,s,i,t.indexOf("}",e)-e,!0,r,n)),++e,null!==a&&a>1114111){if(!r)return{code:null,pos:e};n.invalidCodePoint(e,s,i)}}else({code:a,pos:e}=Wt(t,e,s,i,4,!1,r,n));return{code:a,pos:e}}const Jt=["at"],Ut=["at"];function zt(t,e,s){return new i(s,t-e,t)}const Bt=new Set([103,109,115,105,121,117,100,118]);class Vt{constructor(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,this.loc=new r(t.startLoc,t.endLoc)}}class Gt extends Ct{constructor(t,e){super(),this.isLookahead=void 0,this.tokens=[],this.errorHandlers_readInt={invalidDigit:(t,e,s,i)=>!!this.options.errorRecovery&&(this.raise(g.InvalidDigit,{at:zt(t,e,s),radix:i}),!0),numericSeparatorInEscapeSequence:this.errorBuilder(g.NumericSeparatorInEscapeSequence),unexpectedNumericSeparator:this.errorBuilder(g.UnexpectedNumericSeparator)},this.errorHandlers_readCodePoint=Object.assign({},this.errorHandlers_readInt,{invalidEscapeSequence:this.errorBuilder(g.InvalidEscapeSequence),invalidCodePoint:this.errorBuilder(g.InvalidCodePoint)}),this.errorHandlers_readStringContents_string=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:(t,e,s)=>{this.recordStrictModeErrors(g.StrictNumericEscape,{at:zt(t,e,s)})},unterminated:(t,e,s)=>{throw this.raise(g.UnterminatedString,{at:zt(t-1,e,s)})}}),this.errorHandlers_readStringContents_template=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:this.errorBuilder(g.StrictNumericEscape),unterminated:(t,e,s)=>{throw this.raise(g.UnterminatedTemplate,{at:zt(t,e,s)})}}),this.state=new Mt,this.state.init(t),this.input=e,this.length=e.length,this.isLookahead=!1}pushToken(t){this.tokens.length=this.state.tokensLength,this.tokens.push(t),++this.state.tokensLength}next(){this.checkKeywordEscapes(),this.options.tokens&&this.pushToken(new Vt(this.state)),this.state.lastTokStart=this.state.start,this.state.lastTokEndLoc=this.state.endLoc,this.state.lastTokStartLoc=this.state.startLoc,this.nextToken()}eat(t){return!!this.match(t)&&(this.next(),!0)}match(t){return this.state.type===t}createLookaheadState(t){return{pos:t.pos,value:null,type:t.type,start:t.start,end:t.end,context:[this.curContext()],inType:t.inType,startLoc:t.startLoc,lastTokEndLoc:t.lastTokEndLoc,curLine:t.curLine,lineStart:t.lineStart,curPosition:t.curPosition}}lookahead(){const t=this.state;this.state=this.createLookaheadState(t),this.isLookahead=!0,this.nextToken(),this.isLookahead=!1;const e=this.state;return this.state=t,e}nextTokenStart(){return this.nextTokenStartSince(this.state.pos)}nextTokenStartSince(t){return Et.lastIndex=t,Et.test(this.input)?Et.lastIndex:t}lookaheadCharCode(){return this.input.charCodeAt(this.nextTokenStart())}nextTokenInLineStart(){return this.nextTokenInLineStartSince(this.state.pos)}nextTokenInLineStartSince(t){return _t.lastIndex=t,_t.test(this.input)?_t.lastIndex:t}lookaheadInLineCharCode(){return this.input.charCodeAt(this.nextTokenInLineStart())}codePointAtPos(t){let e=this.input.charCodeAt(t);if(55296==(64512&e)&&++t<this.input.length){const s=this.input.charCodeAt(t);56320==(64512&s)&&(e=65536+((1023&e)<<10)+(1023&s))}return e}setStrict(t){this.state.strict=t,t&&(this.state.strictErrors.forEach((([t,e])=>this.raise(t,{at:e}))),this.state.strictErrors.clear())}curContext(){return this.state.context[this.state.context.length-1]}nextToken(){this.skipSpace(),this.state.start=this.state.pos,this.isLookahead||(this.state.startLoc=this.state.curPosition()),this.state.pos>=this.length?this.finishToken(139):this.getTokenFromCode(this.codePointAtPos(this.state.pos))}skipBlockComment(t){let e;this.isLookahead||(e=this.state.curPosition());const s=this.state.pos,i=this.input.indexOf(t,s+2);if(-1===i)throw this.raise(g.UnterminatedComment,{at:this.state.curPosition()});for(this.state.pos=i+t.length,St.lastIndex=s+2;St.test(this.input)&&St.lastIndex<=i;)++this.state.curLine,this.state.lineStart=St.lastIndex;if(this.isLookahead)return;const n={type:"CommentBlock",value:this.input.slice(s+2,i),start:s,end:i+t.length,loc:new r(e,this.state.curPosition())};return this.options.tokens&&this.pushToken(n),n}skipLineComment(t){const e=this.state.pos;let s;this.isLookahead||(s=this.state.curPosition());let i=this.input.charCodeAt(this.state.pos+=t);if(this.state.pos<this.length)for(;!Pt(i)&&++this.state.pos<this.length;)i=this.input.charCodeAt(this.state.pos);if(this.isLookahead)return;const n=this.state.pos,a={type:"CommentLine",value:this.input.slice(e+t,n),start:e,end:n,loc:new r(s,this.state.curPosition())};return this.options.tokens&&this.pushToken(a),a}skipSpace(){const t=this.state.pos,e=[];t:for(;this.state.pos<this.length;){const s=this.input.charCodeAt(this.state.pos);switch(s){case 32:case 160:case 9:++this.state.pos;break;case 13:10===this.input.charCodeAt(this.state.pos+1)&&++this.state.pos;case 10:case 8232:case 8233:++this.state.pos,++this.state.curLine,this.state.lineStart=this.state.pos;break;case 47:switch(this.input.charCodeAt(this.state.pos+1)){case 42:{const t=this.skipBlockComment("*/");void 0!==t&&(this.addComment(t),this.options.attachComment&&e.push(t));break}case 47:{const t=this.skipLineComment(2);void 0!==t&&(this.addComment(t),this.options.attachComment&&e.push(t));break}default:break t}break;default:if(kt(s))++this.state.pos;else if(45===s&&!this.inModule&&this.options.annexB){const s=this.state.pos;if(45!==this.input.charCodeAt(s+1)||62!==this.input.charCodeAt(s+2)||!(0===t||this.state.lineStart>t))break t;{const t=this.skipLineComment(3);void 0!==t&&(this.addComment(t),this.options.attachComment&&e.push(t))}}else{if(60!==s||this.inModule||!this.options.annexB)break t;{const t=this.state.pos;if(33!==this.input.charCodeAt(t+1)||45!==this.input.charCodeAt(t+2)||45!==this.input.charCodeAt(t+3))break t;{const t=this.skipLineComment(4);void 0!==t&&(this.addComment(t),this.options.attachComment&&e.push(t))}}}}}if(e.length>0){const s={start:t,end:this.state.pos,comments:e,leadingNode:null,trailingNode:null,containingNode:null};this.state.commentStack.push(s)}}finishToken(t,e){this.state.end=this.state.pos,this.state.endLoc=this.state.curPosition();const s=this.state.type;this.state.type=t,this.state.value=e,this.isLookahead||this.updateContext(s)}replaceToken(t){this.state.type=t,this.updateContext()}readToken_numberSign(){if(0===this.state.pos&&this.readToken_interpreter())return;const t=this.state.pos+1,e=this.codePointAtPos(t);if(e>=48&&e<=57)throw this.raise(g.UnexpectedDigitAfterHash,{at:this.state.curPosition()});if(123===e||91===e&&this.hasPlugin("recordAndTuple")){if(this.expectPlugin("recordAndTuple"),"bar"===this.getPluginOption("recordAndTuple","syntaxType"))throw this.raise(123===e?g.RecordExpressionHashIncorrectStartSyntaxType:g.TupleExpressionHashIncorrectStartSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,123===e?this.finishToken(7):this.finishToken(1)}else at(e)?(++this.state.pos,this.finishToken(138,this.readWord1(e))):92===e?(++this.state.pos,this.finishToken(138,this.readWord1())):this.finishOp(27,1)}readToken_dot(){const t=this.input.charCodeAt(this.state.pos+1);t>=48&&t<=57?this.readNumber(!0):46===t&&46===this.input.charCodeAt(this.state.pos+2)?(this.state.pos+=3,this.finishToken(21)):(++this.state.pos,this.finishToken(16))}readToken_slash(){61===this.input.charCodeAt(this.state.pos+1)?this.finishOp(31,2):this.finishOp(56,1)}readToken_interpreter(){if(0!==this.state.pos||this.length<2)return!1;let t=this.input.charCodeAt(this.state.pos+1);if(33!==t)return!1;const e=this.state.pos;for(this.state.pos+=1;!Pt(t)&&++this.state.pos<this.length;)t=this.input.charCodeAt(this.state.pos);const s=this.input.slice(e+2,this.state.pos);return this.finishToken(28,s),!0}readToken_mult_modulo(t){let e=42===t?55:54,s=1,i=this.input.charCodeAt(this.state.pos+1);42===t&&42===i&&(s++,i=this.input.charCodeAt(this.state.pos+2),e=57),61!==i||this.state.inType||(s++,e=37===t?33:30),this.finishOp(e,s)}readToken_pipe_amp(t){const e=this.input.charCodeAt(this.state.pos+1);if(e!==t){if(124===t){if(62===e)return void this.finishOp(39,2);if(this.hasPlugin("recordAndTuple")&&125===e){if("bar"!==this.getPluginOption("recordAndTuple","syntaxType"))throw this.raise(g.RecordExpressionBarIncorrectEndSyntaxType,{at:this.state.curPosition()});return this.state.pos+=2,void this.finishToken(9)}if(this.hasPlugin("recordAndTuple")&&93===e){if("bar"!==this.getPluginOption("recordAndTuple","syntaxType"))throw this.raise(g.TupleExpressionBarIncorrectEndSyntaxType,{at:this.state.curPosition()});return this.state.pos+=2,void this.finishToken(4)}}61!==e?this.finishOp(124===t?43:45,1):this.finishOp(30,2)}else 61===this.input.charCodeAt(this.state.pos+2)?this.finishOp(30,3):this.finishOp(124===t?41:42,2)}readToken_caret(){const t=this.input.charCodeAt(this.state.pos+1);61!==t||this.state.inType?94===t&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"^^"}])?(this.finishOp(37,2),94===this.input.codePointAt(this.state.pos)&&this.unexpected()):this.finishOp(44,1):this.finishOp(32,2)}readToken_atSign(){64===this.input.charCodeAt(this.state.pos+1)&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"@@"}])?this.finishOp(38,2):this.finishOp(26,1)}readToken_plus_min(t){const e=this.input.charCodeAt(this.state.pos+1);e!==t?61===e?this.finishOp(30,2):this.finishOp(53,1):this.finishOp(34,2)}readToken_lt(){const{pos:t}=this.state,e=this.input.charCodeAt(t+1);if(60===e)return 61===this.input.charCodeAt(t+2)?void this.finishOp(30,3):void this.finishOp(51,2);61!==e?this.finishOp(47,1):this.finishOp(49,2)}readToken_gt(){const{pos:t}=this.state,e=this.input.charCodeAt(t+1);if(62===e){const e=62===this.input.charCodeAt(t+2)?3:2;return 61===this.input.charCodeAt(t+e)?void this.finishOp(30,e+1):void this.finishOp(52,e)}61!==e?this.finishOp(48,1):this.finishOp(49,2)}readToken_eq_excl(t){const e=this.input.charCodeAt(this.state.pos+1);if(61!==e)return 61===t&&62===e?(this.state.pos+=2,void this.finishToken(19)):void this.finishOp(61===t?29:35,1);this.finishOp(46,61===this.input.charCodeAt(this.state.pos+2)?3:2)}readToken_question(){const t=this.input.charCodeAt(this.state.pos+1),e=this.input.charCodeAt(this.state.pos+2);63===t?61===e?this.finishOp(30,3):this.finishOp(40,2):46!==t||e>=48&&e<=57?(++this.state.pos,this.finishToken(17)):(this.state.pos+=2,this.finishToken(18))}getTokenFromCode(t){switch(t){case 46:return void this.readToken_dot();case 40:return++this.state.pos,void this.finishToken(10);case 41:return++this.state.pos,void this.finishToken(11);case 59:return++this.state.pos,void this.finishToken(13);case 44:return++this.state.pos,void this.finishToken(12);case 91:if(this.hasPlugin("recordAndTuple")&&124===this.input.charCodeAt(this.state.pos+1)){if("bar"!==this.getPluginOption("recordAndTuple","syntaxType"))throw this.raise(g.TupleExpressionBarIncorrectStartSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,this.finishToken(2)}else++this.state.pos,this.finishToken(0);return;case 93:return++this.state.pos,void this.finishToken(3);case 123:if(this.hasPlugin("recordAndTuple")&&124===this.input.charCodeAt(this.state.pos+1)){if("bar"!==this.getPluginOption("recordAndTuple","syntaxType"))throw this.raise(g.RecordExpressionBarIncorrectStartSyntaxType,{at:this.state.curPosition()});this.state.pos+=2,this.finishToken(6)}else++this.state.pos,this.finishToken(5);return;case 125:return++this.state.pos,void this.finishToken(8);case 58:return void(this.hasPlugin("functionBind")&&58===this.input.charCodeAt(this.state.pos+1)?this.finishOp(15,2):(++this.state.pos,this.finishToken(14)));case 63:return void this.readToken_question();case 96:return void this.readTemplateToken();case 48:{const t=this.input.charCodeAt(this.state.pos+1);if(120===t||88===t)return void this.readRadixNumber(16);if(111===t||79===t)return void this.readRadixNumber(8);if(98===t||66===t)return void this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return void this.readNumber(!1);case 34:case 39:return void this.readString(t);case 47:return void this.readToken_slash();case 37:case 42:return void this.readToken_mult_modulo(t);case 124:case 38:return void this.readToken_pipe_amp(t);case 94:return void this.readToken_caret();case 43:case 45:return void this.readToken_plus_min(t);case 60:return void this.readToken_lt();case 62:return void this.readToken_gt();case 61:case 33:return void this.readToken_eq_excl(t);case 126:return void this.finishOp(36,1);case 64:return void this.readToken_atSign();case 35:return void this.readToken_numberSign();case 92:return void this.readWord();default:if(at(t))return void this.readWord(t)}throw this.raise(g.InvalidOrUnexpectedToken,{at:this.state.curPosition(),unexpected:String.fromCodePoint(t)})}finishOp(t,e){const s=this.input.slice(this.state.pos,this.state.pos+e);this.state.pos+=e,this.finishToken(t,s)}readRegexp(){const t=this.state.startLoc,e=this.state.start+1;let s,i,{pos:r}=this.state;for(;;++r){if(r>=this.length)throw this.raise(g.UnterminatedRegExp,{at:n(t,1)});const e=this.input.charCodeAt(r);if(Pt(e))throw this.raise(g.UnterminatedRegExp,{at:n(t,1)});if(s)s=!1;else{if(91===e)i=!0;else if(93===e&&i)i=!1;else if(47===e&&!i)break;s=92===e}}const a=this.input.slice(e,r);++r;let o="";const h=()=>n(t,r+2-e);for(;r<this.length;){const t=this.codePointAtPos(r),e=String.fromCharCode(t);if(Bt.has(t))118===t?o.includes("u")&&this.raise(g.IncompatibleRegExpUVFlags,{at:h()}):117===t&&o.includes("v")&&this.raise(g.IncompatibleRegExpUVFlags,{at:h()}),o.includes(e)&&this.raise(g.DuplicateRegExpFlags,{at:h()});else{if(!ot(t)&&92!==t)break;this.raise(g.MalformedRegExpFlags,{at:h()})}++r,o+=e}this.state.pos=r,this.finishToken(137,{pattern:a,flags:o})}readInt(t,e,s=!1,i=!0){const{n:r,pos:n}=Rt(this.input,this.state.pos,this.state.lineStart,this.state.curLine,t,e,s,i,this.errorHandlers_readInt,!1);return this.state.pos=n,r}readRadixNumber(t){const e=this.state.curPosition();let s=!1;this.state.pos+=2;const i=this.readInt(t);null==i&&this.raise(g.InvalidDigit,{at:n(e,2),radix:t});const r=this.input.charCodeAt(this.state.pos);if(110===r)++this.state.pos,s=!0;else if(109===r)throw this.raise(g.InvalidDecimal,{at:e});if(at(this.codePointAtPos(this.state.pos)))throw this.raise(g.NumberIdentifier,{at:this.state.curPosition()});if(s){const t=this.input.slice(e.index,this.state.pos).replace(/[_n]/g,"");this.finishToken(135,t)}else this.finishToken(134,i)}readNumber(t){const e=this.state.pos,s=this.state.curPosition();let i=!1,r=!1,a=!1,o=!1,h=!1;t||null!==this.readInt(10)||this.raise(g.InvalidNumber,{at:this.state.curPosition()});const c=this.state.pos-e>=2&&48===this.input.charCodeAt(e);if(c){const t=this.input.slice(e,this.state.pos);if(this.recordStrictModeErrors(g.StrictOctalLiteral,{at:s}),!this.state.strict){const e=t.indexOf("_");e>0&&this.raise(g.ZeroDigitNumericSeparator,{at:n(s,e)})}h=c&&!/[89]/.test(t)}let l=this.input.charCodeAt(this.state.pos);if(46!==l||h||(++this.state.pos,this.readInt(10),i=!0,l=this.input.charCodeAt(this.state.pos)),69!==l&&101!==l||h||(l=this.input.charCodeAt(++this.state.pos),43!==l&&45!==l||++this.state.pos,null===this.readInt(10)&&this.raise(g.InvalidOrMissingExponent,{at:s}),i=!0,o=!0,l=this.input.charCodeAt(this.state.pos)),110===l&&((i||c)&&this.raise(g.InvalidBigIntLiteral,{at:s}),++this.state.pos,r=!0),109===l&&(this.expectPlugin("decimal",this.state.curPosition()),(o||c)&&this.raise(g.InvalidDecimal,{at:s}),++this.state.pos,a=!0),at(this.codePointAtPos(this.state.pos)))throw this.raise(g.NumberIdentifier,{at:this.state.curPosition()});const p=this.input.slice(e,this.state.pos).replace(/[_mn]/g,"");if(r)return void this.finishToken(135,p);if(a)return void this.finishToken(136,p);const u=h?parseInt(p,8):parseFloat(p);this.finishToken(134,u)}readCodePoint(t){const{code:e,pos:s}=Ft(this.input,this.state.pos,this.state.lineStart,this.state.curLine,t,this.errorHandlers_readCodePoint);return this.state.pos=s,e}readString(t){const{str:e,pos:s,curLine:i,lineStart:r}=jt(34===t?"double":"single",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_string);this.state.pos=s+1,this.state.lineStart=r,this.state.curLine=i,this.finishToken(133,e)}readTemplateContinuation(){this.match(8)||this.unexpected(null,8),this.state.pos--,this.readTemplateToken()}readTemplateToken(){const t=this.input[this.state.pos],{str:e,firstInvalidLoc:s,pos:r,curLine:n,lineStart:a}=jt("template",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_template);this.state.pos=r+1,this.state.lineStart=a,this.state.curLine=n,s&&(this.state.firstInvalidTemplateEscapePos=new i(s.curLine,s.pos-s.lineStart,s.pos)),96===this.input.codePointAt(r)?this.finishToken(24,s?null:t+e+"`"):(this.state.pos++,this.finishToken(25,s?null:t+e+"${"))}recordStrictModeErrors(t,{at:e}){const s=e.index;this.state.strict&&!this.state.strictErrors.has(s)?this.raise(t,{at:e}):this.state.strictErrors.set(s,[t,e])}readWord1(t){this.state.containsEsc=!1;let e="";const s=this.state.pos;let i=this.state.pos;for(void 0!==t&&(this.state.pos+=t<=65535?1:2);this.state.pos<this.length;){const t=this.codePointAtPos(this.state.pos);if(ot(t))this.state.pos+=t<=65535?1:2;else{if(92!==t)break;{this.state.containsEsc=!0,e+=this.input.slice(i,this.state.pos);const t=this.state.curPosition(),r=this.state.pos===s?at:ot;if(117!==this.input.charCodeAt(++this.state.pos)){this.raise(g.MissingUnicodeEscape,{at:this.state.curPosition()}),i=this.state.pos-1;continue}++this.state.pos;const n=this.readCodePoint(!0);null!==n&&(r(n)||this.raise(g.EscapedCharNotAnIdentifier,{at:t}),e+=String.fromCodePoint(n)),i=this.state.pos}}}return e+this.input.slice(i,this.state.pos)}readWord(t){const e=this.readWord1(t),s=L.get(e);void 0!==s?this.finishToken(s,X(s)):this.finishToken(132,e)}checkKeywordEscapes(){const{type:t}=this.state;H(t)&&this.state.containsEsc&&this.raise(g.InvalidEscapedReservedWord,{at:this.state.startLoc,reservedWord:X(t)})}raise(t,e){const{at:r}=e,n=s(e,Jt),a=t({loc:r instanceof i?r:r.loc.start,details:n});if(!this.options.errorRecovery)throw a;return this.isLookahead||this.state.errors.push(a),a}raiseOverwrite(t,e){const{at:r}=e,n=s(e,Ut),a=r instanceof i?r:r.loc.start,o=a.index,h=this.state.errors;for(let e=h.length-1;e>=0;e--){const s=h[e];if(s.loc.index===o)return h[e]=t({loc:a,details:n});if(s.loc.index<o)break}return this.raise(t,e)}updateContext(t){}unexpected(t,e){throw this.raise(g.UnexpectedToken,{expected:e?X(e):null,at:null!=t?t:this.state.startLoc})}expectPlugin(t,e){if(this.hasPlugin(t))return!0;throw this.raise(g.MissingPlugin,{at:null!=e?e:this.state.startLoc,missingPlugin:[t]})}expectOnePlugin(t){if(!t.some((t=>this.hasPlugin(t))))throw this.raise(g.MissingOneOfPlugins,{at:this.state.startLoc,missingPlugin:t})}errorBuilder(t){return(e,s,i)=>{this.raise(t,{at:zt(e,s,i)})}}}class Ht{constructor(){this.privateNames=new Set,this.loneAccessors=new Map,this.undefinedPrivateNames=new Map}}class Xt{constructor(t){this.parser=void 0,this.stack=[],this.undefinedPrivateNames=new Map,this.parser=t}current(){return this.stack[this.stack.length-1]}enter(){this.stack.push(new Ht)}exit(){const t=this.stack.pop(),e=this.current();for(const[s,i]of Array.from(t.undefinedPrivateNames))e?e.undefinedPrivateNames.has(s)||e.undefinedPrivateNames.set(s,i):this.parser.raise(g.InvalidPrivateFieldResolution,{at:i,identifierName:s})}declarePrivateName(t,e,s){const{privateNames:i,loneAccessors:r,undefinedPrivateNames:n}=this.current();let a=i.has(t);if(3&e){const s=a&&r.get(t);s?(a=(3&s)==(3&e)||(4&s)!=(4&e),a||r.delete(t)):a||r.set(t,e)}a&&this.parser.raise(g.PrivateNameRedeclaration,{at:s,identifierName:t}),i.add(t),n.delete(t)}usePrivateName(t,e){let s;for(s of this.stack)if(s.privateNames.has(t))return;s?s.undefinedPrivateNames.set(t,e):this.parser.raise(g.InvalidPrivateFieldResolution,{at:e,identifierName:t})}}class Qt{constructor(t=0){this.type=t}canBeArrowParameterDeclaration(){return 2===this.type||1===this.type}isCertainlyParameterDeclaration(){return 3===this.type}}class qt extends Qt{constructor(t){super(t),this.declarationErrors=new Map}recordDeclarationError(t,{at:e}){const s=e.index;this.declarationErrors.set(s,[t,e])}clearDeclarationError(t){this.declarationErrors.delete(t)}iterateErrors(t){this.declarationErrors.forEach(t)}}class $t{constructor(t){this.parser=void 0,this.stack=[new Qt],this.parser=t}enter(t){this.stack.push(t)}exit(){this.stack.pop()}recordParameterInitializerError(t,{at:e}){const s={at:e.loc.start},{stack:i}=this;let r=i.length-1,n=i[r];for(;!n.isCertainlyParameterDeclaration();){if(!n.canBeArrowParameterDeclaration())return;n.recordDeclarationError(t,s),n=i[--r]}this.parser.raise(t,s)}recordArrowParameterBindingError(t,{at:e}){const{stack:s}=this,i=s[s.length-1],r={at:e.loc.start};if(i.isCertainlyParameterDeclaration())this.parser.raise(t,r);else{if(!i.canBeArrowParameterDeclaration())return;i.recordDeclarationError(t,r)}}recordAsyncArrowParametersError({at:t}){const{stack:e}=this;let s=e.length-1,i=e[s];for(;i.canBeArrowParameterDeclaration();)2===i.type&&i.recordDeclarationError(g.AwaitBindingIdentifier,{at:t}),i=e[--s]}validateAsPattern(){const{stack:t}=this,e=t[t.length-1];e.canBeArrowParameterDeclaration()&&e.iterateErrors((([e,s])=>{this.parser.raise(e,{at:s});let i=t.length-2,r=t[i];for(;r.canBeArrowParameterDeclaration();)r.clearDeclarationError(s.index),r=t[--i]}))}}function Kt(){return new Qt}class te{constructor(){this.stacks=[]}enter(t){this.stacks.push(t)}exit(){this.stacks.pop()}currentFlags(){return this.stacks[this.stacks.length-1]}get hasAwait(){return(2&this.currentFlags())>0}get hasYield(){return(1&this.currentFlags())>0}get hasReturn(){return(4&this.currentFlags())>0}get hasIn(){return(8&this.currentFlags())>0}}function ee(t,e){return(t?2:0)|(e?1:0)}class se extends Gt{addExtra(t,e,s,i=!0){if(!t)return;const r=t.extra=t.extra||{};i?r[e]=s:Object.defineProperty(r,e,{enumerable:i,value:s})}isContextual(t){return this.state.type===t&&!this.state.containsEsc}isUnparsedContextual(t,e){const s=t+e.length;if(this.input.slice(t,s)===e){const t=this.input.charCodeAt(s);return!(ot(t)||55296==(64512&t))}return!1}isLookaheadContextual(t){const e=this.nextTokenStart();return this.isUnparsedContextual(e,t)}eatContextual(t){return!!this.isContextual(t)&&(this.next(),!0)}expectContextual(t,e){if(!this.eatContextual(t)){if(null!=e)throw this.raise(e,{at:this.state.startLoc});this.unexpected(null,t)}}canInsertSemicolon(){return this.match(139)||this.match(8)||this.hasPrecedingLineBreak()}hasPrecedingLineBreak(){return vt.test(this.input.slice(this.state.lastTokEndLoc.index,this.state.start))}hasFollowingLineBreak(){return Lt.lastIndex=this.state.end,Lt.test(this.input)}isLineTerminator(){return this.eat(13)||this.canInsertSemicolon()}semicolon(t=!0){(t?this.isLineTerminator():this.eat(13))||this.raise(g.MissingSemicolon,{at:this.state.lastTokEndLoc})}expect(t,e){this.eat(t)||this.unexpected(e,t)}tryParse(t,e=this.state.clone()){const s={node:null};try{const i=t(((t=null)=>{throw s.node=t,s}));if(this.state.errors.length>e.errors.length){const t=this.state;return this.state=e,this.state.tokensLength=t.tokensLength,{node:i,error:t.errors[e.errors.length],thrown:!1,aborted:!1,failState:t}}return{node:i,error:null,thrown:!1,aborted:!1,failState:null}}catch(t){const i=this.state;if(this.state=e,t instanceof SyntaxError)return{node:null,error:t,thrown:!0,aborted:!1,failState:i};if(t===s)return{node:s.node,error:null,thrown:!1,aborted:!0,failState:i};throw t}}checkExpressionErrors(t,e){if(!t)return!1;const{shorthandAssignLoc:s,doubleProtoLoc:i,privateKeyLoc:r,optionalParametersLoc:n}=t;if(!e)return!!(s||i||n||r);null!=s&&this.raise(g.InvalidCoverInitializedName,{at:s}),null!=i&&this.raise(g.DuplicateProto,{at:i}),null!=r&&this.raise(g.UnexpectedPrivateField,{at:r}),null!=n&&this.unexpected(n)}isLiteralPropertyName(){return B(this.state.type)}isPrivateName(t){return"PrivateName"===t.type}getPrivateNameSV(t){return t.id.name}hasPropertyAsPrivateName(t){return("MemberExpression"===t.type||"OptionalMemberExpression"===t.type)&&this.isPrivateName(t.property)}isObjectProperty(t){return"ObjectProperty"===t.type}isObjectMethod(t){return"ObjectMethod"===t.type}initializeScopes(t="module"===this.options.sourceType){const e=this.state.labels;this.state.labels=[];const s=this.exportedIdentifiers;this.exportedIdentifiers=new Set;const i=this.inModule;this.inModule=t;const r=this.scope,n=this.getScopeHandler();this.scope=new n(this,t);const a=this.prodParam;this.prodParam=new te;const o=this.classScope;this.classScope=new Xt(this);const h=this.expressionScope;return this.expressionScope=new $t(this),()=>{this.state.labels=e,this.exportedIdentifiers=s,this.inModule=i,this.scope=r,this.prodParam=a,this.classScope=o,this.expressionScope=h}}enterInitialScopes(){let t=0;this.inModule&&(t|=2),this.scope.enter(1),this.prodParam.enter(t)}checkDestructuringPrivate(t){const{privateKeyLoc:e}=t;null!==e&&this.expectPlugin("destructuringPrivate",e)}}class ie{constructor(){this.shorthandAssignLoc=null,this.doubleProtoLoc=null,this.privateKeyLoc=null,this.optionalParametersLoc=null}}class re{constructor(t,e,s){this.type="",this.start=e,this.end=0,this.loc=new r(s),null!=t&&t.options.ranges&&(this.range=[e,0]),null!=t&&t.filename&&(this.loc.filename=t.filename)}}const ne=re.prototype;function ae(t){const{type:e,start:s,end:i,loc:r,range:n,extra:a,name:o}=t,h=Object.create(ne);return h.type=e,h.start=s,h.end=i,h.loc=r,h.range=n,h.extra=a,h.name=o,"Placeholder"===e&&(h.expectedNode=t.expectedNode),h}ne.__clone=function(){const t=new re(void 0,this.start,this.loc.start),e=Object.keys(this);for(let s=0,i=e.length;s<i;s++){const i=e[s];"leadingComments"!==i&&"trailingComments"!==i&&"innerComments"!==i&&(t[i]=this[i])}return t};class oe extends se{startNode(){return new re(this,this.state.start,this.state.startLoc)}startNodeAt(t){return new re(this,t.index,t)}startNodeAtNode(t){return this.startNodeAt(t.loc.start)}finishNode(t,e){return this.finishNodeAt(t,e,this.state.lastTokEndLoc)}finishNodeAt(t,e,s){return t.type=e,t.end=s.index,t.loc.end=s,this.options.ranges&&(t.range[1]=s.index),this.options.attachComment&&this.processComment(t),t}resetStartLocation(t,e){t.start=e.index,t.loc.start=e,this.options.ranges&&(t.range[0]=e.index)}resetEndLocation(t,e=this.state.lastTokEndLoc){t.end=e.index,t.loc.end=e,this.options.ranges&&(t.range[1]=e.index)}resetStartLocationFromNode(t,e){this.resetStartLocation(t,e.loc.start)}}const he=new Set(["_","any","bool","boolean","empty","extends","false","interface","mixed","null","number","static","string","true","typeof","void"]),ce=I`flow`({AmbiguousConditionalArrow:"Ambiguous expression: wrap the arrow functions in parentheses to disambiguate.",AmbiguousDeclareModuleKind:"Found both `declare module.exports` and `declare export` in the same module. Modules can only have 1 since they are either an ES module or they are a CommonJS module.",AssignReservedType:({reservedType:t})=>`Cannot overwrite reserved type ${t}.`,DeclareClassElement:"The `declare` modifier can only appear on class fields.",DeclareClassFieldInitializer:"Initializers are not allowed in fields with the `declare` modifier.",DuplicateDeclareModuleExports:"Duplicate `declare module.exports` statement.",EnumBooleanMemberNotInitialized:({memberName:t,enumName:e})=>`Boolean enum members need to be initialized. Use either \`${t} = true,\` or \`${t} = false,\` in enum \`${e}\`.`,EnumDuplicateMemberName:({memberName:t,enumName:e})=>`Enum member names need to be unique, but the name \`${t}\` has already been used before in enum \`${e}\`.`,EnumInconsistentMemberValues:({enumName:t})=>`Enum \`${t}\` has inconsistent member initializers. Either use no initializers, or consistently use literals (either booleans, numbers, or strings) for all member initializers.`,EnumInvalidExplicitType:({invalidEnumType:t,enumName:e})=>`Enum type \`${t}\` is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${e}\`.`,EnumInvalidExplicitTypeUnknownSupplied:({enumName:t})=>`Supplied enum type is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${t}\`.`,EnumInvalidMemberInitializerPrimaryType:({enumName:t,memberName:e,explicitType:s})=>`Enum \`${t}\` has type \`${s}\`, so the initializer of \`${e}\` needs to be a ${s} literal.`,EnumInvalidMemberInitializerSymbolType:({enumName:t,memberName:e})=>`Symbol enum members cannot be initialized. Use \`${e},\` in enum \`${t}\`.`,EnumInvalidMemberInitializerUnknownType:({enumName:t,memberName:e})=>`The enum member initializer for \`${e}\` needs to be a literal (either a boolean, number, or string) in enum \`${t}\`.`,EnumInvalidMemberName:({enumName:t,memberName:e,suggestion:s})=>`Enum member names cannot start with lowercase 'a' through 'z'. Instead of using \`${e}\`, consider using \`${s}\`, in enum \`${t}\`.`,EnumNumberMemberNotInitialized:({enumName:t,memberName:e})=>`Number enum members need to be initialized, e.g. \`${e} = 1\` in enum \`${t}\`.`,EnumStringMemberInconsistentlyInitialized:({enumName:t})=>`String enum members need to consistently either all use initializers, or use no initializers, in enum \`${t}\`.`,GetterMayNotHaveThisParam:"A getter cannot have a `this` parameter.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` or `typeof` keyword.",ImportTypeShorthandOnlyInPureImport:"The `type` and `typeof` keywords on named imports can only be used on regular `import` statements. It cannot be used with `import type` or `import typeof` statements.",InexactInsideExact:"Explicit inexact syntax cannot appear inside an explicit exact object type.",InexactInsideNonObject:"Explicit inexact syntax cannot appear in class or interface definitions.",InexactVariance:"Explicit inexact syntax cannot have variance.",InvalidNonTypeImportInDeclareModule:"Imports within a `declare module` body must always be `import type` or `import typeof`.",MissingTypeParamDefault:"Type parameter declaration needs a default, since a preceding type parameter declaration has a default.",NestedDeclareModule:"`declare module` cannot be used inside another `declare module`.",NestedFlowComment:"Cannot have a flow comment inside another flow comment.",PatternIsOptional:Object.assign({message:"A binding pattern parameter cannot be optional in an implementation signature."},{reasonCode:"OptionalBindingPattern"}),SetterMayNotHaveThisParam:"A setter cannot have a `this` parameter.",SpreadVariance:"Spread properties cannot have variance.",ThisParamAnnotationRequired:"A type annotation is required for the `this` parameter.",ThisParamBannedInConstructor:"Constructors cannot have a `this` parameter; constructors don't bind `this` like other functions.",ThisParamMayNotBeOptional:"The `this` parameter cannot be optional.",ThisParamMustBeFirst:"The `this` parameter must be the first function parameter.",ThisParamNoDefault:"The `this` parameter may not have a default value.",TypeBeforeInitializer:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeCastInPattern:"The type cast expression is expected to be wrapped with parenthesis.",UnexpectedExplicitInexactInObject:"Explicit inexact syntax must appear at the end of an inexact object.",UnexpectedReservedType:({reservedType:t})=>`Unexpected reserved type ${t}.`,UnexpectedReservedUnderscore:"`_` is only allowed as a type argument to call or new.",UnexpectedSpaceBetweenModuloChecks:"Spaces between `%` and `checks` are not allowed here.",UnexpectedSpreadType:"Spread operator cannot appear in class or interface definitions.",UnexpectedSubtractionOperand:'Unexpected token, expected "number" or "bigint".',UnexpectedTokenAfterTypeParameter:"Expected an arrow function after this type parameter declaration.",UnexpectedTypeParameterBeforeAsyncArrowFunction:"Type parameters must come after the async keyword, e.g. instead of `<T> async () => {}`, use `async <T>() => {}`.",UnsupportedDeclareExportKind:({unsupportedExportKind:t,suggestion:e})=>`\`declare export ${t}\` is not supported. Use \`${e}\` instead.`,UnsupportedStatementInDeclareModule:"Only declares and type imports are allowed inside declare module.",UnterminatedFlowComment:"Unterminated flow-comment."});function le(t){return"type"===t.importKind||"typeof"===t.importKind}const pe={const:"declare export var",let:"declare export var",type:"export type",interface:"export interface"},ue=/\*?\s*@((?:no)?flow)\b/,de={__proto__:null,quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},me=I`jsx`({AttributeIsEmpty:"JSX attributes must only be assigned a non-empty expression.",MissingClosingTagElement:({openingTagName:t})=>`Expected corresponding JSX closing tag for <${t}>.`,MissingClosingTagFragment:"Expected corresponding JSX closing tag for <>.",UnexpectedSequenceExpression:"Sequence expressions cannot be directly nested inside JSX. Did you mean to wrap it in parentheses (...)?",UnexpectedToken:({unexpected:t,HTMLEntity:e})=>`Unexpected token \`${t}\`. Did you mean \`${e}\` or \`{'${t}'}\`?`,UnsupportedJsxValue:"JSX value should be either an expression or a quoted JSX text.",UnterminatedJsxContent:"Unterminated JSX contents.",UnwrappedAdjacentJSXElements:"Adjacent JSX elements must be wrapped in an enclosing tag. Did you want a JSX fragment <>...</>?"});function fe(t){return!!t&&("JSXOpeningFragment"===t.type||"JSXClosingFragment"===t.type)}function ye(t){if("JSXIdentifier"===t.type)return t.name;if("JSXNamespacedName"===t.type)return t.namespace.name+":"+t.name.name;if("JSXMemberExpression"===t.type)return ye(t.object)+"."+ye(t.property);throw new Error("Node had unexpected type: "+t.type)}class Ie extends yt{constructor(...t){super(...t),this.types=new Set,this.enums=new Set,this.constEnums=new Set,this.classes=new Set,this.exportOnlyBindings=new Set}}class ge extends It{constructor(...t){super(...t),this.importsStack=[]}createScope(t){return this.importsStack.push(new Set),new Ie(t)}enter(t){256==t&&this.importsStack.push(new Set),super.enter(t)}exit(){const t=super.exit();return 256==t&&this.importsStack.pop(),t}hasImport(t,e){const s=this.importsStack.length;if(this.importsStack[s-1].has(t))return!0;if(!e&&s>1)for(let e=0;e<s-1;e++)if(this.importsStack[e].has(t))return!0;return!1}declareName(t,e,s){if(4096&e)return this.hasImport(t,!0)&&this.parser.raise(g.VarRedeclaration,{at:s,identifierName:t}),void this.importsStack[this.importsStack.length-1].add(t);const i=this.currentScope();if(1024&e)return this.maybeExportDefined(i,t),void i.exportOnlyBindings.add(t);super.declareName(t,e,s),2&e&&(1&e||(this.checkRedeclarationInScope(i,t,e,s),this.maybeExportDefined(i,t)),i.types.add(t)),256&e&&i.enums.add(t),512&e&&i.constEnums.add(t),128&e&&i.classes.add(t)}isRedeclaredInScope(t,e,s){return t.enums.has(e)?!(256&s)||!!(512&s)!==t.constEnums.has(e):128&s&&t.classes.has(e)?!!t.lexical.has(e)&&!!(1&s):!!(2&s&&t.types.has(e))||super.isRedeclaredInScope(t,e,s)}checkLocalExport(t){const{name:e}=t;if(!this.hasImport(e)){for(let t=this.scopeStack.length-1;t>=0;t--){const s=this.scopeStack[t];if(s.types.has(e)||s.exportOnlyBindings.has(e))return}super.checkLocalExport(t)}}}const be=t=>"ParenthesizedExpression"===t.type?be(t.expression):t;class xe extends oe{toAssignable(t,e=!1){var s,i;let r;switch(("ParenthesizedExpression"===t.type||null!=(s=t.extra)&&s.parenthesized)&&(r=be(t),e?"Identifier"===r.type?this.expressionScope.recordArrowParameterBindingError(g.InvalidParenthesizedAssignment,{at:t}):"MemberExpression"===r.type||this.isOptionalMemberExpression(r)||this.raise(g.InvalidParenthesizedAssignment,{at:t}):this.raise(g.InvalidParenthesizedAssignment,{at:t})),t.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern";for(let s=0,i=t.properties.length,r=i-1;s<i;s++){var n;const i=t.properties[s],a=s===r;this.toAssignableObjectExpressionProp(i,a,e),a&&"RestElement"===i.type&&null!=(n=t.extra)&&n.trailingCommaLoc&&this.raise(g.RestTrailingComma,{at:t.extra.trailingCommaLoc})}break;case"ObjectProperty":{const{key:s,value:i}=t;this.isPrivateName(s)&&this.classScope.usePrivateName(this.getPrivateNameSV(s),s.loc.start),this.toAssignable(i,e);break}case"SpreadElement":throw new Error("Internal @babel/parser error (this is a bug, please report it). SpreadElement should be converted by .toAssignable's caller.");case"ArrayExpression":t.type="ArrayPattern",this.toAssignableList(t.elements,null==(i=t.extra)?void 0:i.trailingCommaLoc,e);break;case"AssignmentExpression":"="!==t.operator&&this.raise(g.MissingEqInAssignment,{at:t.left.loc.end}),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(r,e)}}toAssignableObjectExpressionProp(t,e,s){if("ObjectMethod"===t.type)this.raise("get"===t.kind||"set"===t.kind?g.PatternHasAccessor:g.PatternHasMethod,{at:t.key});else if("SpreadElement"===t.type){t.type="RestElement";const i=t.argument;this.checkToRestConversion(i,!1),this.toAssignable(i,s),e||this.raise(g.RestTrailingComma,{at:t})}else this.toAssignable(t,s)}toAssignableList(t,e,s){const i=t.length-1;for(let r=0;r<=i;r++){const n=t[r];if(n){if("SpreadElement"===n.type){n.type="RestElement";const t=n.argument;this.checkToRestConversion(t,!0),this.toAssignable(t,s)}else this.toAssignable(n,s);"RestElement"===n.type&&(r<i?this.raise(g.RestTrailingComma,{at:n}):e&&this.raise(g.RestTrailingComma,{at:e}))}}}isAssignable(t,e){switch(t.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":return!0;case"ObjectExpression":{const e=t.properties.length-1;return t.properties.every(((t,s)=>"ObjectMethod"!==t.type&&(s===e||"SpreadElement"!==t.type)&&this.isAssignable(t)))}case"ObjectProperty":return this.isAssignable(t.value);case"SpreadElement":return this.isAssignable(t.argument);case"ArrayExpression":return t.elements.every((t=>null===t||this.isAssignable(t)));case"AssignmentExpression":return"="===t.operator;case"ParenthesizedExpression":return this.isAssignable(t.expression);case"MemberExpression":case"OptionalMemberExpression":return!e;default:return!1}}toReferencedList(t,e){return t}toReferencedListDeep(t,e){this.toReferencedList(t,e);for(const e of t)"ArrayExpression"===(null==e?void 0:e.type)&&this.toReferencedListDeep(e.elements)}parseSpread(t){const e=this.startNode();return this.next(),e.argument=this.parseMaybeAssignAllowIn(t,void 0),this.finishNode(e,"SpreadElement")}parseRestBinding(){const t=this.startNode();return this.next(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")}parseBindingAtom(){switch(this.state.type){case 0:{const t=this.startNode();return this.next(),t.elements=this.parseBindingList(3,93,1),this.finishNode(t,"ArrayPattern")}case 5:return this.parseObjectLike(8,!0)}return this.parseIdentifier()}parseBindingList(t,e,s){const i=1&s,r=[];let n=!0;for(;!this.eat(t);)if(n?n=!1:this.expect(12),i&&this.match(12))r.push(null);else{if(this.eat(t))break;if(this.match(21)){if(r.push(this.parseAssignableListItemTypes(this.parseRestBinding(),s)),!this.checkCommaAfterRest(e)){this.expect(t);break}}else{const t=[];for(this.match(26)&&this.hasPlugin("decorators")&&this.raise(g.UnsupportedParameterDecorator,{at:this.state.startLoc});this.match(26);)t.push(this.parseDecorator());r.push(this.parseAssignableListItem(s,t))}}return r}parseBindingRestProperty(t){return this.next(),t.argument=this.parseIdentifier(),this.checkCommaAfterRest(125),this.finishNode(t,"RestElement")}parseBindingProperty(){const t=this.startNode(),{type:e,startLoc:s}=this.state;return 21===e?this.parseBindingRestProperty(t):(138===e?(this.expectPlugin("destructuringPrivate",s),this.classScope.usePrivateName(this.state.value,s),t.key=this.parsePrivateName()):this.parsePropertyName(t),t.method=!1,this.parseObjPropValue(t,s,!1,!1,!0,!1))}parseAssignableListItem(t,e){const s=this.parseMaybeDefault();this.parseAssignableListItemTypes(s,t);const i=this.parseMaybeDefault(s.loc.start,s);return e.length&&(s.decorators=e),i}parseAssignableListItemTypes(t,e){return t}parseMaybeDefault(t,e){var s;if(null!=t||(t=this.state.startLoc),e=null!=(s=e)?s:this.parseBindingAtom(),!this.eat(29))return e;const i=this.startNodeAt(t);return i.left=e,i.right=this.parseMaybeAssignAllowIn(),this.finishNode(i,"AssignmentPattern")}isValidLVal(t,e,s){return i={AssignmentPattern:"left",RestElement:"argument",ObjectProperty:"value",ParenthesizedExpression:"expression",ArrayPattern:"elements",ObjectPattern:"properties"},r=t,Object.hasOwnProperty.call(i,r)&&i[r];var i,r}isOptionalMemberExpression(t){return"OptionalMemberExpression"===t.type}checkLVal(t,{in:e,binding:s=64,checkClashes:i=!1,strictModeChanged:r=!1,hasParenthesizedAncestor:n=!1}){var a;const o=t.type;if(this.isObjectMethod(t))return;const h=this.isOptionalMemberExpression(t);if(h||"MemberExpression"===o)return h&&(this.expectPlugin("optionalChainingAssign",t.loc.start),"AssignmentExpression"!==e.type&&this.raise(g.InvalidLhsOptionalChaining,{at:t,ancestor:e})),void(64!==s&&this.raise(g.InvalidPropertyBindingPattern,{at:t}));if("Identifier"===o){this.checkIdentifier(t,s,r);const{name:e}=t;return void(i&&(i.has(e)?this.raise(g.ParamDupe,{at:t}):i.add(e)))}const c=this.isValidLVal(o,!(n||null!=(a=t.extra)&&a.parenthesized)&&"AssignmentExpression"===e.type,s);if(!0===c)return;if(!1===c){const i=64===s?g.InvalidLhs:g.InvalidLhsBinding;return void this.raise(i,{at:t,ancestor:e})}const[l,p]=Array.isArray(c)?c:[c,"ParenthesizedExpression"===o],u="ArrayPattern"===o||"ObjectPattern"===o?{type:o}:e;for(const e of[].concat(t[l]))e&&this.checkLVal(e,{in:u,binding:s,checkClashes:i,strictModeChanged:r,hasParenthesizedAncestor:p})}checkIdentifier(t,e,s=!1){this.state.strict&&(s?mt(t.name,this.inModule):dt(t.name))&&(64===e?this.raise(g.StrictEvalArguments,{at:t,referenceName:t.name}):this.raise(g.StrictEvalArgumentsBinding,{at:t,bindingName:t.name})),8192&e&&"let"===t.name&&this.raise(g.LetInLexicalBinding,{at:t}),64&e||this.declareNameFromIdentifier(t,e)}declareNameFromIdentifier(t,e){this.scope.declareName(t.name,e,t.loc.start)}checkToRestConversion(t,e){switch(t.type){case"ParenthesizedExpression":this.checkToRestConversion(t.expression,e);break;case"Identifier":case"MemberExpression":break;case"ArrayExpression":case"ObjectExpression":if(e)break;default:this.raise(g.InvalidRestAssignmentPattern,{at:t})}}checkCommaAfterRest(t){return!!this.match(12)&&(this.raise(this.lookaheadCharCode()===t?g.RestTrailingComma:g.ElementAfterRest,{at:this.state.startLoc}),!0)}}function we(t){if(!t)throw new Error("Assert fail")}const Te=I`typescript`({AbstractMethodHasImplementation:({methodName:t})=>`Method '${t}' cannot have an implementation because it is marked abstract.`,AbstractPropertyHasInitializer:({propertyName:t})=>`Property '${t}' cannot have an initializer because it is marked abstract.`,AccesorCannotDeclareThisParameter:"'get' and 'set' accessors cannot declare 'this' parameters.",AccesorCannotHaveTypeParameters:"An accessor cannot have type parameters.",AccessorCannotBeOptional:"An 'accessor' property cannot be declared optional.",ClassMethodHasDeclare:"Class methods cannot have the 'declare' modifier.",ClassMethodHasReadonly:"Class methods cannot have the 'readonly' modifier.",ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference:"A 'const' initializer in an ambient context must be a string or numeric literal or literal enum reference.",ConstructorHasTypeParameters:"Type parameters cannot appear on a constructor declaration.",DeclareAccessor:({kind:t})=>`'declare' is not allowed in ${t}ters.`,DeclareClassFieldHasInitializer:"Initializers are not allowed in ambient contexts.",DeclareFunctionHasImplementation:"An implementation cannot be declared in ambient contexts.",DuplicateAccessibilityModifier:({modifier:t})=>"Accessibility modifier already seen.",DuplicateModifier:({modifier:t})=>`Duplicate modifier: '${t}'.`,EmptyHeritageClauseType:({token:t})=>`'${t}' list cannot be empty.`,EmptyTypeArguments:"Type argument list cannot be empty.",EmptyTypeParameters:"Type parameter list cannot be empty.",ExpectedAmbientAfterExportDeclare:"'export declare' must be followed by an ambient declaration.",ImportAliasHasImportType:"An import alias can not use 'import type'.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` modifier",IncompatibleModifiers:({modifiers:t})=>`'${t[0]}' modifier cannot be used with '${t[1]}' modifier.`,IndexSignatureHasAbstract:"Index signatures cannot have the 'abstract' modifier.",IndexSignatureHasAccessibility:({modifier:t})=>`Index signatures cannot have an accessibility modifier ('${t}').`,IndexSignatureHasDeclare:"Index signatures cannot have the 'declare' modifier.",IndexSignatureHasOverride:"'override' modifier cannot appear on an index signature.",IndexSignatureHasStatic:"Index signatures cannot have the 'static' modifier.",InitializerNotAllowedInAmbientContext:"Initializers are not allowed in ambient contexts.",InvalidModifierOnTypeMember:({modifier:t})=>`'${t}' modifier cannot appear on a type member.`,InvalidModifierOnTypeParameter:({modifier:t})=>`'${t}' modifier cannot appear on a type parameter.`,InvalidModifierOnTypeParameterPositions:({modifier:t})=>`'${t}' modifier can only appear on a type parameter of a class, interface or type alias.`,InvalidModifiersOrder:({orderedModifiers:t})=>`'${t[0]}' modifier must precede '${t[1]}' modifier.`,InvalidPropertyAccessAfterInstantiationExpression:"Invalid property access after an instantiation expression. You can either wrap the instantiation expression in parentheses, or delete the type arguments.",InvalidTupleMemberLabel:"Tuple members must be labeled with a simple identifier.",MissingInterfaceName:"'interface' declarations must be followed by an identifier.",NonAbstractClassHasAbstractMethod:"Abstract methods can only appear within an abstract class.",NonClassMethodPropertyHasAbstractModifer:"'abstract' modifier can only appear on a class, method, or property declaration.",OptionalTypeBeforeRequired:"A required element cannot follow an optional element.",OverrideNotInSubClass:"This member cannot have an 'override' modifier because its containing class does not extend another class.",PatternIsOptional:"A binding pattern parameter cannot be optional in an implementation signature.",PrivateElementHasAbstract:"Private elements cannot have the 'abstract' modifier.",PrivateElementHasAccessibility:({modifier:t})=>`Private elements cannot have an accessibility modifier ('${t}').`,ReadonlyForMethodSignature:"'readonly' modifier can only appear on a property declaration or index signature.",ReservedArrowTypeParam:"This syntax is reserved in files with the .mts or .cts extension. Add a trailing comma, as in `<T,>() => ...`.",ReservedTypeAssertion:"This syntax is reserved in files with the .mts or .cts extension. Use an `as` expression instead.",SetAccesorCannotHaveOptionalParameter:"A 'set' accessor cannot have an optional parameter.",SetAccesorCannotHaveRestParameter:"A 'set' accessor cannot have rest parameter.",SetAccesorCannotHaveReturnType:"A 'set' accessor cannot have a return type annotation.",SingleTypeParameterWithoutTrailingComma:({typeParameterName:t})=>`Single type parameter ${t} should have a trailing comma. Example usage: <${t},>.`,StaticBlockCannotHaveModifier:"Static class blocks cannot have any modifier.",TupleOptionalAfterType:"A labeled tuple optional element must be declared using a question mark after the name and before the colon (`name?: type`), rather than after the type (`name: type?`).",TypeAnnotationAfterAssign:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeImportCannotSpecifyDefaultAndNamed:"A type-only import can specify a default import or named bindings, but not both.",TypeModifierIsUsedInTypeExports:"The 'type' modifier cannot be used on a named export when 'export type' is used on its export statement.",TypeModifierIsUsedInTypeImports:"The 'type' modifier cannot be used on a named import when 'import type' is used on its import statement.",UnexpectedParameterModifier:"A parameter property is only allowed in a constructor implementation.",UnexpectedReadonly:"'readonly' type modifier is only permitted on array and tuple literal types.",UnexpectedTypeAnnotation:"Did not expect a type annotation here.",UnexpectedTypeCastInParameter:"Unexpected type cast in parameter position.",UnsupportedImportTypeArgument:"Argument in a type import must be a string literal.",UnsupportedParameterPropertyKind:"A parameter property may not be declared using a binding pattern.",UnsupportedSignatureParameterKind:({type:t})=>`Name in a signature must be an Identifier, ObjectPattern or ArrayPattern, instead got ${t}.`});function Ne(t){return"private"===t||"public"===t||"protected"===t}function Ce(t){return"in"===t||"out"===t}function ve(t){if("MemberExpression"!==t.type)return!1;const{computed:e,property:s}=t;return(!e||"StringLiteral"===s.type||!("TemplateLiteral"!==s.type||s.expressions.length>0))&&Ee(t.object)}function Se(t,e){var s;const{type:i}=t;if(null!=(s=t.extra)&&s.parenthesized)return!1;if(e){if("Literal"===i){const{value:e}=t;if("string"==typeof e||"boolean"==typeof e)return!0}}else if("StringLiteral"===i||"BooleanLiteral"===i)return!0;return!(!Pe(t,e)&&!function(t,e){if("UnaryExpression"===t.type){const{operator:s,argument:i}=t;if("-"===s&&Pe(i,e))return!0}return!1}(t,e))||"TemplateLiteral"===i&&0===t.expressions.length||!!ve(t)}function Pe(t,e){return e?"Literal"===t.type&&("number"==typeof t.value||"bigint"in t):"NumericLiteral"===t.type||"BigIntLiteral"===t.type}function Ee(t){return"Identifier"===t.type||"MemberExpression"===t.type&&!t.computed&&Ee(t.object)}const _e=I`placeholders`({ClassNameIsRequired:"A class name is required.",UnexpectedSpace:"Unexpected space in placeholder."});function Le(t,e){const[s,i]="string"==typeof e?[e,{}]:e,r=Object.keys(i),n=0===r.length;return t.some((t=>{if("string"==typeof t)return n&&t===s;{const[e,n]=t;if(e!==s)return!1;for(const t of r)if(n[t]!==i[t])return!1;return!0}}))}function ke(t,e,s){const i=t.find((t=>Array.isArray(t)?t[0]===e:t===e));return i&&Array.isArray(i)&&i.length>1?i[1][s]:null}const Me=["minimal","fsharp","hack","smart"],Ae=["^^","@@","^","%","#"],Oe=["hash","bar"],Ze={estree:t=>class extends t{parse(){const t=w(super.parse());return this.options.tokens&&(t.tokens=t.tokens.map(w)),t}parseRegExpLiteral({pattern:t,flags:e}){let s=null;try{s=new RegExp(t,e)}catch(t){}const i=this.estreeParseLiteral(s);return i.regex={pattern:t,flags:e},i}parseBigIntLiteral(t){let e;try{e=BigInt(t)}catch(t){e=null}const s=this.estreeParseLiteral(e);return s.bigint=String(s.value||t),s}parseDecimalLiteral(t){const e=this.estreeParseLiteral(null);return e.decimal=String(e.value||t),e}estreeParseLiteral(t){return this.parseLiteral(t,"Literal")}parseStringLiteral(t){return this.estreeParseLiteral(t)}parseNumericLiteral(t){return this.estreeParseLiteral(t)}parseNullLiteral(){return this.estreeParseLiteral(null)}parseBooleanLiteral(t){return this.estreeParseLiteral(t)}directiveToStmt(t){const e=t.value;delete t.value,e.type="Literal",e.raw=e.extra.raw,e.value=e.extra.expressionValue;const s=t;return s.type="ExpressionStatement",s.expression=e,s.directive=e.extra.rawValue,delete e.extra,s}initFunction(t,e){super.initFunction(t,e),t.expression=!1}checkDeclaration(t){null!=t&&this.isObjectProperty(t)?this.checkDeclaration(t.value):super.checkDeclaration(t)}getObjectOrClassMethodParams(t){return t.value.params}isValidDirective(t){var e;return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&!(null!=(e=t.expression.extra)&&e.parenthesized)}parseBlockBody(t,e,s,i,r){super.parseBlockBody(t,e,s,i,r);const n=t.directives.map((t=>this.directiveToStmt(t)));t.body=n.concat(t.body),delete t.directives}pushClassMethod(t,e,s,i,r,n){this.parseMethod(e,s,i,r,n,"ClassMethod",!0),e.typeParameters&&(e.value.typeParameters=e.typeParameters,delete e.typeParameters),t.body.push(e)}parsePrivateName(){const t=super.parsePrivateName();return this.getPluginOption("estree","classFeatures")?this.convertPrivateNameToPrivateIdentifier(t):t}convertPrivateNameToPrivateIdentifier(t){const e=super.getPrivateNameSV(t);return delete t.id,t.name=e,t.type="PrivateIdentifier",t}isPrivateName(t){return this.getPluginOption("estree","classFeatures")?"PrivateIdentifier"===t.type:super.isPrivateName(t)}getPrivateNameSV(t){return this.getPluginOption("estree","classFeatures")?t.name:super.getPrivateNameSV(t)}parseLiteral(t,e){const s=super.parseLiteral(t,e);return s.raw=s.extra.raw,delete s.extra,s}parseFunctionBody(t,e,s=!1){super.parseFunctionBody(t,e,s),t.expression="BlockStatement"!==t.body.type}parseMethod(t,e,s,i,r,n,a=!1){let o=this.startNode();return o.kind=t.kind,o=super.parseMethod(o,e,s,i,r,n,a),o.type="FunctionExpression",delete o.kind,t.value=o,"ClassPrivateMethod"===n&&(t.computed=!1),this.finishNode(t,"MethodDefinition")}parseClassProperty(...t){const e=super.parseClassProperty(...t);return this.getPluginOption("estree","classFeatures")?(e.type="PropertyDefinition",e):e}parseClassPrivateProperty(...t){const e=super.parseClassPrivateProperty(...t);return this.getPluginOption("estree","classFeatures")?(e.type="PropertyDefinition",e.computed=!1,e):e}parseObjectMethod(t,e,s,i,r){const n=super.parseObjectMethod(t,e,s,i,r);return n&&(n.type="Property","method"===n.kind&&(n.kind="init"),n.shorthand=!1),n}parseObjectProperty(t,e,s,i){const r=super.parseObjectProperty(t,e,s,i);return r&&(r.kind="init",r.type="Property"),r}isValidLVal(t,e,s){return"Property"===t?"value":super.isValidLVal(t,e,s)}isAssignable(t,e){return null!=t&&this.isObjectProperty(t)?this.isAssignable(t.value,e):super.isAssignable(t,e)}toAssignable(t,e=!1){if(null!=t&&this.isObjectProperty(t)){const{key:s,value:i}=t;this.isPrivateName(s)&&this.classScope.usePrivateName(this.getPrivateNameSV(s),s.loc.start),this.toAssignable(i,e)}else super.toAssignable(t,e)}toAssignableObjectExpressionProp(t,e,s){"get"===t.kind||"set"===t.kind?this.raise(g.PatternHasAccessor,{at:t.key}):t.method?this.raise(g.PatternHasMethod,{at:t.key}):super.toAssignableObjectExpressionProp(t,e,s)}finishCallExpression(t,e){const s=super.finishCallExpression(t,e);var i,r;"Import"===s.callee.type&&(s.type="ImportExpression",s.source=s.arguments[0],(this.hasPlugin("importAttributes")||this.hasPlugin("importAssertions"))&&(s.options=null!=(i=s.arguments[1])?i:null,s.attributes=null!=(r=s.arguments[1])?r:null),delete s.arguments,delete s.callee);return s}toReferencedArguments(t){"ImportExpression"!==t.type&&super.toReferencedArguments(t)}parseExport(t,e){const s=this.state.lastTokStartLoc,i=super.parseExport(t,e);switch(i.type){case"ExportAllDeclaration":i.exported=null;break;case"ExportNamedDeclaration":1===i.specifiers.length&&"ExportNamespaceSpecifier"===i.specifiers[0].type&&(i.type="ExportAllDeclaration",i.exported=i.specifiers[0].exported,delete i.specifiers);case"ExportDefaultDeclaration":{var r;const{declaration:t}=i;"ClassDeclaration"===(null==t?void 0:t.type)&&(null==(r=t.decorators)?void 0:r.length)>0&&t.start===i.start&&this.resetStartLocation(i,s)}}return i}parseSubscript(t,e,s,i){const r=super.parseSubscript(t,e,s,i);if(i.optionalChainMember){if("OptionalMemberExpression"!==r.type&&"OptionalCallExpression"!==r.type||(r.type=r.type.substring(8)),i.stop){const t=this.startNodeAtNode(r);return t.expression=r,this.finishNode(t,"ChainExpression")}}else"MemberExpression"!==r.type&&"CallExpression"!==r.type||(r.optional=!1);return r}isOptionalMemberExpression(t){return"ChainExpression"===t.type?"MemberExpression"===t.expression.type:super.isOptionalMemberExpression(t)}hasPropertyAsPrivateName(t){return"ChainExpression"===t.type&&(t=t.expression),super.hasPropertyAsPrivateName(t)}isObjectProperty(t){return"Property"===t.type&&"init"===t.kind&&!t.method}isObjectMethod(t){return t.method||"get"===t.kind||"set"===t.kind}finishNodeAt(t,e,s){return w(super.finishNodeAt(t,e,s))}resetStartLocation(t,e){super.resetStartLocation(t,e),w(t)}resetEndLocation(t,e=this.state.lastTokEndLoc){super.resetEndLocation(t,e),w(t)}},jsx:t=>class extends t{jsxReadToken(){let t="",e=this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(me.UnterminatedJsxContent,{at:this.state.startLoc});const s=this.input.charCodeAt(this.state.pos);switch(s){case 60:case 123:return this.state.pos===this.state.start?void(60===s&&this.state.canStartJSXElement?(++this.state.pos,this.finishToken(142)):super.getTokenFromCode(s)):(t+=this.input.slice(e,this.state.pos),void this.finishToken(141,t));case 38:t+=this.input.slice(e,this.state.pos),t+=this.jsxReadEntity(),e=this.state.pos;break;default:Pt(s)?(t+=this.input.slice(e,this.state.pos),t+=this.jsxReadNewLine(!0),e=this.state.pos):++this.state.pos}}}jsxReadNewLine(t){const e=this.input.charCodeAt(this.state.pos);let s;return++this.state.pos,13===e&&10===this.input.charCodeAt(this.state.pos)?(++this.state.pos,s=t?"\n":"\r\n"):s=String.fromCharCode(e),++this.state.curLine,this.state.lineStart=this.state.pos,s}jsxReadString(t){let e="",s=++this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(g.UnterminatedString,{at:this.state.startLoc});const i=this.input.charCodeAt(this.state.pos);if(i===t)break;38===i?(e+=this.input.slice(s,this.state.pos),e+=this.jsxReadEntity(),s=this.state.pos):Pt(i)?(e+=this.input.slice(s,this.state.pos),e+=this.jsxReadNewLine(!1),s=this.state.pos):++this.state.pos}e+=this.input.slice(s,this.state.pos++),this.finishToken(133,e)}jsxReadEntity(){const t=++this.state.pos;if(35===this.codePointAtPos(this.state.pos)){++this.state.pos;let t=10;120===this.codePointAtPos(this.state.pos)&&(t=16,++this.state.pos);const e=this.readInt(t,void 0,!1,"bail");if(null!==e&&59===this.codePointAtPos(this.state.pos))return++this.state.pos,String.fromCodePoint(e)}else{let e=0,s=!1;for(;e++<10&&this.state.pos<this.length&&!(s=59==this.codePointAtPos(this.state.pos));)++this.state.pos;if(s){const e=this.input.slice(t,this.state.pos),s=de[e];if(++this.state.pos,s)return s}}return this.state.pos=t,"&"}jsxReadWord(){let t;const e=this.state.pos;do{t=this.input.charCodeAt(++this.state.pos)}while(ot(t)||45===t);this.finishToken(140,this.input.slice(e,this.state.pos))}jsxParseIdentifier(){const t=this.startNode();return this.match(140)?t.name=this.state.value:H(this.state.type)?t.name=X(this.state.type):this.unexpected(),this.next(),this.finishNode(t,"JSXIdentifier")}jsxParseNamespacedName(){const t=this.state.startLoc,e=this.jsxParseIdentifier();if(!this.eat(14))return e;const s=this.startNodeAt(t);return s.namespace=e,s.name=this.jsxParseIdentifier(),this.finishNode(s,"JSXNamespacedName")}jsxParseElementName(){const t=this.state.startLoc;let e=this.jsxParseNamespacedName();if("JSXNamespacedName"===e.type)return e;for(;this.eat(16);){const s=this.startNodeAt(t);s.object=e,s.property=this.jsxParseIdentifier(),e=this.finishNode(s,"JSXMemberExpression")}return e}jsxParseAttributeValue(){let t;switch(this.state.type){case 5:return t=this.startNode(),this.setContext(N.brace),this.next(),t=this.jsxParseExpressionContainer(t,N.j_oTag),"JSXEmptyExpression"===t.expression.type&&this.raise(me.AttributeIsEmpty,{at:t}),t;case 142:case 133:return this.parseExprAtom();default:throw this.raise(me.UnsupportedJsxValue,{at:this.state.startLoc})}}jsxParseEmptyExpression(){const t=this.startNodeAt(this.state.lastTokEndLoc);return this.finishNodeAt(t,"JSXEmptyExpression",this.state.startLoc)}jsxParseSpreadChild(t){return this.next(),t.expression=this.parseExpression(),this.setContext(N.j_expr),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(t,"JSXSpreadChild")}jsxParseExpressionContainer(t,e){if(this.match(8))t.expression=this.jsxParseEmptyExpression();else{const e=this.parseExpression();t.expression=e}return this.setContext(e),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(t,"JSXExpressionContainer")}jsxParseAttribute(){const t=this.startNode();return this.match(5)?(this.setContext(N.brace),this.next(),this.expect(21),t.argument=this.parseMaybeAssignAllowIn(),this.setContext(N.j_oTag),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(t,"JSXSpreadAttribute")):(t.name=this.jsxParseNamespacedName(),t.value=this.eat(29)?this.jsxParseAttributeValue():null,this.finishNode(t,"JSXAttribute"))}jsxParseOpeningElementAt(t){const e=this.startNodeAt(t);return this.eat(143)?this.finishNode(e,"JSXOpeningFragment"):(e.name=this.jsxParseElementName(),this.jsxParseOpeningElementAfterName(e))}jsxParseOpeningElementAfterName(t){const e=[];for(;!this.match(56)&&!this.match(143);)e.push(this.jsxParseAttribute());return t.attributes=e,t.selfClosing=this.eat(56),this.expect(143),this.finishNode(t,"JSXOpeningElement")}jsxParseClosingElementAt(t){const e=this.startNodeAt(t);return this.eat(143)?this.finishNode(e,"JSXClosingFragment"):(e.name=this.jsxParseElementName(),this.expect(143),this.finishNode(e,"JSXClosingElement"))}jsxParseElementAt(t){const e=this.startNodeAt(t),s=[],i=this.jsxParseOpeningElementAt(t);let r=null;if(!i.selfClosing){t:for(;;)switch(this.state.type){case 142:if(t=this.state.startLoc,this.next(),this.eat(56)){r=this.jsxParseClosingElementAt(t);break t}s.push(this.jsxParseElementAt(t));break;case 141:s.push(this.parseExprAtom());break;case 5:{const t=this.startNode();this.setContext(N.brace),this.next(),this.match(21)?s.push(this.jsxParseSpreadChild(t)):s.push(this.jsxParseExpressionContainer(t,N.j_expr));break}default:this.unexpected()}fe(i)&&!fe(r)&&null!==r?this.raise(me.MissingClosingTagFragment,{at:r}):!fe(i)&&fe(r)?this.raise(me.MissingClosingTagElement,{at:r,openingTagName:ye(i.name)}):fe(i)||fe(r)||ye(r.name)!==ye(i.name)&&this.raise(me.MissingClosingTagElement,{at:r,openingTagName:ye(i.name)})}if(fe(i)?(e.openingFragment=i,e.closingFragment=r):(e.openingElement=i,e.closingElement=r),e.children=s,this.match(47))throw this.raise(me.UnwrappedAdjacentJSXElements,{at:this.state.startLoc});return fe(i)?this.finishNode(e,"JSXFragment"):this.finishNode(e,"JSXElement")}jsxParseElement(){const t=this.state.startLoc;return this.next(),this.jsxParseElementAt(t)}setContext(t){const{context:e}=this.state;e[e.length-1]=t}parseExprAtom(t){return this.match(141)?this.parseLiteral(this.state.value,"JSXText"):this.match(142)?this.jsxParseElement():this.match(47)&&33!==this.input.charCodeAt(this.state.pos)?(this.replaceToken(142),this.jsxParseElement()):super.parseExprAtom(t)}skipSpace(){this.curContext().preserveSpace||super.skipSpace()}getTokenFromCode(t){const e=this.curContext();if(e!==N.j_expr){if(e===N.j_oTag||e===N.j_cTag){if(at(t))return void this.jsxReadWord();if(62===t)return++this.state.pos,void this.finishToken(143);if((34===t||39===t)&&e===N.j_oTag)return void this.jsxReadString(t)}if(60===t&&this.state.canStartJSXElement&&33!==this.input.charCodeAt(this.state.pos+1))return++this.state.pos,void this.finishToken(142);super.getTokenFromCode(t)}else this.jsxReadToken()}updateContext(t){const{context:e,type:s}=this.state;if(56===s&&142===t)e.splice(-2,2,N.j_cTag),this.state.canStartJSXElement=!1;else if(142===s)e.push(N.j_oTag);else if(143===s){const s=e[e.length-1];s===N.j_oTag&&56===t||s===N.j_cTag?(e.pop(),this.state.canStartJSXElement=e[e.length-1]===N.j_expr):(this.setContext(N.j_expr),this.state.canStartJSXElement=!0)}else this.state.canStartJSXElement=D[s]}},flow:t=>class extends t{constructor(...t){super(...t),this.flowPragma=void 0}getScopeHandler(){return bt}shouldParseTypes(){return this.getPluginOption("flow","all")||"flow"===this.flowPragma}shouldParseEnums(){return!!this.getPluginOption("flow","enums")}finishToken(t,e){133!==t&&13!==t&&28!==t&&void 0===this.flowPragma&&(this.flowPragma=null),super.finishToken(t,e)}addComment(t){if(void 0===this.flowPragma){const e=ue.exec(t.value);if(e)if("flow"===e[1])this.flowPragma="flow";else{if("noflow"!==e[1])throw new Error("Unexpected flow pragma");this.flowPragma="noflow"}}super.addComment(t)}flowParseTypeInitialiser(t){const e=this.state.inType;this.state.inType=!0,this.expect(t||14);const s=this.flowParseType();return this.state.inType=e,s}flowParsePredicate(){const t=this.startNode(),e=this.state.startLoc;return this.next(),this.expectContextual(110),this.state.lastTokStart>e.index+1&&this.raise(ce.UnexpectedSpaceBetweenModuloChecks,{at:e}),this.eat(10)?(t.value=super.parseExpression(),this.expect(11),this.finishNode(t,"DeclaredPredicate")):this.finishNode(t,"InferredPredicate")}flowParseTypeAndPredicateInitialiser(){const t=this.state.inType;this.state.inType=!0,this.expect(14);let e=null,s=null;return this.match(54)?(this.state.inType=t,s=this.flowParsePredicate()):(e=this.flowParseType(),this.state.inType=t,this.match(54)&&(s=this.flowParsePredicate())),[e,s]}flowParseDeclareClass(t){return this.next(),this.flowParseInterfaceish(t,!0),this.finishNode(t,"DeclareClass")}flowParseDeclareFunction(t){this.next();const e=t.id=this.parseIdentifier(),s=this.startNode(),i=this.startNode();this.match(47)?s.typeParameters=this.flowParseTypeParameterDeclaration():s.typeParameters=null,this.expect(10);const r=this.flowParseFunctionTypeParams();return s.params=r.params,s.rest=r.rest,s.this=r._this,this.expect(11),[s.returnType,t.predicate]=this.flowParseTypeAndPredicateInitialiser(),i.typeAnnotation=this.finishNode(s,"FunctionTypeAnnotation"),e.typeAnnotation=this.finishNode(i,"TypeAnnotation"),this.resetEndLocation(e),this.semicolon(),this.scope.declareName(t.id.name,2048,t.id.loc.start),this.finishNode(t,"DeclareFunction")}flowParseDeclare(t,e){return this.match(80)?this.flowParseDeclareClass(t):this.match(68)?this.flowParseDeclareFunction(t):this.match(74)?this.flowParseDeclareVariable(t):this.eatContextual(127)?this.match(16)?this.flowParseDeclareModuleExports(t):(e&&this.raise(ce.NestedDeclareModule,{at:this.state.lastTokStartLoc}),this.flowParseDeclareModule(t)):this.isContextual(130)?this.flowParseDeclareTypeAlias(t):this.isContextual(131)?this.flowParseDeclareOpaqueType(t):this.isContextual(129)?this.flowParseDeclareInterface(t):this.match(82)?this.flowParseDeclareExportDeclaration(t,e):void this.unexpected()}flowParseDeclareVariable(t){return this.next(),t.id=this.flowParseTypeAnnotatableIdentifier(!0),this.scope.declareName(t.id.name,5,t.id.loc.start),this.semicolon(),this.finishNode(t,"DeclareVariable")}flowParseDeclareModule(t){this.scope.enter(0),this.match(133)?t.id=super.parseExprAtom():t.id=this.parseIdentifier();const e=t.body=this.startNode(),s=e.body=[];for(this.expect(5);!this.match(8);){let t=this.startNode();this.match(83)?(this.next(),this.isContextual(130)||this.match(87)||this.raise(ce.InvalidNonTypeImportInDeclareModule,{at:this.state.lastTokStartLoc}),super.parseImport(t)):(this.expectContextual(125,ce.UnsupportedStatementInDeclareModule),t=this.flowParseDeclare(t,!0)),s.push(t)}this.scope.exit(),this.expect(8),this.finishNode(e,"BlockStatement");let i=null,r=!1;return s.forEach((t=>{!function(t){return"DeclareExportAllDeclaration"===t.type||"DeclareExportDeclaration"===t.type&&(!t.declaration||"TypeAlias"!==t.declaration.type&&"InterfaceDeclaration"!==t.declaration.type)}(t)?"DeclareModuleExports"===t.type&&(r&&this.raise(ce.DuplicateDeclareModuleExports,{at:t}),"ES"===i&&this.raise(ce.AmbiguousDeclareModuleKind,{at:t}),i="CommonJS",r=!0):("CommonJS"===i&&this.raise(ce.AmbiguousDeclareModuleKind,{at:t}),i="ES")})),t.kind=i||"CommonJS",this.finishNode(t,"DeclareModule")}flowParseDeclareExportDeclaration(t,e){if(this.expect(82),this.eat(65))return this.match(68)||this.match(80)?t.declaration=this.flowParseDeclare(this.startNode()):(t.declaration=this.flowParseType(),this.semicolon()),t.default=!0,this.finishNode(t,"DeclareExportDeclaration");if(this.match(75)||this.isLet()||(this.isContextual(130)||this.isContextual(129))&&!e){const t=this.state.value;throw this.raise(ce.UnsupportedDeclareExportKind,{at:this.state.startLoc,unsupportedExportKind:t,suggestion:pe[t]})}return this.match(74)||this.match(68)||this.match(80)||this.isContextual(131)?(t.declaration=this.flowParseDeclare(this.startNode()),t.default=!1,this.finishNode(t,"DeclareExportDeclaration")):this.match(55)||this.match(5)||this.isContextual(129)||this.isContextual(130)||this.isContextual(131)?("ExportNamedDeclaration"===(t=this.parseExport(t,null)).type&&(t.type="ExportDeclaration",t.default=!1,delete t.exportKind),t.type="Declare"+t.type,t):void this.unexpected()}flowParseDeclareModuleExports(t){return this.next(),this.expectContextual(111),t.typeAnnotation=this.flowParseTypeAnnotation(),this.semicolon(),this.finishNode(t,"DeclareModuleExports")}flowParseDeclareTypeAlias(t){this.next();const e=this.flowParseTypeAlias(t);return e.type="DeclareTypeAlias",e}flowParseDeclareOpaqueType(t){this.next();const e=this.flowParseOpaqueType(t,!0);return e.type="DeclareOpaqueType",e}flowParseDeclareInterface(t){return this.next(),this.flowParseInterfaceish(t,!1),this.finishNode(t,"DeclareInterface")}flowParseInterfaceish(t,e){if(t.id=this.flowParseRestrictedIdentifier(!e,!0),this.scope.declareName(t.id.name,e?17:8201,t.id.loc.start),this.match(47)?t.typeParameters=this.flowParseTypeParameterDeclaration():t.typeParameters=null,t.extends=[],this.eat(81))do{t.extends.push(this.flowParseInterfaceExtends())}while(!e&&this.eat(12));if(e){if(t.implements=[],t.mixins=[],this.eatContextual(117))do{t.mixins.push(this.flowParseInterfaceExtends())}while(this.eat(12));if(this.eatContextual(113))do{t.implements.push(this.flowParseInterfaceExtends())}while(this.eat(12))}t.body=this.flowParseObjectType({allowStatic:e,allowExact:!1,allowSpread:!1,allowProto:e,allowInexact:!1})}flowParseInterfaceExtends(){const t=this.startNode();return t.id=this.flowParseQualifiedTypeIdentifier(),this.match(47)?t.typeParameters=this.flowParseTypeParameterInstantiation():t.typeParameters=null,this.finishNode(t,"InterfaceExtends")}flowParseInterface(t){return this.flowParseInterfaceish(t,!1),this.finishNode(t,"InterfaceDeclaration")}checkNotUnderscore(t){"_"===t&&this.raise(ce.UnexpectedReservedUnderscore,{at:this.state.startLoc})}checkReservedType(t,e,s){he.has(t)&&this.raise(s?ce.AssignReservedType:ce.UnexpectedReservedType,{at:e,reservedType:t})}flowParseRestrictedIdentifier(t,e){return this.checkReservedType(this.state.value,this.state.startLoc,e),this.parseIdentifier(t)}flowParseTypeAlias(t){return t.id=this.flowParseRestrictedIdentifier(!1,!0),this.scope.declareName(t.id.name,8201,t.id.loc.start),this.match(47)?t.typeParameters=this.flowParseTypeParameterDeclaration():t.typeParameters=null,t.right=this.flowParseTypeInitialiser(29),this.semicolon(),this.finishNode(t,"TypeAlias")}flowParseOpaqueType(t,e){return this.expectContextual(130),t.id=this.flowParseRestrictedIdentifier(!0,!0),this.scope.declareName(t.id.name,8201,t.id.loc.start),this.match(47)?t.typeParameters=this.flowParseTypeParameterDeclaration():t.typeParameters=null,t.supertype=null,this.match(14)&&(t.supertype=this.flowParseTypeInitialiser(14)),t.impltype=null,e||(t.impltype=this.flowParseTypeInitialiser(29)),this.semicolon(),this.finishNode(t,"OpaqueType")}flowParseTypeParameter(t=!1){const e=this.state.startLoc,s=this.startNode(),i=this.flowParseVariance(),r=this.flowParseTypeAnnotatableIdentifier();return s.name=r.name,s.variance=i,s.bound=r.typeAnnotation,this.match(29)?(this.eat(29),s.default=this.flowParseType()):t&&this.raise(ce.MissingTypeParamDefault,{at:e}),this.finishNode(s,"TypeParameter")}flowParseTypeParameterDeclaration(){const t=this.state.inType,e=this.startNode();e.params=[],this.state.inType=!0,this.match(47)||this.match(142)?this.next():this.unexpected();let s=!1;do{const t=this.flowParseTypeParameter(s);e.params.push(t),t.default&&(s=!0),this.match(48)||this.expect(12)}while(!this.match(48));return this.expect(48),this.state.inType=t,this.finishNode(e,"TypeParameterDeclaration")}flowParseTypeParameterInstantiation(){const t=this.startNode(),e=this.state.inType;t.params=[],this.state.inType=!0,this.expect(47);const s=this.state.noAnonFunctionType;for(this.state.noAnonFunctionType=!1;!this.match(48);)t.params.push(this.flowParseType()),this.match(48)||this.expect(12);return this.state.noAnonFunctionType=s,this.expect(48),this.state.inType=e,this.finishNode(t,"TypeParameterInstantiation")}flowParseTypeParameterInstantiationCallOrNew(){const t=this.startNode(),e=this.state.inType;for(t.params=[],this.state.inType=!0,this.expect(47);!this.match(48);)t.params.push(this.flowParseTypeOrImplicitInstantiation()),this.match(48)||this.expect(12);return this.expect(48),this.state.inType=e,this.finishNode(t,"TypeParameterInstantiation")}flowParseInterfaceType(){const t=this.startNode();if(this.expectContextual(129),t.extends=[],this.eat(81))do{t.extends.push(this.flowParseInterfaceExtends())}while(this.eat(12));return t.body=this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!1,allowProto:!1,allowInexact:!1}),this.finishNode(t,"InterfaceTypeAnnotation")}flowParseObjectPropertyKey(){return this.match(134)||this.match(133)?super.parseExprAtom():this.parseIdentifier(!0)}flowParseObjectTypeIndexer(t,e,s){return t.static=e,14===this.lookahead().type?(t.id=this.flowParseObjectPropertyKey(),t.key=this.flowParseTypeInitialiser()):(t.id=null,t.key=this.flowParseType()),this.expect(3),t.value=this.flowParseTypeInitialiser(),t.variance=s,this.finishNode(t,"ObjectTypeIndexer")}flowParseObjectTypeInternalSlot(t,e){return t.static=e,t.id=this.flowParseObjectPropertyKey(),this.expect(3),this.expect(3),this.match(47)||this.match(10)?(t.method=!0,t.optional=!1,t.value=this.flowParseObjectTypeMethodish(this.startNodeAt(t.loc.start))):(t.method=!1,this.eat(17)&&(t.optional=!0),t.value=this.flowParseTypeInitialiser()),this.finishNode(t,"ObjectTypeInternalSlot")}flowParseObjectTypeMethodish(t){for(t.params=[],t.rest=null,t.typeParameters=null,t.this=null,this.match(47)&&(t.typeParameters=this.flowParseTypeParameterDeclaration()),this.expect(10),this.match(78)&&(t.this=this.flowParseFunctionTypeParam(!0),t.this.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)t.params.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(t.rest=this.flowParseFunctionTypeParam(!1)),this.expect(11),t.returnType=this.flowParseTypeInitialiser(),this.finishNode(t,"FunctionTypeAnnotation")}flowParseObjectTypeCallProperty(t,e){const s=this.startNode();return t.static=e,t.value=this.flowParseObjectTypeMethodish(s),this.finishNode(t,"ObjectTypeCallProperty")}flowParseObjectType({allowStatic:t,allowExact:e,allowSpread:s,allowProto:i,allowInexact:r}){const n=this.state.inType;this.state.inType=!0;const a=this.startNode();let o,h;a.callProperties=[],a.properties=[],a.indexers=[],a.internalSlots=[];let c=!1;for(e&&this.match(6)?(this.expect(6),o=9,h=!0):(this.expect(5),o=8,h=!1),a.exact=h;!this.match(o);){let e=!1,n=null,o=null;const l=this.startNode();if(i&&this.isContextual(118)){const e=this.lookahead();14!==e.type&&17!==e.type&&(this.next(),n=this.state.startLoc,t=!1)}if(t&&this.isContextual(106)){const t=this.lookahead();14!==t.type&&17!==t.type&&(this.next(),e=!0)}const p=this.flowParseVariance();if(this.eat(0))null!=n&&this.unexpected(n),this.eat(0)?(p&&this.unexpected(p.loc.start),a.internalSlots.push(this.flowParseObjectTypeInternalSlot(l,e))):a.indexers.push(this.flowParseObjectTypeIndexer(l,e,p));else if(this.match(10)||this.match(47))null!=n&&this.unexpected(n),p&&this.unexpected(p.loc.start),a.callProperties.push(this.flowParseObjectTypeCallProperty(l,e));else{let t="init";(this.isContextual(99)||this.isContextual(104))&&B(this.lookahead().type)&&(t=this.state.value,this.next());const i=this.flowParseObjectTypeProperty(l,e,n,p,t,s,null!=r?r:!h);null===i?(c=!0,o=this.state.lastTokStartLoc):a.properties.push(i)}this.flowObjectTypeSemicolon(),!o||this.match(8)||this.match(9)||this.raise(ce.UnexpectedExplicitInexactInObject,{at:o})}this.expect(o),s&&(a.inexact=c);const l=this.finishNode(a,"ObjectTypeAnnotation");return this.state.inType=n,l}flowParseObjectTypeProperty(t,e,s,i,r,n,a){if(this.eat(21))return this.match(12)||this.match(13)||this.match(8)||this.match(9)?(n?a||this.raise(ce.InexactInsideExact,{at:this.state.lastTokStartLoc}):this.raise(ce.InexactInsideNonObject,{at:this.state.lastTokStartLoc}),i&&this.raise(ce.InexactVariance,{at:i}),null):(n||this.raise(ce.UnexpectedSpreadType,{at:this.state.lastTokStartLoc}),null!=s&&this.unexpected(s),i&&this.raise(ce.SpreadVariance,{at:i}),t.argument=this.flowParseType(),this.finishNode(t,"ObjectTypeSpreadProperty"));{t.key=this.flowParseObjectPropertyKey(),t.static=e,t.proto=null!=s,t.kind=r;let a=!1;return this.match(47)||this.match(10)?(t.method=!0,null!=s&&this.unexpected(s),i&&this.unexpected(i.loc.start),t.value=this.flowParseObjectTypeMethodish(this.startNodeAt(t.loc.start)),"get"!==r&&"set"!==r||this.flowCheckGetterSetterParams(t),!n&&"constructor"===t.key.name&&t.value.this&&this.raise(ce.ThisParamBannedInConstructor,{at:t.value.this})):("init"!==r&&this.unexpected(),t.method=!1,this.eat(17)&&(a=!0),t.value=this.flowParseTypeInitialiser(),t.variance=i),t.optional=a,this.finishNode(t,"ObjectTypeProperty")}}flowCheckGetterSetterParams(t){const e="get"===t.kind?0:1,s=t.value.params.length+(t.value.rest?1:0);t.value.this&&this.raise("get"===t.kind?ce.GetterMayNotHaveThisParam:ce.SetterMayNotHaveThisParam,{at:t.value.this}),s!==e&&this.raise("get"===t.kind?g.BadGetterArity:g.BadSetterArity,{at:t}),"set"===t.kind&&t.value.rest&&this.raise(g.BadSetterRestParameter,{at:t})}flowObjectTypeSemicolon(){this.eat(13)||this.eat(12)||this.match(8)||this.match(9)||this.unexpected()}flowParseQualifiedTypeIdentifier(t,e){null!=t||(t=this.state.startLoc);let s=e||this.flowParseRestrictedIdentifier(!0);for(;this.eat(16);){const e=this.startNodeAt(t);e.qualification=s,e.id=this.flowParseRestrictedIdentifier(!0),s=this.finishNode(e,"QualifiedTypeIdentifier")}return s}flowParseGenericType(t,e){const s=this.startNodeAt(t);return s.typeParameters=null,s.id=this.flowParseQualifiedTypeIdentifier(t,e),this.match(47)&&(s.typeParameters=this.flowParseTypeParameterInstantiation()),this.finishNode(s,"GenericTypeAnnotation")}flowParseTypeofType(){const t=this.startNode();return this.expect(87),t.argument=this.flowParsePrimaryType(),this.finishNode(t,"TypeofTypeAnnotation")}flowParseTupleType(){const t=this.startNode();for(t.types=[],this.expect(0);this.state.pos<this.length&&!this.match(3)&&(t.types.push(this.flowParseType()),!this.match(3));)this.expect(12);return this.expect(3),this.finishNode(t,"TupleTypeAnnotation")}flowParseFunctionTypeParam(t){let e=null,s=!1,i=null;const r=this.startNode(),n=this.lookahead(),a=78===this.state.type;return 14===n.type||17===n.type?(a&&!t&&this.raise(ce.ThisParamMustBeFirst,{at:r}),e=this.parseIdentifier(a),this.eat(17)&&(s=!0,a&&this.raise(ce.ThisParamMayNotBeOptional,{at:r})),i=this.flowParseTypeInitialiser()):i=this.flowParseType(),r.name=e,r.optional=s,r.typeAnnotation=i,this.finishNode(r,"FunctionTypeParam")}reinterpretTypeAsFunctionTypeParam(t){const e=this.startNodeAt(t.loc.start);return e.name=null,e.optional=!1,e.typeAnnotation=t,this.finishNode(e,"FunctionTypeParam")}flowParseFunctionTypeParams(t=[]){let e=null,s=null;for(this.match(78)&&(s=this.flowParseFunctionTypeParam(!0),s.name=null,this.match(11)||this.expect(12));!this.match(11)&&!this.match(21);)t.push(this.flowParseFunctionTypeParam(!1)),this.match(11)||this.expect(12);return this.eat(21)&&(e=this.flowParseFunctionTypeParam(!1)),{params:t,rest:e,_this:s}}flowIdentToTypeAnnotation(t,e,s){switch(s.name){case"any":return this.finishNode(e,"AnyTypeAnnotation");case"bool":case"boolean":return this.finishNode(e,"BooleanTypeAnnotation");case"mixed":return this.finishNode(e,"MixedTypeAnnotation");case"empty":return this.finishNode(e,"EmptyTypeAnnotation");case"number":return this.finishNode(e,"NumberTypeAnnotation");case"string":return this.finishNode(e,"StringTypeAnnotation");case"symbol":return this.finishNode(e,"SymbolTypeAnnotation");default:return this.checkNotUnderscore(s.name),this.flowParseGenericType(t,s)}}flowParsePrimaryType(){const t=this.state.startLoc,e=this.startNode();let s,i,r=!1;const n=this.state.noAnonFunctionType;switch(this.state.type){case 5:return this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!0,allowProto:!1,allowInexact:!0});case 6:return this.flowParseObjectType({allowStatic:!1,allowExact:!0,allowSpread:!0,allowProto:!1,allowInexact:!1});case 0:return this.state.noAnonFunctionType=!1,i=this.flowParseTupleType(),this.state.noAnonFunctionType=n,i;case 47:return e.typeParameters=this.flowParseTypeParameterDeclaration(),this.expect(10),s=this.flowParseFunctionTypeParams(),e.params=s.params,e.rest=s.rest,e.this=s._this,this.expect(11),this.expect(19),e.returnType=this.flowParseType(),this.finishNode(e,"FunctionTypeAnnotation");case 10:if(this.next(),!this.match(11)&&!this.match(21))if(U(this.state.type)||this.match(78)){const t=this.lookahead().type;r=17!==t&&14!==t}else r=!0;if(r){if(this.state.noAnonFunctionType=!1,i=this.flowParseType(),this.state.noAnonFunctionType=n,this.state.noAnonFunctionType||!(this.match(12)||this.match(11)&&19===this.lookahead().type))return this.expect(11),i;this.eat(12)}return s=i?this.flowParseFunctionTypeParams([this.reinterpretTypeAsFunctionTypeParam(i)]):this.flowParseFunctionTypeParams(),e.params=s.params,e.rest=s.rest,e.this=s._this,this.expect(11),this.expect(19),e.returnType=this.flowParseType(),e.typeParameters=null,this.finishNode(e,"FunctionTypeAnnotation");case 133:return this.parseLiteral(this.state.value,"StringLiteralTypeAnnotation");case 85:case 86:return e.value=this.match(85),this.next(),this.finishNode(e,"BooleanLiteralTypeAnnotation");case 53:if("-"===this.state.value){if(this.next(),this.match(134))return this.parseLiteralAtNode(-this.state.value,"NumberLiteralTypeAnnotation",e);if(this.match(135))return this.parseLiteralAtNode(-this.state.value,"BigIntLiteralTypeAnnotation",e);throw this.raise(ce.UnexpectedSubtractionOperand,{at:this.state.startLoc})}return void this.unexpected();case 134:return this.parseLiteral(this.state.value,"NumberLiteralTypeAnnotation");case 135:return this.parseLiteral(this.state.value,"BigIntLiteralTypeAnnotation");case 88:return this.next(),this.finishNode(e,"VoidTypeAnnotation");case 84:return this.next(),this.finishNode(e,"NullLiteralTypeAnnotation");case 78:return this.next(),this.finishNode(e,"ThisTypeAnnotation");case 55:return this.next(),this.finishNode(e,"ExistsTypeAnnotation");case 87:return this.flowParseTypeofType();default:if(H(this.state.type)){const t=X(this.state.type);return this.next(),super.createIdentifier(e,t)}if(U(this.state.type))return this.isContextual(129)?this.flowParseInterfaceType():this.flowIdentToTypeAnnotation(t,e,this.parseIdentifier())}this.unexpected()}flowParsePostfixType(){const t=this.state.startLoc;let e=this.flowParsePrimaryType(),s=!1;for(;(this.match(0)||this.match(18))&&!this.canInsertSemicolon();){const i=this.startNodeAt(t),r=this.eat(18);s=s||r,this.expect(0),!r&&this.match(3)?(i.elementType=e,this.next(),e=this.finishNode(i,"ArrayTypeAnnotation")):(i.objectType=e,i.indexType=this.flowParseType(),this.expect(3),s?(i.optional=r,e=this.finishNode(i,"OptionalIndexedAccessType")):e=this.finishNode(i,"IndexedAccessType"))}return e}flowParsePrefixType(){const t=this.startNode();return this.eat(17)?(t.typeAnnotation=this.flowParsePrefixType(),this.finishNode(t,"NullableTypeAnnotation")):this.flowParsePostfixType()}flowParseAnonFunctionWithoutParens(){const t=this.flowParsePrefixType();if(!this.state.noAnonFunctionType&&this.eat(19)){const e=this.startNodeAt(t.loc.start);return e.params=[this.reinterpretTypeAsFunctionTypeParam(t)],e.rest=null,e.this=null,e.returnType=this.flowParseType(),e.typeParameters=null,this.finishNode(e,"FunctionTypeAnnotation")}return t}flowParseIntersectionType(){const t=this.startNode();this.eat(45);const e=this.flowParseAnonFunctionWithoutParens();for(t.types=[e];this.eat(45);)t.types.push(this.flowParseAnonFunctionWithoutParens());return 1===t.types.length?e:this.finishNode(t,"IntersectionTypeAnnotation")}flowParseUnionType(){const t=this.startNode();this.eat(43);const e=this.flowParseIntersectionType();for(t.types=[e];this.eat(43);)t.types.push(this.flowParseIntersectionType());return 1===t.types.length?e:this.finishNode(t,"UnionTypeAnnotation")}flowParseType(){const t=this.state.inType;this.state.inType=!0;const e=this.flowParseUnionType();return this.state.inType=t,e}flowParseTypeOrImplicitInstantiation(){if(132===this.state.type&&"_"===this.state.value){const t=this.state.startLoc,e=this.parseIdentifier();return this.flowParseGenericType(t,e)}return this.flowParseType()}flowParseTypeAnnotation(){const t=this.startNode();return t.typeAnnotation=this.flowParseTypeInitialiser(),this.finishNode(t,"TypeAnnotation")}flowParseTypeAnnotatableIdentifier(t){const e=t?this.parseIdentifier():this.flowParseRestrictedIdentifier();return this.match(14)&&(e.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(e)),e}typeCastToParameter(t){return t.expression.typeAnnotation=t.typeAnnotation,this.resetEndLocation(t.expression,t.typeAnnotation.loc.end),t.expression}flowParseVariance(){let t=null;return this.match(53)?(t=this.startNode(),"+"===this.state.value?t.kind="plus":t.kind="minus",this.next(),this.finishNode(t,"Variance")):t}parseFunctionBody(t,e,s=!1){e?this.forwardNoArrowParamsConversionAt(t,(()=>super.parseFunctionBody(t,!0,s))):super.parseFunctionBody(t,!1,s)}parseFunctionBodyAndFinish(t,e,s=!1){if(this.match(14)){const e=this.startNode();[e.typeAnnotation,t.predicate]=this.flowParseTypeAndPredicateInitialiser(),t.returnType=e.typeAnnotation?this.finishNode(e,"TypeAnnotation"):null}return super.parseFunctionBodyAndFinish(t,e,s)}parseStatementLike(t){if(this.state.strict&&this.isContextual(129)){if(z(this.lookahead().type)){const t=this.startNode();return this.next(),this.flowParseInterface(t)}}else if(this.shouldParseEnums()&&this.isContextual(126)){const t=this.startNode();return this.next(),this.flowParseEnumDeclaration(t)}const e=super.parseStatementLike(t);return void 0!==this.flowPragma||this.isValidDirective(e)||(this.flowPragma=null),e}parseExpressionStatement(t,e,s){if("Identifier"===e.type)if("declare"===e.name){if(this.match(80)||U(this.state.type)||this.match(68)||this.match(74)||this.match(82))return this.flowParseDeclare(t)}else if(U(this.state.type)){if("interface"===e.name)return this.flowParseInterface(t);if("type"===e.name)return this.flowParseTypeAlias(t);if("opaque"===e.name)return this.flowParseOpaqueType(t,!1)}return super.parseExpressionStatement(t,e,s)}shouldParseExportDeclaration(){const{type:t}=this.state;return G(t)||this.shouldParseEnums()&&126===t?!this.state.containsEsc:super.shouldParseExportDeclaration()}isExportDefaultSpecifier(){const{type:t}=this.state;return G(t)||this.shouldParseEnums()&&126===t?this.state.containsEsc:super.isExportDefaultSpecifier()}parseExportDefaultExpression(){if(this.shouldParseEnums()&&this.isContextual(126)){const t=this.startNode();return this.next(),this.flowParseEnumDeclaration(t)}return super.parseExportDefaultExpression()}parseConditional(t,e,s){if(!this.match(17))return t;if(this.state.maybeInArrowParameters){const e=this.lookaheadCharCode();if(44===e||61===e||58===e||41===e)return this.setOptionalParametersError(s),t}this.expect(17);const i=this.state.clone(),r=this.state.noArrowAt,n=this.startNodeAt(e);let{consequent:a,failed:o}=this.tryParseConditionalConsequent(),[h,c]=this.getArrowLikeExpressions(a);if(o||c.length>0){const t=[...r];if(c.length>0){this.state=i,this.state.noArrowAt=t;for(let e=0;e<c.length;e++)t.push(c[e].start);({consequent:a,failed:o}=this.tryParseConditionalConsequent()),[h,c]=this.getArrowLikeExpressions(a)}o&&h.length>1&&this.raise(ce.AmbiguousConditionalArrow,{at:i.startLoc}),o&&1===h.length&&(this.state=i,t.push(h[0].start),this.state.noArrowAt=t,({consequent:a,failed:o}=this.tryParseConditionalConsequent()))}return this.getArrowLikeExpressions(a,!0),this.state.noArrowAt=r,this.expect(14),n.test=t,n.consequent=a,n.alternate=this.forwardNoArrowParamsConversionAt(n,(()=>this.parseMaybeAssign(void 0,void 0))),this.finishNode(n,"ConditionalExpression")}tryParseConditionalConsequent(){this.state.noArrowParamsConversionAt.push(this.state.start);const t=this.parseMaybeAssignAllowIn(),e=!this.match(14);return this.state.noArrowParamsConversionAt.pop(),{consequent:t,failed:e}}getArrowLikeExpressions(t,e){const s=[t],i=[];for(;0!==s.length;){const t=s.pop();"ArrowFunctionExpression"===t.type?(t.typeParameters||!t.returnType?this.finishArrowValidation(t):i.push(t),s.push(t.body)):"ConditionalExpression"===t.type&&(s.push(t.consequent),s.push(t.alternate))}return e?(i.forEach((t=>this.finishArrowValidation(t))),[i,[]]):function(t,e){const s=[],i=[];for(let r=0;r<t.length;r++)(e(t[r])?s:i).push(t[r]);return[s,i]}(i,(t=>t.params.every((t=>this.isAssignable(t,!0)))))}finishArrowValidation(t){var e;this.toAssignableList(t.params,null==(e=t.extra)?void 0:e.trailingCommaLoc,!1),this.scope.enter(6),super.checkParams(t,!1,!0),this.scope.exit()}forwardNoArrowParamsConversionAt(t,e){let s;return-1!==this.state.noArrowParamsConversionAt.indexOf(t.start)?(this.state.noArrowParamsConversionAt.push(this.state.start),s=e(),this.state.noArrowParamsConversionAt.pop()):s=e(),s}parseParenItem(t,e){if(t=super.parseParenItem(t,e),this.eat(17)&&(t.optional=!0,this.resetEndLocation(t)),this.match(14)){const s=this.startNodeAt(e);return s.expression=t,s.typeAnnotation=this.flowParseTypeAnnotation(),this.finishNode(s,"TypeCastExpression")}return t}assertModuleNodeAllowed(t){"ImportDeclaration"===t.type&&("type"===t.importKind||"typeof"===t.importKind)||"ExportNamedDeclaration"===t.type&&"type"===t.exportKind||"ExportAllDeclaration"===t.type&&"type"===t.exportKind||super.assertModuleNodeAllowed(t)}parseExportDeclaration(t){if(this.isContextual(130)){t.exportKind="type";const e=this.startNode();return this.next(),this.match(5)?(t.specifiers=this.parseExportSpecifiers(!0),super.parseExportFrom(t),null):this.flowParseTypeAlias(e)}if(this.isContextual(131)){t.exportKind="type";const e=this.startNode();return this.next(),this.flowParseOpaqueType(e,!1)}if(this.isContextual(129)){t.exportKind="type";const e=this.startNode();return this.next(),this.flowParseInterface(e)}if(this.shouldParseEnums()&&this.isContextual(126)){t.exportKind="value";const e=this.startNode();return this.next(),this.flowParseEnumDeclaration(e)}return super.parseExportDeclaration(t)}eatExportStar(t){return!!super.eatExportStar(t)||!(!this.isContextual(130)||55!==this.lookahead().type)&&(t.exportKind="type",this.next(),this.next(),!0)}maybeParseExportNamespaceSpecifier(t){const{startLoc:e}=this.state,s=super.maybeParseExportNamespaceSpecifier(t);return s&&"type"===t.exportKind&&this.unexpected(e),s}parseClassId(t,e,s){super.parseClassId(t,e,s),this.match(47)&&(t.typeParameters=this.flowParseTypeParameterDeclaration())}parseClassMember(t,e,s){const{startLoc:i}=this.state;if(this.isContextual(125)){if(super.parseClassMemberFromModifier(t,e))return;e.declare=!0}super.parseClassMember(t,e,s),e.declare&&("ClassProperty"!==e.type&&"ClassPrivateProperty"!==e.type&&"PropertyDefinition"!==e.type?this.raise(ce.DeclareClassElement,{at:i}):e.value&&this.raise(ce.DeclareClassFieldInitializer,{at:e.value}))}isIterator(t){return"iterator"===t||"asyncIterator"===t}readIterator(){const t=super.readWord1(),e="@@"+t;this.isIterator(t)&&this.state.inType||this.raise(g.InvalidIdentifier,{at:this.state.curPosition(),identifierName:e}),this.finishToken(132,e)}getTokenFromCode(t){const e=this.input.charCodeAt(this.state.pos+1);123===t&&124===e?this.finishOp(6,2):!this.state.inType||62!==t&&60!==t?this.state.inType&&63===t?46===e?this.finishOp(18,2):this.finishOp(17,1):function(t,e,s){return 64===t&&64===e&&at(s)}(t,e,this.input.charCodeAt(this.state.pos+2))?(this.state.pos+=2,this.readIterator()):super.getTokenFromCode(t):this.finishOp(62===t?48:47,1)}isAssignable(t,e){return"TypeCastExpression"===t.type?this.isAssignable(t.expression,e):super.isAssignable(t,e)}toAssignable(t,e=!1){e||"AssignmentExpression"!==t.type||"TypeCastExpression"!==t.left.type||(t.left=this.typeCastToParameter(t.left)),super.toAssignable(t,e)}toAssignableList(t,e,s){for(let e=0;e<t.length;e++){const s=t[e];"TypeCastExpression"===(null==s?void 0:s.type)&&(t[e]=this.typeCastToParameter(s))}super.toAssignableList(t,e,s)}toReferencedList(t,e){for(let i=0;i<t.length;i++){var s;const r=t[i];!r||"TypeCastExpression"!==r.type||null!=(s=r.extra)&&s.parenthesized||!(t.length>1)&&e||this.raise(ce.TypeCastInPattern,{at:r.typeAnnotation})}return t}parseArrayLike(t,e,s,i){const r=super.parseArrayLike(t,e,s,i);return e&&!this.state.maybeInArrowParameters&&this.toReferencedList(r.elements),r}isValidLVal(t,e,s){return"TypeCastExpression"===t||super.isValidLVal(t,e,s)}parseClassProperty(t){return this.match(14)&&(t.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassProperty(t)}parseClassPrivateProperty(t){return this.match(14)&&(t.typeAnnotation=this.flowParseTypeAnnotation()),super.parseClassPrivateProperty(t)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(14)||super.isClassProperty()}isNonstaticConstructor(t){return!this.match(14)&&super.isNonstaticConstructor(t)}pushClassMethod(t,e,s,i,r,n){if(e.variance&&this.unexpected(e.variance.loc.start),delete e.variance,this.match(47)&&(e.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassMethod(t,e,s,i,r,n),e.params&&r){const t=e.params;t.length>0&&this.isThisParam(t[0])&&this.raise(ce.ThisParamBannedInConstructor,{at:e})}else if("MethodDefinition"===e.type&&r&&e.value.params){const t=e.value.params;t.length>0&&this.isThisParam(t[0])&&this.raise(ce.ThisParamBannedInConstructor,{at:e})}}pushClassPrivateMethod(t,e,s,i){e.variance&&this.unexpected(e.variance.loc.start),delete e.variance,this.match(47)&&(e.typeParameters=this.flowParseTypeParameterDeclaration()),super.pushClassPrivateMethod(t,e,s,i)}parseClassSuper(t){if(super.parseClassSuper(t),t.superClass&&this.match(47)&&(t.superTypeParameters=this.flowParseTypeParameterInstantiation()),this.isContextual(113)){this.next();const e=t.implements=[];do{const t=this.startNode();t.id=this.flowParseRestrictedIdentifier(!0),this.match(47)?t.typeParameters=this.flowParseTypeParameterInstantiation():t.typeParameters=null,e.push(this.finishNode(t,"ClassImplements"))}while(this.eat(12))}}checkGetterSetterParams(t){super.checkGetterSetterParams(t);const e=this.getObjectOrClassMethodParams(t);if(e.length>0){const s=e[0];this.isThisParam(s)&&"get"===t.kind?this.raise(ce.GetterMayNotHaveThisParam,{at:s}):this.isThisParam(s)&&this.raise(ce.SetterMayNotHaveThisParam,{at:s})}}parsePropertyNamePrefixOperator(t){t.variance=this.flowParseVariance()}parseObjPropValue(t,e,s,i,r,n,a){let o;t.variance&&this.unexpected(t.variance.loc.start),delete t.variance,this.match(47)&&!n&&(o=this.flowParseTypeParameterDeclaration(),this.match(10)||this.unexpected());const h=super.parseObjPropValue(t,e,s,i,r,n,a);return o&&((h.value||h).typeParameters=o),h}parseAssignableListItemTypes(t){return this.eat(17)&&("Identifier"!==t.type&&this.raise(ce.PatternIsOptional,{at:t}),this.isThisParam(t)&&this.raise(ce.ThisParamMayNotBeOptional,{at:t}),t.optional=!0),this.match(14)?t.typeAnnotation=this.flowParseTypeAnnotation():this.isThisParam(t)&&this.raise(ce.ThisParamAnnotationRequired,{at:t}),this.match(29)&&this.isThisParam(t)&&this.raise(ce.ThisParamNoDefault,{at:t}),this.resetEndLocation(t),t}parseMaybeDefault(t,e){const s=super.parseMaybeDefault(t,e);return"AssignmentPattern"===s.type&&s.typeAnnotation&&s.right.start<s.typeAnnotation.start&&this.raise(ce.TypeBeforeInitializer,{at:s.typeAnnotation}),s}checkImportReflection(t){super.checkImportReflection(t),t.module&&"value"!==t.importKind&&this.raise(ce.ImportReflectionHasImportType,{at:t.specifiers[0].loc.start})}parseImportSpecifierLocal(t,e,s){e.local=le(t)?this.flowParseRestrictedIdentifier(!0,!0):this.parseIdentifier(),t.specifiers.push(this.finishImportSpecifier(e,s))}isPotentialImportPhase(t){if(super.isPotentialImportPhase(t))return!0;if(this.isContextual(130)){if(!t)return!0;const e=this.lookaheadCharCode();return 123===e||42===e}return!t&&this.isContextual(87)}applyImportPhase(t,e,s,i){if(super.applyImportPhase(t,e,s,i),e){if(!s&&this.match(65))return;t.exportKind="type"===s?s:"value"}else"type"===s&&this.match(55)&&this.unexpected(),t.importKind="type"===s||"typeof"===s?s:"value"}parseImportSpecifier(t,e,s,i,r){const n=t.imported;let a=null;"Identifier"===n.type&&("type"===n.name?a="type":"typeof"===n.name&&(a="typeof"));let o=!1;if(this.isContextual(93)&&!this.isLookaheadContextual("as")){const e=this.parseIdentifier(!0);null===a||z(this.state.type)?(t.imported=n,t.importKind=null,t.local=this.parseIdentifier()):(t.imported=e,t.importKind=a,t.local=ae(e))}else{if(null!==a&&z(this.state.type))t.imported=this.parseIdentifier(!0),t.importKind=a;else{if(e)throw this.raise(g.ImportBindingIsString,{at:t,importName:n.value});t.imported=n,t.importKind=null}this.eatContextual(93)?t.local=this.parseIdentifier():(o=!0,t.local=ae(t.imported))}const h=le(t);return s&&h&&this.raise(ce.ImportTypeShorthandOnlyInPureImport,{at:t}),(s||h)&&this.checkReservedType(t.local.name,t.local.loc.start,!0),!o||s||h||this.checkReservedWord(t.local.name,t.loc.start,!0,!0),this.finishImportSpecifier(t,"ImportSpecifier")}parseBindingAtom(){return 78===this.state.type?this.parseIdentifier(!0):super.parseBindingAtom()}parseFunctionParams(t,e){const s=t.kind;"get"!==s&&"set"!==s&&this.match(47)&&(t.typeParameters=this.flowParseTypeParameterDeclaration()),super.parseFunctionParams(t,e)}parseVarId(t,e){super.parseVarId(t,e),this.match(14)&&(t.id.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(t.id))}parseAsyncArrowFromCallExpression(t,e){if(this.match(14)){const e=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0,t.returnType=this.flowParseTypeAnnotation(),this.state.noAnonFunctionType=e}return super.parseAsyncArrowFromCallExpression(t,e)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}parseMaybeAssign(t,e){var s;let i,r=null;if(this.hasPlugin("jsx")&&(this.match(142)||this.match(47))){if(r=this.state.clone(),i=this.tryParse((()=>super.parseMaybeAssign(t,e)),r),!i.error)return i.node;const{context:s}=this.state,n=s[s.length-1];n!==N.j_oTag&&n!==N.j_expr||s.pop()}if(null!=(s=i)&&s.error||this.match(47)){var n,a;let s;r=r||this.state.clone();const o=this.tryParse((i=>{var r;s=this.flowParseTypeParameterDeclaration();const n=this.forwardNoArrowParamsConversionAt(s,(()=>{const i=super.parseMaybeAssign(t,e);return this.resetStartLocationFromNode(i,s),i}));null!=(r=n.extra)&&r.parenthesized&&i();const a=this.maybeUnwrapTypeCastExpression(n);return"ArrowFunctionExpression"!==a.type&&i(),a.typeParameters=s,this.resetStartLocationFromNode(a,s),n}),r);let h=null;if(o.node&&"ArrowFunctionExpression"===this.maybeUnwrapTypeCastExpression(o.node).type){if(!o.error&&!o.aborted)return o.node.async&&this.raise(ce.UnexpectedTypeParameterBeforeAsyncArrowFunction,{at:s}),o.node;h=o.node}if(null!=(n=i)&&n.node)return this.state=i.failState,i.node;if(h)return this.state=o.failState,h;if(null!=(a=i)&&a.thrown)throw i.error;if(o.thrown)throw o.error;throw this.raise(ce.UnexpectedTokenAfterTypeParameter,{at:s})}return super.parseMaybeAssign(t,e)}parseArrow(t){if(this.match(14)){const e=this.tryParse((()=>{const e=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0;const s=this.startNode();return[s.typeAnnotation,t.predicate]=this.flowParseTypeAndPredicateInitialiser(),this.state.noAnonFunctionType=e,this.canInsertSemicolon()&&this.unexpected(),this.match(19)||this.unexpected(),s}));if(e.thrown)return null;e.error&&(this.state=e.failState),t.returnType=e.node.typeAnnotation?this.finishNode(e.node,"TypeAnnotation"):null}return super.parseArrow(t)}shouldParseArrow(t){return this.match(14)||super.shouldParseArrow(t)}setArrowFunctionParameters(t,e){-1!==this.state.noArrowParamsConversionAt.indexOf(t.start)?t.params=e:super.setArrowFunctionParameters(t,e)}checkParams(t,e,s,i=!0){if(!s||-1===this.state.noArrowParamsConversionAt.indexOf(t.start)){for(let e=0;e<t.params.length;e++)this.isThisParam(t.params[e])&&e>0&&this.raise(ce.ThisParamMustBeFirst,{at:t.params[e]});super.checkParams(t,e,s,i)}}parseParenAndDistinguishExpression(t){return super.parseParenAndDistinguishExpression(t&&-1===this.state.noArrowAt.indexOf(this.state.start))}parseSubscripts(t,e,s){if("Identifier"===t.type&&"async"===t.name&&-1!==this.state.noArrowAt.indexOf(e.index)){this.next();const s=this.startNodeAt(e);s.callee=t,s.arguments=super.parseCallExpressionArguments(11,!1),t=this.finishNode(s,"CallExpression")}else if("Identifier"===t.type&&"async"===t.name&&this.match(47)){const i=this.state.clone(),r=this.tryParse((t=>this.parseAsyncArrowWithTypeParameters(e)||t()),i);if(!r.error&&!r.aborted)return r.node;const n=this.tryParse((()=>super.parseSubscripts(t,e,s)),i);if(n.node&&!n.error)return n.node;if(r.node)return this.state=r.failState,r.node;if(n.node)return this.state=n.failState,n.node;throw r.error||n.error}return super.parseSubscripts(t,e,s)}parseSubscript(t,e,s,i){if(this.match(18)&&this.isLookaheadToken_lt()){if(i.optionalChainMember=!0,s)return i.stop=!0,t;this.next();const r=this.startNodeAt(e);return r.callee=t,r.typeArguments=this.flowParseTypeParameterInstantiation(),this.expect(10),r.arguments=this.parseCallExpressionArguments(11,!1),r.optional=!0,this.finishCallExpression(r,!0)}if(!s&&this.shouldParseTypes()&&this.match(47)){const s=this.startNodeAt(e);s.callee=t;const r=this.tryParse((()=>(s.typeArguments=this.flowParseTypeParameterInstantiationCallOrNew(),this.expect(10),s.arguments=super.parseCallExpressionArguments(11,!1),i.optionalChainMember&&(s.optional=!1),this.finishCallExpression(s,i.optionalChainMember))));if(r.node)return r.error&&(this.state=r.failState),r.node}return super.parseSubscript(t,e,s,i)}parseNewCallee(t){super.parseNewCallee(t);let e=null;this.shouldParseTypes()&&this.match(47)&&(e=this.tryParse((()=>this.flowParseTypeParameterInstantiationCallOrNew())).node),t.typeArguments=e}parseAsyncArrowWithTypeParameters(t){const e=this.startNodeAt(t);if(this.parseFunctionParams(e,!1),this.parseArrow(e))return super.parseArrowExpression(e,void 0,!0)}readToken_mult_modulo(t){const e=this.input.charCodeAt(this.state.pos+1);if(42===t&&47===e&&this.state.hasFlowComment)return this.state.hasFlowComment=!1,this.state.pos+=2,void this.nextToken();super.readToken_mult_modulo(t)}readToken_pipe_amp(t){const e=this.input.charCodeAt(this.state.pos+1);124!==t||125!==e?super.readToken_pipe_amp(t):this.finishOp(9,2)}parseTopLevel(t,e){const s=super.parseTopLevel(t,e);return this.state.hasFlowComment&&this.raise(ce.UnterminatedFlowComment,{at:this.state.curPosition()}),s}skipBlockComment(){if(!this.hasPlugin("flowComments")||!this.skipFlowComment())return super.skipBlockComment(this.state.hasFlowComment?"*-/":"*/");{if(this.state.hasFlowComment)throw this.raise(ce.NestedFlowComment,{at:this.state.startLoc});this.hasFlowCommentCompletion();const t=this.skipFlowComment();t&&(this.state.pos+=t,this.state.hasFlowComment=!0)}}skipFlowComment(){const{pos:t}=this.state;let e=2;for(;[32,9].includes(this.input.charCodeAt(t+e));)e++;const s=this.input.charCodeAt(e+t),i=this.input.charCodeAt(e+t+1);return 58===s&&58===i?e+2:"flow-include"===this.input.slice(e+t,e+t+12)?e+12:58===s&&58!==i&&e}hasFlowCommentCompletion(){if(-1===this.input.indexOf("*/",this.state.pos))throw this.raise(g.UnterminatedComment,{at:this.state.curPosition()})}flowEnumErrorBooleanMemberNotInitialized(t,{enumName:e,memberName:s}){this.raise(ce.EnumBooleanMemberNotInitialized,{at:t,memberName:s,enumName:e})}flowEnumErrorInvalidMemberInitializer(t,e){return this.raise(e.explicitType?"symbol"===e.explicitType?ce.EnumInvalidMemberInitializerSymbolType:ce.EnumInvalidMemberInitializerPrimaryType:ce.EnumInvalidMemberInitializerUnknownType,Object.assign({at:t},e))}flowEnumErrorNumberMemberNotInitialized(t,{enumName:e,memberName:s}){this.raise(ce.EnumNumberMemberNotInitialized,{at:t,enumName:e,memberName:s})}flowEnumErrorStringMemberInconsistentlyInitialized(t,{enumName:e}){this.raise(ce.EnumStringMemberInconsistentlyInitialized,{at:t,enumName:e})}flowEnumMemberInit(){const t=this.state.startLoc,e=()=>this.match(12)||this.match(8);switch(this.state.type){case 134:{const s=this.parseNumericLiteral(this.state.value);return e()?{type:"number",loc:s.loc.start,value:s}:{type:"invalid",loc:t}}case 133:{const s=this.parseStringLiteral(this.state.value);return e()?{type:"string",loc:s.loc.start,value:s}:{type:"invalid",loc:t}}case 85:case 86:{const s=this.parseBooleanLiteral(this.match(85));return e()?{type:"boolean",loc:s.loc.start,value:s}:{type:"invalid",loc:t}}default:return{type:"invalid",loc:t}}}flowEnumMemberRaw(){const t=this.state.startLoc;return{id:this.parseIdentifier(!0),init:this.eat(29)?this.flowEnumMemberInit():{type:"none",loc:t}}}flowEnumCheckExplicitTypeMismatch(t,e,s){const{explicitType:i}=e;null!==i&&i!==s&&this.flowEnumErrorInvalidMemberInitializer(t,e)}flowEnumMembers({enumName:t,explicitType:e}){const s=new Set,i={booleanMembers:[],numberMembers:[],stringMembers:[],defaultedMembers:[]};let r=!1;for(;!this.match(8);){if(this.eat(21)){r=!0;break}const n=this.startNode(),{id:a,init:o}=this.flowEnumMemberRaw(),h=a.name;if(""===h)continue;/^[a-z]/.test(h)&&this.raise(ce.EnumInvalidMemberName,{at:a,memberName:h,suggestion:h[0].toUpperCase()+h.slice(1),enumName:t}),s.has(h)&&this.raise(ce.EnumDuplicateMemberName,{at:a,memberName:h,enumName:t}),s.add(h);const c={enumName:t,explicitType:e,memberName:h};switch(n.id=a,o.type){case"boolean":this.flowEnumCheckExplicitTypeMismatch(o.loc,c,"boolean"),n.init=o.value,i.booleanMembers.push(this.finishNode(n,"EnumBooleanMember"));break;case"number":this.flowEnumCheckExplicitTypeMismatch(o.loc,c,"number"),n.init=o.value,i.numberMembers.push(this.finishNode(n,"EnumNumberMember"));break;case"string":this.flowEnumCheckExplicitTypeMismatch(o.loc,c,"string"),n.init=o.value,i.stringMembers.push(this.finishNode(n,"EnumStringMember"));break;case"invalid":throw this.flowEnumErrorInvalidMemberInitializer(o.loc,c);case"none":switch(e){case"boolean":this.flowEnumErrorBooleanMemberNotInitialized(o.loc,c);break;case"number":this.flowEnumErrorNumberMemberNotInitialized(o.loc,c);break;default:i.defaultedMembers.push(this.finishNode(n,"EnumDefaultedMember"))}}this.match(8)||this.expect(12)}return{members:i,hasUnknownMembers:r}}flowEnumStringMembers(t,e,{enumName:s}){if(0===t.length)return e;if(0===e.length)return t;if(e.length>t.length){for(const e of t)this.flowEnumErrorStringMemberInconsistentlyInitialized(e,{enumName:s});return e}for(const t of e)this.flowEnumErrorStringMemberInconsistentlyInitialized(t,{enumName:s});return t}flowEnumParseExplicitType({enumName:t}){if(!this.eatContextual(102))return null;if(!U(this.state.type))throw this.raise(ce.EnumInvalidExplicitTypeUnknownSupplied,{at:this.state.startLoc,enumName:t});const{value:e}=this.state;return this.next(),"boolean"!==e&&"number"!==e&&"string"!==e&&"symbol"!==e&&this.raise(ce.EnumInvalidExplicitType,{at:this.state.startLoc,enumName:t,invalidEnumType:e}),e}flowEnumBody(t,e){const s=e.name,i=e.loc.start,r=this.flowEnumParseExplicitType({enumName:s});this.expect(5);const{members:n,hasUnknownMembers:a}=this.flowEnumMembers({enumName:s,explicitType:r});switch(t.hasUnknownMembers=a,r){case"boolean":return t.explicitType=!0,t.members=n.booleanMembers,this.expect(8),this.finishNode(t,"EnumBooleanBody");case"number":return t.explicitType=!0,t.members=n.numberMembers,this.expect(8),this.finishNode(t,"EnumNumberBody");case"string":return t.explicitType=!0,t.members=this.flowEnumStringMembers(n.stringMembers,n.defaultedMembers,{enumName:s}),this.expect(8),this.finishNode(t,"EnumStringBody");case"symbol":return t.members=n.defaultedMembers,this.expect(8),this.finishNode(t,"EnumSymbolBody");default:{const e=()=>(t.members=[],this.expect(8),this.finishNode(t,"EnumStringBody"));t.explicitType=!1;const r=n.booleanMembers.length,a=n.numberMembers.length,o=n.stringMembers.length,h=n.defaultedMembers.length;if(r||a||o||h){if(r||a){if(!a&&!o&&r>=h){for(const t of n.defaultedMembers)this.flowEnumErrorBooleanMemberNotInitialized(t.loc.start,{enumName:s,memberName:t.id.name});return t.members=n.booleanMembers,this.expect(8),this.finishNode(t,"EnumBooleanBody")}if(!r&&!o&&a>=h){for(const t of n.defaultedMembers)this.flowEnumErrorNumberMemberNotInitialized(t.loc.start,{enumName:s,memberName:t.id.name});return t.members=n.numberMembers,this.expect(8),this.finishNode(t,"EnumNumberBody")}return this.raise(ce.EnumInconsistentMemberValues,{at:i,enumName:s}),e()}return t.members=this.flowEnumStringMembers(n.stringMembers,n.defaultedMembers,{enumName:s}),this.expect(8),this.finishNode(t,"EnumStringBody")}return e()}}}flowParseEnumDeclaration(t){const e=this.parseIdentifier();return t.id=e,t.body=this.flowEnumBody(this.startNode(),e),this.finishNode(t,"EnumDeclaration")}isLookaheadToken_lt(){const t=this.nextTokenStart();if(60===this.input.charCodeAt(t)){const e=this.input.charCodeAt(t+1);return 60!==e&&61!==e}return!1}maybeUnwrapTypeCastExpression(t){return"TypeCastExpression"===t.type?t.expression:t}},typescript:t=>class extends t{constructor(...t){super(...t),this.tsParseInOutModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out"],disallowedModifiers:["const","public","private","protected","readonly","declare","abstract","override"],errorTemplate:Te.InvalidModifierOnTypeParameter}),this.tsParseConstModifier=this.tsParseModifiers.bind(this,{allowedModifiers:["const"],disallowedModifiers:["in","out"],errorTemplate:Te.InvalidModifierOnTypeParameterPositions}),this.tsParseInOutConstModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out","const"],disallowedModifiers:["public","private","protected","readonly","declare","abstract","override"],errorTemplate:Te.InvalidModifierOnTypeParameter})}getScopeHandler(){return ge}tsIsIdentifier(){return U(this.state.type)}tsTokenCanFollowModifier(){return(this.match(0)||this.match(5)||this.match(55)||this.match(21)||this.match(138)||this.isLiteralPropertyName())&&!this.hasPrecedingLineBreak()}tsNextTokenCanFollowModifier(){return this.next(),this.tsTokenCanFollowModifier()}tsParseModifier(t,e){if(!U(this.state.type)&&58!==this.state.type&&75!==this.state.type)return;const s=this.state.value;if(-1!==t.indexOf(s)){if(e&&this.tsIsStartOfStaticBlocks())return;if(this.tsTryParse(this.tsNextTokenCanFollowModifier.bind(this)))return s}}tsParseModifiers({allowedModifiers:t,disallowedModifiers:e,stopOnStartOfClassStaticBlock:s,errorTemplate:i=Te.InvalidModifierOnTypeMember},r){const n=(t,e,s,i)=>{e===s&&r[i]&&this.raise(Te.InvalidModifiersOrder,{at:t,orderedModifiers:[s,i]})},a=(t,e,s,i)=>{(r[s]&&e===i||r[i]&&e===s)&&this.raise(Te.IncompatibleModifiers,{at:t,modifiers:[s,i]})};for(;;){const{startLoc:o}=this.state,h=this.tsParseModifier(t.concat(null!=e?e:[]),s);if(!h)break;Ne(h)?r.accessibility?this.raise(Te.DuplicateAccessibilityModifier,{at:o,modifier:h}):(n(o,h,h,"override"),n(o,h,h,"static"),n(o,h,h,"readonly"),r.accessibility=h):Ce(h)?(r[h]&&this.raise(Te.DuplicateModifier,{at:o,modifier:h}),r[h]=!0,n(o,h,"in","out")):(Object.hasOwnProperty.call(r,h)?this.raise(Te.DuplicateModifier,{at:o,modifier:h}):(n(o,h,"static","readonly"),n(o,h,"static","override"),n(o,h,"override","readonly"),n(o,h,"abstract","override"),a(o,h,"declare","override"),a(o,h,"static","abstract")),r[h]=!0),null!=e&&e.includes(h)&&this.raise(i,{at:o,modifier:h})}}tsIsListTerminator(t){switch(t){case"EnumMembers":case"TypeMembers":return this.match(8);case"HeritageClauseElement":return this.match(5);case"TupleElementTypes":return this.match(3);case"TypeParametersOrArguments":return this.match(48)}}tsParseList(t,e){const s=[];for(;!this.tsIsListTerminator(t);)s.push(e());return s}tsParseDelimitedList(t,e,s){return function(t){if(null==t)throw new Error(`Unexpected ${t} value.`);return t}(this.tsParseDelimitedListWorker(t,e,!0,s))}tsParseDelimitedListWorker(t,e,s,i){const r=[];let n=-1;for(;!this.tsIsListTerminator(t);){n=-1;const i=e();if(null==i)return;if(r.push(i),!this.eat(12)){if(this.tsIsListTerminator(t))break;return void(s&&this.expect(12))}n=this.state.lastTokStart}return i&&(i.value=n),r}tsParseBracketedList(t,e,s,i,r){i||(s?this.expect(0):this.expect(47));const n=this.tsParseDelimitedList(t,e,r);return s?this.expect(3):this.expect(48),n}tsParseImportType(){const t=this.startNode();return this.expect(83),this.expect(10),this.match(133)||this.raise(Te.UnsupportedImportTypeArgument,{at:this.state.startLoc}),t.argument=super.parseExprAtom(),this.expect(11),this.eat(16)&&(t.qualifier=this.tsParseEntityName()),this.match(47)&&(t.typeParameters=this.tsParseTypeArguments()),this.finishNode(t,"TSImportType")}tsParseEntityName(t=!0){let e=this.parseIdentifier(t);for(;this.eat(16);){const s=this.startNodeAtNode(e);s.left=e,s.right=this.parseIdentifier(t),e=this.finishNode(s,"TSQualifiedName")}return e}tsParseTypeReference(){const t=this.startNode();return t.typeName=this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.match(47)&&(t.typeParameters=this.tsParseTypeArguments()),this.finishNode(t,"TSTypeReference")}tsParseThisTypePredicate(t){this.next();const e=this.startNodeAtNode(t);return e.parameterName=t,e.typeAnnotation=this.tsParseTypeAnnotation(!1),e.asserts=!1,this.finishNode(e,"TSTypePredicate")}tsParseThisTypeNode(){const t=this.startNode();return this.next(),this.finishNode(t,"TSThisType")}tsParseTypeQuery(){const t=this.startNode();return this.expect(87),this.match(83)?t.exprName=this.tsParseImportType():t.exprName=this.tsParseEntityName(),!this.hasPrecedingLineBreak()&&this.match(47)&&(t.typeParameters=this.tsParseTypeArguments()),this.finishNode(t,"TSTypeQuery")}tsParseTypeParameter(t){const e=this.startNode();return t(e),e.name=this.tsParseTypeParameterName(),e.constraint=this.tsEatThenParseType(81),e.default=this.tsEatThenParseType(29),this.finishNode(e,"TSTypeParameter")}tsTryParseTypeParameters(t){if(this.match(47))return this.tsParseTypeParameters(t)}tsParseTypeParameters(t){const e=this.startNode();this.match(47)||this.match(142)?this.next():this.unexpected();const s={value:-1};return e.params=this.tsParseBracketedList("TypeParametersOrArguments",this.tsParseTypeParameter.bind(this,t),!1,!0,s),0===e.params.length&&this.raise(Te.EmptyTypeParameters,{at:e}),-1!==s.value&&this.addExtra(e,"trailingComma",s.value),this.finishNode(e,"TSTypeParameterDeclaration")}tsFillSignature(t,e){const s=19===t;e.typeParameters=this.tsTryParseTypeParameters(this.tsParseConstModifier),this.expect(10),e.parameters=this.tsParseBindingListForSignature(),(s||this.match(t))&&(e.typeAnnotation=this.tsParseTypeOrTypePredicateAnnotation(t))}tsParseBindingListForSignature(){const t=super.parseBindingList(11,41,2);for(const e of t){const{type:t}=e;"AssignmentPattern"!==t&&"TSParameterProperty"!==t||this.raise(Te.UnsupportedSignatureParameterKind,{at:e,type:t})}return t}tsParseTypeMemberSemicolon(){this.eat(12)||this.isLineTerminator()||this.expect(13)}tsParseSignatureMember(t,e){return this.tsFillSignature(14,e),this.tsParseTypeMemberSemicolon(),this.finishNode(e,t)}tsIsUnambiguouslyIndexSignature(){return this.next(),!!U(this.state.type)&&(this.next(),this.match(14))}tsTryParseIndexSignature(t){if(!this.match(0)||!this.tsLookAhead(this.tsIsUnambiguouslyIndexSignature.bind(this)))return;this.expect(0);const e=this.parseIdentifier();e.typeAnnotation=this.tsParseTypeAnnotation(),this.resetEndLocation(e),this.expect(3),t.parameters=[e];const s=this.tsTryParseTypeAnnotation();return s&&(t.typeAnnotation=s),this.tsParseTypeMemberSemicolon(),this.finishNode(t,"TSIndexSignature")}tsParsePropertyOrMethodSignature(t,e){this.eat(17)&&(t.optional=!0);const s=t;if(this.match(10)||this.match(47)){e&&this.raise(Te.ReadonlyForMethodSignature,{at:t});const i=s;i.kind&&this.match(47)&&this.raise(Te.AccesorCannotHaveTypeParameters,{at:this.state.curPosition()}),this.tsFillSignature(14,i),this.tsParseTypeMemberSemicolon();const r="parameters",n="typeAnnotation";if("get"===i.kind)i[r].length>0&&(this.raise(g.BadGetterArity,{at:this.state.curPosition()}),this.isThisParam(i[r][0])&&this.raise(Te.AccesorCannotDeclareThisParameter,{at:this.state.curPosition()}));else if("set"===i.kind){if(1!==i[r].length)this.raise(g.BadSetterArity,{at:this.state.curPosition()});else{const t=i[r][0];this.isThisParam(t)&&this.raise(Te.AccesorCannotDeclareThisParameter,{at:this.state.curPosition()}),"Identifier"===t.type&&t.optional&&this.raise(Te.SetAccesorCannotHaveOptionalParameter,{at:this.state.curPosition()}),"RestElement"===t.type&&this.raise(Te.SetAccesorCannotHaveRestParameter,{at:this.state.curPosition()})}i[n]&&this.raise(Te.SetAccesorCannotHaveReturnType,{at:i[n]})}else i.kind="method";return this.finishNode(i,"TSMethodSignature")}{const t=s;e&&(t.readonly=!0);const i=this.tsTryParseTypeAnnotation();return i&&(t.typeAnnotation=i),this.tsParseTypeMemberSemicolon(),this.finishNode(t,"TSPropertySignature")}}tsParseTypeMember(){const t=this.startNode();if(this.match(10)||this.match(47))return this.tsParseSignatureMember("TSCallSignatureDeclaration",t);if(this.match(77)){const e=this.startNode();return this.next(),this.match(10)||this.match(47)?this.tsParseSignatureMember("TSConstructSignatureDeclaration",t):(t.key=this.createIdentifier(e,"new"),this.tsParsePropertyOrMethodSignature(t,!1))}this.tsParseModifiers({allowedModifiers:["readonly"],disallowedModifiers:["declare","abstract","private","protected","public","static","override"]},t);return this.tsTryParseIndexSignature(t)||(super.parsePropertyName(t),t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||!this.tsTokenCanFollowModifier()||(t.kind=t.key.name,super.parsePropertyName(t)),this.tsParsePropertyOrMethodSignature(t,!!t.readonly))}tsParseTypeLiteral(){const t=this.startNode();return t.members=this.tsParseObjectTypeMembers(),this.finishNode(t,"TSTypeLiteral")}tsParseObjectTypeMembers(){this.expect(5);const t=this.tsParseList("TypeMembers",this.tsParseTypeMember.bind(this));return this.expect(8),t}tsIsStartOfMappedType(){return this.next(),this.eat(53)?this.isContextual(122):(this.isContextual(122)&&this.next(),!!this.match(0)&&(this.next(),!!this.tsIsIdentifier()&&(this.next(),this.match(58))))}tsParseMappedTypeParameter(){const t=this.startNode();return t.name=this.tsParseTypeParameterName(),t.constraint=this.tsExpectThenParseType(58),this.finishNode(t,"TSTypeParameter")}tsParseMappedType(){const t=this.startNode();return this.expect(5),this.match(53)?(t.readonly=this.state.value,this.next(),this.expectContextual(122)):this.eatContextual(122)&&(t.readonly=!0),this.expect(0),t.typeParameter=this.tsParseMappedTypeParameter(),t.nameType=this.eatContextual(93)?this.tsParseType():null,this.expect(3),this.match(53)?(t.optional=this.state.value,this.next(),this.expect(17)):this.eat(17)&&(t.optional=!0),t.typeAnnotation=this.tsTryParseType(),this.semicolon(),this.expect(8),this.finishNode(t,"TSMappedType")}tsParseTupleType(){const t=this.startNode();t.elementTypes=this.tsParseBracketedList("TupleElementTypes",this.tsParseTupleElementType.bind(this),!0,!1);let e=!1;return t.elementTypes.forEach((t=>{const{type:s}=t;!e||"TSRestType"===s||"TSOptionalType"===s||"TSNamedTupleMember"===s&&t.optional||this.raise(Te.OptionalTypeBeforeRequired,{at:t}),e||(e="TSNamedTupleMember"===s&&t.optional||"TSOptionalType"===s)})),this.finishNode(t,"TSTupleType")}tsParseTupleElementType(){const{startLoc:t}=this.state,e=this.eat(21);let s,i,r,n;const a=z(this.state.type)?this.lookaheadCharCode():null;if(58===a)s=!0,r=!1,i=this.parseIdentifier(!0),this.expect(14),n=this.tsParseType();else if(63===a){r=!0;const t=this.state.startLoc,e=this.state.value,a=this.tsParseNonArrayType();58===this.lookaheadCharCode()?(s=!0,i=this.createIdentifier(this.startNodeAt(t),e),this.expect(17),this.expect(14),n=this.tsParseType()):(s=!1,n=a,this.expect(17))}else n=this.tsParseType(),r=this.eat(17),s=this.eat(14);if(s){let t;i?(t=this.startNodeAtNode(i),t.optional=r,t.label=i,t.elementType=n,this.eat(17)&&(t.optional=!0,this.raise(Te.TupleOptionalAfterType,{at:this.state.lastTokStartLoc}))):(t=this.startNodeAtNode(n),t.optional=r,this.raise(Te.InvalidTupleMemberLabel,{at:n}),t.label=n,t.elementType=this.tsParseType()),n=this.finishNode(t,"TSNamedTupleMember")}else if(r){const t=this.startNodeAtNode(n);t.typeAnnotation=n,n=this.finishNode(t,"TSOptionalType")}if(e){const e=this.startNodeAt(t);e.typeAnnotation=n,n=this.finishNode(e,"TSRestType")}return n}tsParseParenthesizedType(){const t=this.startNode();return this.expect(10),t.typeAnnotation=this.tsParseType(),this.expect(11),this.finishNode(t,"TSParenthesizedType")}tsParseFunctionOrConstructorType(t,e){const s=this.startNode();return"TSConstructorType"===t&&(s.abstract=!!e,e&&this.next(),this.next()),this.tsInAllowConditionalTypesContext((()=>this.tsFillSignature(19,s))),this.finishNode(s,t)}tsParseLiteralTypeNode(){const t=this.startNode();switch(this.state.type){case 134:case 135:case 133:case 85:case 86:t.literal=super.parseExprAtom();break;default:this.unexpected()}return this.finishNode(t,"TSLiteralType")}tsParseTemplateLiteralType(){const t=this.startNode();return t.literal=super.parseTemplate(!1),this.finishNode(t,"TSLiteralType")}parseTemplateSubstitution(){return this.state.inType?this.tsParseType():super.parseTemplateSubstitution()}tsParseThisTypeOrThisTypePredicate(){const t=this.tsParseThisTypeNode();return this.isContextual(116)&&!this.hasPrecedingLineBreak()?this.tsParseThisTypePredicate(t):t}tsParseNonArrayType(){switch(this.state.type){case 133:case 134:case 135:case 85:case 86:return this.tsParseLiteralTypeNode();case 53:if("-"===this.state.value){const t=this.startNode(),e=this.lookahead();return 134!==e.type&&135!==e.type&&this.unexpected(),t.literal=this.parseMaybeUnary(),this.finishNode(t,"TSLiteralType")}break;case 78:return this.tsParseThisTypeOrThisTypePredicate();case 87:return this.tsParseTypeQuery();case 83:return this.tsParseImportType();case 5:return this.tsLookAhead(this.tsIsStartOfMappedType.bind(this))?this.tsParseMappedType():this.tsParseTypeLiteral();case 0:return this.tsParseTupleType();case 10:return this.tsParseParenthesizedType();case 25:case 24:return this.tsParseTemplateLiteralType();default:{const{type:t}=this.state;if(U(t)||88===t||84===t){const e=88===t?"TSVoidKeyword":84===t?"TSNullKeyword":function(t){switch(t){case"any":return"TSAnyKeyword";case"boolean":return"TSBooleanKeyword";case"bigint":return"TSBigIntKeyword";case"never":return"TSNeverKeyword";case"number":return"TSNumberKeyword";case"object":return"TSObjectKeyword";case"string":return"TSStringKeyword";case"symbol":return"TSSymbolKeyword";case"undefined":return"TSUndefinedKeyword";case"unknown":return"TSUnknownKeyword";default:return}}(this.state.value);if(void 0!==e&&46!==this.lookaheadCharCode()){const t=this.startNode();return this.next(),this.finishNode(t,e)}return this.tsParseTypeReference()}}}this.unexpected()}tsParseArrayTypeOrHigher(){let t=this.tsParseNonArrayType();for(;!this.hasPrecedingLineBreak()&&this.eat(0);)if(this.match(3)){const e=this.startNodeAtNode(t);e.elementType=t,this.expect(3),t=this.finishNode(e,"TSArrayType")}else{const e=this.startNodeAtNode(t);e.objectType=t,e.indexType=this.tsParseType(),this.expect(3),t=this.finishNode(e,"TSIndexedAccessType")}return t}tsParseTypeOperator(){const t=this.startNode(),e=this.state.value;return this.next(),t.operator=e,t.typeAnnotation=this.tsParseTypeOperatorOrHigher(),"readonly"===e&&this.tsCheckTypeAnnotationForReadOnly(t),this.finishNode(t,"TSTypeOperator")}tsCheckTypeAnnotationForReadOnly(t){switch(t.typeAnnotation.type){case"TSTupleType":case"TSArrayType":return;default:this.raise(Te.UnexpectedReadonly,{at:t})}}tsParseInferType(){const t=this.startNode();this.expectContextual(115);const e=this.startNode();return e.name=this.tsParseTypeParameterName(),e.constraint=this.tsTryParse((()=>this.tsParseConstraintForInferType())),t.typeParameter=this.finishNode(e,"TSTypeParameter"),this.finishNode(t,"TSInferType")}tsParseConstraintForInferType(){if(this.eat(81)){const t=this.tsInDisallowConditionalTypesContext((()=>this.tsParseType()));if(this.state.inDisallowConditionalTypesContext||!this.match(17))return t}}tsParseTypeOperatorOrHigher(){var t;return(t=this.state.type)>=121&&t<=123&&!this.state.containsEsc?this.tsParseTypeOperator():this.isContextual(115)?this.tsParseInferType():this.tsInAllowConditionalTypesContext((()=>this.tsParseArrayTypeOrHigher()))}tsParseUnionOrIntersectionType(t,e,s){const i=this.startNode(),r=this.eat(s),n=[];do{n.push(e())}while(this.eat(s));return 1!==n.length||r?(i.types=n,this.finishNode(i,t)):n[0]}tsParseIntersectionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSIntersectionType",this.tsParseTypeOperatorOrHigher.bind(this),45)}tsParseUnionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSUnionType",this.tsParseIntersectionTypeOrHigher.bind(this),43)}tsIsStartOfFunctionType(){return!!this.match(47)||this.match(10)&&this.tsLookAhead(this.tsIsUnambiguouslyStartOfFunctionType.bind(this))}tsSkipParameterStart(){if(U(this.state.type)||this.match(78))return this.next(),!0;if(this.match(5)){const{errors:t}=this.state,e=t.length;try{return this.parseObjectLike(8,!0),t.length===e}catch(t){return!1}}if(this.match(0)){this.next();const{errors:t}=this.state,e=t.length;try{return super.parseBindingList(3,93,1),t.length===e}catch(t){return!1}}return!1}tsIsUnambiguouslyStartOfFunctionType(){if(this.next(),this.match(11)||this.match(21))return!0;if(this.tsSkipParameterStart()){if(this.match(14)||this.match(12)||this.match(17)||this.match(29))return!0;if(this.match(11)&&(this.next(),this.match(19)))return!0}return!1}tsParseTypeOrTypePredicateAnnotation(t){return this.tsInType((()=>{const e=this.startNode();this.expect(t);const s=this.startNode(),i=!!this.tsTryParse(this.tsParseTypePredicateAsserts.bind(this));if(i&&this.match(78)){let t=this.tsParseThisTypeOrThisTypePredicate();return"TSThisType"===t.type?(s.parameterName=t,s.asserts=!0,s.typeAnnotation=null,t=this.finishNode(s,"TSTypePredicate")):(this.resetStartLocationFromNode(t,s),t.asserts=!0),e.typeAnnotation=t,this.finishNode(e,"TSTypeAnnotation")}const r=this.tsIsIdentifier()&&this.tsTryParse(this.tsParseTypePredicatePrefix.bind(this));if(!r)return i?(s.parameterName=this.parseIdentifier(),s.asserts=i,s.typeAnnotation=null,e.typeAnnotation=this.finishNode(s,"TSTypePredicate"),this.finishNode(e,"TSTypeAnnotation")):this.tsParseTypeAnnotation(!1,e);const n=this.tsParseTypeAnnotation(!1);return s.parameterName=r,s.typeAnnotation=n,s.asserts=i,e.typeAnnotation=this.finishNode(s,"TSTypePredicate"),this.finishNode(e,"TSTypeAnnotation")}))}tsTryParseTypeOrTypePredicateAnnotation(){if(this.match(14))return this.tsParseTypeOrTypePredicateAnnotation(14)}tsTryParseTypeAnnotation(){if(this.match(14))return this.tsParseTypeAnnotation()}tsTryParseType(){return this.tsEatThenParseType(14)}tsParseTypePredicatePrefix(){const t=this.parseIdentifier();if(this.isContextual(116)&&!this.hasPrecedingLineBreak())return this.next(),t}tsParseTypePredicateAsserts(){if(109!==this.state.type)return!1;const t=this.state.containsEsc;return this.next(),!(!U(this.state.type)&&!this.match(78)||(t&&this.raise(g.InvalidEscapedReservedWord,{at:this.state.lastTokStartLoc,reservedWord:"asserts"}),0))}tsParseTypeAnnotation(t=!0,e=this.startNode()){return this.tsInType((()=>{t&&this.expect(14),e.typeAnnotation=this.tsParseType()})),this.finishNode(e,"TSTypeAnnotation")}tsParseType(){we(this.state.inType);const t=this.tsParseNonConditionalType();if(this.state.inDisallowConditionalTypesContext||this.hasPrecedingLineBreak()||!this.eat(81))return t;const e=this.startNodeAtNode(t);return e.checkType=t,e.extendsType=this.tsInDisallowConditionalTypesContext((()=>this.tsParseNonConditionalType())),this.expect(17),e.trueType=this.tsInAllowConditionalTypesContext((()=>this.tsParseType())),this.expect(14),e.falseType=this.tsInAllowConditionalTypesContext((()=>this.tsParseType())),this.finishNode(e,"TSConditionalType")}isAbstractConstructorSignature(){return this.isContextual(124)&&77===this.lookahead().type}tsParseNonConditionalType(){return this.tsIsStartOfFunctionType()?this.tsParseFunctionOrConstructorType("TSFunctionType"):this.match(77)?this.tsParseFunctionOrConstructorType("TSConstructorType"):this.isAbstractConstructorSignature()?this.tsParseFunctionOrConstructorType("TSConstructorType",!0):this.tsParseUnionTypeOrHigher()}tsParseTypeAssertion(){this.getPluginOption("typescript","disallowAmbiguousJSXLike")&&this.raise(Te.ReservedTypeAssertion,{at:this.state.startLoc});const t=this.startNode();return t.typeAnnotation=this.tsInType((()=>(this.next(),this.match(75)?this.tsParseTypeReference():this.tsParseType()))),this.expect(48),t.expression=this.parseMaybeUnary(),this.finishNode(t,"TSTypeAssertion")}tsParseHeritageClause(t){const e=this.state.startLoc,s=this.tsParseDelimitedList("HeritageClauseElement",(()=>{const t=this.startNode();return t.expression=this.tsParseEntityName(),this.match(47)&&(t.typeParameters=this.tsParseTypeArguments()),this.finishNode(t,"TSExpressionWithTypeArguments")}));return s.length||this.raise(Te.EmptyHeritageClauseType,{at:e,token:t}),s}tsParseInterfaceDeclaration(t,e={}){if(this.hasFollowingLineBreak())return null;this.expectContextual(129),e.declare&&(t.declare=!0),U(this.state.type)?(t.id=this.parseIdentifier(),this.checkIdentifier(t.id,130)):(t.id=null,this.raise(Te.MissingInterfaceName,{at:this.state.startLoc})),t.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers),this.eat(81)&&(t.extends=this.tsParseHeritageClause("extends"));const s=this.startNode();return s.body=this.tsInType(this.tsParseObjectTypeMembers.bind(this)),t.body=this.finishNode(s,"TSInterfaceBody"),this.finishNode(t,"TSInterfaceDeclaration")}tsParseTypeAliasDeclaration(t){return t.id=this.parseIdentifier(),this.checkIdentifier(t.id,2),t.typeAnnotation=this.tsInType((()=>{if(t.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutModifiers),this.expect(29),this.isContextual(114)&&16!==this.lookahead().type){const t=this.startNode();return this.next(),this.finishNode(t,"TSIntrinsicKeyword")}return this.tsParseType()})),this.semicolon(),this.finishNode(t,"TSTypeAliasDeclaration")}tsInNoContext(t){const e=this.state.context;this.state.context=[e[0]];try{return t()}finally{this.state.context=e}}tsInType(t){const e=this.state.inType;this.state.inType=!0;try{return t()}finally{this.state.inType=e}}tsInDisallowConditionalTypesContext(t){const e=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!0;try{return t()}finally{this.state.inDisallowConditionalTypesContext=e}}tsInAllowConditionalTypesContext(t){const e=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!1;try{return t()}finally{this.state.inDisallowConditionalTypesContext=e}}tsEatThenParseType(t){if(this.match(t))return this.tsNextThenParseType()}tsExpectThenParseType(t){return this.tsInType((()=>(this.expect(t),this.tsParseType())))}tsNextThenParseType(){return this.tsInType((()=>(this.next(),this.tsParseType())))}tsParseEnumMember(){const t=this.startNode();return t.id=this.match(133)?super.parseStringLiteral(this.state.value):this.parseIdentifier(!0),this.eat(29)&&(t.initializer=super.parseMaybeAssignAllowIn()),this.finishNode(t,"TSEnumMember")}tsParseEnumDeclaration(t,e={}){return e.const&&(t.const=!0),e.declare&&(t.declare=!0),this.expectContextual(126),t.id=this.parseIdentifier(),this.checkIdentifier(t.id,t.const?8971:8459),this.expect(5),t.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(8),this.finishNode(t,"TSEnumDeclaration")}tsParseModuleBlock(){const t=this.startNode();return this.scope.enter(0),this.expect(5),super.parseBlockOrModuleBlockBody(t.body=[],void 0,!0,8),this.scope.exit(),this.finishNode(t,"TSModuleBlock")}tsParseModuleOrNamespaceDeclaration(t,e=!1){if(t.id=this.parseIdentifier(),e||this.checkIdentifier(t.id,1024),this.eat(16)){const e=this.startNode();this.tsParseModuleOrNamespaceDeclaration(e,!0),t.body=e}else this.scope.enter(256),this.prodParam.enter(0),t.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit();return this.finishNode(t,"TSModuleDeclaration")}tsParseAmbientExternalModuleDeclaration(t){return this.isContextual(112)?(t.global=!0,t.id=this.parseIdentifier()):this.match(133)?t.id=super.parseStringLiteral(this.state.value):this.unexpected(),this.match(5)?(this.scope.enter(256),this.prodParam.enter(0),t.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit()):this.semicolon(),this.finishNode(t,"TSModuleDeclaration")}tsParseImportEqualsDeclaration(t,e,s){t.isExport=s||!1,t.id=e||this.parseIdentifier(),this.checkIdentifier(t.id,4096),this.expect(29);const i=this.tsParseModuleReference();return"type"===t.importKind&&"TSExternalModuleReference"!==i.type&&this.raise(Te.ImportAliasHasImportType,{at:i}),t.moduleReference=i,this.semicolon(),this.finishNode(t,"TSImportEqualsDeclaration")}tsIsExternalModuleReference(){return this.isContextual(119)&&40===this.lookaheadCharCode()}tsParseModuleReference(){return this.tsIsExternalModuleReference()?this.tsParseExternalModuleReference():this.tsParseEntityName(!1)}tsParseExternalModuleReference(){const t=this.startNode();return this.expectContextual(119),this.expect(10),this.match(133)||this.unexpected(),t.expression=super.parseExprAtom(),this.expect(11),this.sawUnambiguousESM=!0,this.finishNode(t,"TSExternalModuleReference")}tsLookAhead(t){const e=this.state.clone(),s=t();return this.state=e,s}tsTryParseAndCatch(t){const e=this.tryParse((e=>t()||e()));if(!e.aborted&&e.node)return e.error&&(this.state=e.failState),e.node}tsTryParse(t){const e=this.state.clone(),s=t();if(void 0!==s&&!1!==s)return s;this.state=e}tsTryParseDeclare(t){if(this.isLineTerminator())return;let e,s=this.state.type;return this.isContextual(100)&&(s=74,e="let"),this.tsInAmbientContext((()=>{switch(s){case 68:return t.declare=!0,super.parseFunctionStatement(t,!1,!1);case 80:return t.declare=!0,this.parseClass(t,!0,!1);case 126:return this.tsParseEnumDeclaration(t,{declare:!0});case 112:return this.tsParseAmbientExternalModuleDeclaration(t);case 75:case 74:return this.match(75)&&this.isLookaheadContextual("enum")?(this.expect(75),this.tsParseEnumDeclaration(t,{const:!0,declare:!0})):(t.declare=!0,this.parseVarStatement(t,e||this.state.value,!0));case 129:{const e=this.tsParseInterfaceDeclaration(t,{declare:!0});if(e)return e}default:if(U(s))return this.tsParseDeclaration(t,this.state.value,!0,null)}}))}tsTryParseExportDeclaration(){return this.tsParseDeclaration(this.startNode(),this.state.value,!0,null)}tsParseExpressionStatement(t,e,s){switch(e.name){case"declare":{const e=this.tsTryParseDeclare(t);return e&&(e.declare=!0),e}case"global":if(this.match(5)){this.scope.enter(256),this.prodParam.enter(0);const s=t;return s.global=!0,s.id=e,s.body=this.tsParseModuleBlock(),this.scope.exit(),this.prodParam.exit(),this.finishNode(s,"TSModuleDeclaration")}break;default:return this.tsParseDeclaration(t,e.name,!1,s)}}tsParseDeclaration(t,e,s,i){switch(e){case"abstract":if(this.tsCheckLineTerminator(s)&&(this.match(80)||U(this.state.type)))return this.tsParseAbstractDeclaration(t,i);break;case"module":if(this.tsCheckLineTerminator(s)){if(this.match(133))return this.tsParseAmbientExternalModuleDeclaration(t);if(U(this.state.type))return this.tsParseModuleOrNamespaceDeclaration(t)}break;case"namespace":if(this.tsCheckLineTerminator(s)&&U(this.state.type))return this.tsParseModuleOrNamespaceDeclaration(t);break;case"type":if(this.tsCheckLineTerminator(s)&&U(this.state.type))return this.tsParseTypeAliasDeclaration(t)}}tsCheckLineTerminator(t){return t?!this.hasFollowingLineBreak()&&(this.next(),!0):!this.isLineTerminator()}tsTryParseGenericAsyncArrowFunction(t){if(!this.match(47))return;const e=this.state.maybeInArrowParameters;this.state.maybeInArrowParameters=!0;const s=this.tsTryParseAndCatch((()=>{const e=this.startNodeAt(t);return e.typeParameters=this.tsParseTypeParameters(this.tsParseConstModifier),super.parseFunctionParams(e),e.returnType=this.tsTryParseTypeOrTypePredicateAnnotation(),this.expect(19),e}));return this.state.maybeInArrowParameters=e,s?super.parseArrowExpression(s,null,!0):void 0}tsParseTypeArgumentsInExpression(){if(47===this.reScan_lt())return this.tsParseTypeArguments()}tsParseTypeArguments(){const t=this.startNode();return t.params=this.tsInType((()=>this.tsInNoContext((()=>(this.expect(47),this.tsParseDelimitedList("TypeParametersOrArguments",this.tsParseType.bind(this))))))),0===t.params.length?this.raise(Te.EmptyTypeArguments,{at:t}):this.state.inType||this.curContext()!==N.brace||this.reScan_lt_gt(),this.expect(48),this.finishNode(t,"TSTypeParameterInstantiation")}tsIsDeclarationStart(){return(t=this.state.type)>=124&&t<=130;var t}isExportDefaultSpecifier(){return!this.tsIsDeclarationStart()&&super.isExportDefaultSpecifier()}parseAssignableListItem(t,e){const s=this.state.startLoc,i={};this.tsParseModifiers({allowedModifiers:["public","private","protected","override","readonly"]},i);const r=i.accessibility,n=i.override,a=i.readonly;4&t||!(r||a||n)||this.raise(Te.UnexpectedParameterModifier,{at:s});const o=this.parseMaybeDefault();this.parseAssignableListItemTypes(o,t);const h=this.parseMaybeDefault(o.loc.start,o);if(r||a||n){const t=this.startNodeAt(s);return e.length&&(t.decorators=e),r&&(t.accessibility=r),a&&(t.readonly=a),n&&(t.override=n),"Identifier"!==h.type&&"AssignmentPattern"!==h.type&&this.raise(Te.UnsupportedParameterPropertyKind,{at:t}),t.parameter=h,this.finishNode(t,"TSParameterProperty")}return e.length&&(o.decorators=e),h}isSimpleParameter(t){return"TSParameterProperty"===t.type&&super.isSimpleParameter(t.parameter)||super.isSimpleParameter(t)}tsDisallowOptionalPattern(t){for(const e of t.params)"Identifier"!==e.type&&e.optional&&!this.state.isAmbientContext&&this.raise(Te.PatternIsOptional,{at:e})}setArrowFunctionParameters(t,e,s){super.setArrowFunctionParameters(t,e,s),this.tsDisallowOptionalPattern(t)}parseFunctionBodyAndFinish(t,e,s=!1){this.match(14)&&(t.returnType=this.tsParseTypeOrTypePredicateAnnotation(14));const i="FunctionDeclaration"===e?"TSDeclareFunction":"ClassMethod"===e||"ClassPrivateMethod"===e?"TSDeclareMethod":void 0;return i&&!this.match(5)&&this.isLineTerminator()?this.finishNode(t,i):"TSDeclareFunction"===i&&this.state.isAmbientContext&&(this.raise(Te.DeclareFunctionHasImplementation,{at:t}),t.declare)?super.parseFunctionBodyAndFinish(t,i,s):(this.tsDisallowOptionalPattern(t),super.parseFunctionBodyAndFinish(t,e,s))}registerFunctionStatementId(t){!t.body&&t.id?this.checkIdentifier(t.id,1024):super.registerFunctionStatementId(t)}tsCheckForInvalidTypeCasts(t){t.forEach((t=>{"TSTypeCastExpression"===(null==t?void 0:t.type)&&this.raise(Te.UnexpectedTypeAnnotation,{at:t.typeAnnotation})}))}toReferencedList(t,e){return this.tsCheckForInvalidTypeCasts(t),t}parseArrayLike(t,e,s,i){const r=super.parseArrayLike(t,e,s,i);return"ArrayExpression"===r.type&&this.tsCheckForInvalidTypeCasts(r.elements),r}parseSubscript(t,e,s,i){if(!this.hasPrecedingLineBreak()&&this.match(35)){this.state.canStartJSXElement=!1,this.next();const s=this.startNodeAt(e);return s.expression=t,this.finishNode(s,"TSNonNullExpression")}let r=!1;if(this.match(18)&&60===this.lookaheadCharCode()){if(s)return i.stop=!0,t;i.optionalChainMember=r=!0,this.next()}if(this.match(47)||this.match(51)){let n;const a=this.tsTryParseAndCatch((()=>{if(!s&&this.atPossibleAsyncArrow(t)){const t=this.tsTryParseGenericAsyncArrowFunction(e);if(t)return t}const a=this.tsParseTypeArgumentsInExpression();if(!a)return;if(r&&!this.match(10))return void(n=this.state.curPosition());if(q(this.state.type)){const s=super.parseTaggedTemplateExpression(t,e,i);return s.typeParameters=a,s}if(!s&&this.eat(10)){const s=this.startNodeAt(e);return s.callee=t,s.arguments=this.parseCallExpressionArguments(11,!1),this.tsCheckForInvalidTypeCasts(s.arguments),s.typeParameters=a,i.optionalChainMember&&(s.optional=r),this.finishCallExpression(s,i.optionalChainMember)}const o=this.state.type;if(48===o||52===o||10!==o&&V(o)&&!this.hasPrecedingLineBreak())return;const h=this.startNodeAt(e);return h.expression=t,h.typeParameters=a,this.finishNode(h,"TSInstantiationExpression")}));if(n&&this.unexpected(n,10),a)return"TSInstantiationExpression"===a.type&&(this.match(16)||this.match(18)&&40!==this.lookaheadCharCode())&&this.raise(Te.InvalidPropertyAccessAfterInstantiationExpression,{at:this.state.startLoc}),a}return super.parseSubscript(t,e,s,i)}parseNewCallee(t){var e;super.parseNewCallee(t);const{callee:s}=t;"TSInstantiationExpression"!==s.type||null!=(e=s.extra)&&e.parenthesized||(t.typeParameters=s.typeParameters,t.callee=s.expression)}parseExprOp(t,e,s){let i;if(Q(58)>s&&!this.hasPrecedingLineBreak()&&(this.isContextual(93)||(i=this.isContextual(120)))){const r=this.startNodeAt(e);return r.expression=t,r.typeAnnotation=this.tsInType((()=>(this.next(),this.match(75)?(i&&this.raise(g.UnexpectedKeyword,{at:this.state.startLoc,keyword:"const"}),this.tsParseTypeReference()):this.tsParseType()))),this.finishNode(r,i?"TSSatisfiesExpression":"TSAsExpression"),this.reScan_lt_gt(),this.parseExprOp(r,e,s)}return super.parseExprOp(t,e,s)}checkReservedWord(t,e,s,i){this.state.isAmbientContext||super.checkReservedWord(t,e,s,i)}checkImportReflection(t){super.checkImportReflection(t),t.module&&"value"!==t.importKind&&this.raise(Te.ImportReflectionHasImportType,{at:t.specifiers[0].loc.start})}checkDuplicateExports(){}isPotentialImportPhase(t){if(super.isPotentialImportPhase(t))return!0;if(this.isContextual(130)){const e=this.lookaheadCharCode();return t?123===e||42===e:61!==e}return!t&&this.isContextual(87)}applyImportPhase(t,e,s,i){super.applyImportPhase(t,e,s,i),e?t.exportKind="type"===s?"type":"value":t.importKind="type"===s||"typeof"===s?s:"value"}parseImport(t){if(this.match(133))return t.importKind="value",super.parseImport(t);let e;if(U(this.state.type)&&61===this.lookaheadCharCode())return t.importKind="value",this.tsParseImportEqualsDeclaration(t);if(this.isContextual(130)){const s=this.parseMaybeImportPhase(t,!1);if(61===this.lookaheadCharCode())return this.tsParseImportEqualsDeclaration(t,s);e=super.parseImportSpecifiersAndAfter(t,s)}else e=super.parseImport(t);return"type"===e.importKind&&e.specifiers.length>1&&"ImportDefaultSpecifier"===e.specifiers[0].type&&this.raise(Te.TypeImportCannotSpecifyDefaultAndNamed,{at:e}),e}parseExport(t,e){if(this.match(83)){this.next();let e=null;return this.isContextual(130)&&this.isPotentialImportPhase(!1)?e=this.parseMaybeImportPhase(t,!1):t.importKind="value",this.tsParseImportEqualsDeclaration(t,e,!0)}if(this.eat(29)){const e=t;return e.expression=super.parseExpression(),this.semicolon(),this.sawUnambiguousESM=!0,this.finishNode(e,"TSExportAssignment")}if(this.eatContextual(93)){const e=t;return this.expectContextual(128),e.id=this.parseIdentifier(),this.semicolon(),this.finishNode(e,"TSNamespaceExportDeclaration")}return super.parseExport(t,e)}isAbstractClass(){return this.isContextual(124)&&80===this.lookahead().type}parseExportDefaultExpression(){if(this.isAbstractClass()){const t=this.startNode();return this.next(),t.abstract=!0,this.parseClass(t,!0,!0)}if(this.match(129)){const t=this.tsParseInterfaceDeclaration(this.startNode());if(t)return t}return super.parseExportDefaultExpression()}parseVarStatement(t,e,s=!1){const{isAmbientContext:i}=this.state,r=super.parseVarStatement(t,e,s||i);if(!i)return r;for(const{id:t,init:s}of r.declarations)s&&("const"!==e||t.typeAnnotation?this.raise(Te.InitializerNotAllowedInAmbientContext,{at:s}):Se(s,this.hasPlugin("estree"))||this.raise(Te.ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference,{at:s}));return r}parseStatementContent(t,e){if(this.match(75)&&this.isLookaheadContextual("enum")){const t=this.startNode();return this.expect(75),this.tsParseEnumDeclaration(t,{const:!0})}if(this.isContextual(126))return this.tsParseEnumDeclaration(this.startNode());if(this.isContextual(129)){const t=this.tsParseInterfaceDeclaration(this.startNode());if(t)return t}return super.parseStatementContent(t,e)}parseAccessModifier(){return this.tsParseModifier(["public","protected","private"])}tsHasSomeModifiers(t,e){return e.some((e=>Ne(e)?t.accessibility===e:!!t[e]))}tsIsStartOfStaticBlocks(){return this.isContextual(106)&&123===this.lookaheadCharCode()}parseClassMember(t,e,s){const i=["declare","private","public","protected","override","abstract","readonly","static"];this.tsParseModifiers({allowedModifiers:i,disallowedModifiers:["in","out"],stopOnStartOfClassStaticBlock:!0,errorTemplate:Te.InvalidModifierOnTypeParameterPositions},e);const r=()=>{this.tsIsStartOfStaticBlocks()?(this.next(),this.next(),this.tsHasSomeModifiers(e,i)&&this.raise(Te.StaticBlockCannotHaveModifier,{at:this.state.curPosition()}),super.parseClassStaticBlock(t,e)):this.parseClassMemberWithIsStatic(t,e,s,!!e.static)};e.declare?this.tsInAmbientContext(r):r()}parseClassMemberWithIsStatic(t,e,s,i){const r=this.tsTryParseIndexSignature(e);if(r)return t.body.push(r),e.abstract&&this.raise(Te.IndexSignatureHasAbstract,{at:e}),e.accessibility&&this.raise(Te.IndexSignatureHasAccessibility,{at:e,modifier:e.accessibility}),e.declare&&this.raise(Te.IndexSignatureHasDeclare,{at:e}),void(e.override&&this.raise(Te.IndexSignatureHasOverride,{at:e}));!this.state.inAbstractClass&&e.abstract&&this.raise(Te.NonAbstractClassHasAbstractMethod,{at:e}),e.override&&(s.hadSuperClass||this.raise(Te.OverrideNotInSubClass,{at:e})),super.parseClassMemberWithIsStatic(t,e,s,i)}parsePostMemberNameModifiers(t){this.eat(17)&&(t.optional=!0),t.readonly&&this.match(10)&&this.raise(Te.ClassMethodHasReadonly,{at:t}),t.declare&&this.match(10)&&this.raise(Te.ClassMethodHasDeclare,{at:t})}parseExpressionStatement(t,e,s){return("Identifier"===e.type?this.tsParseExpressionStatement(t,e,s):void 0)||super.parseExpressionStatement(t,e,s)}shouldParseExportDeclaration(){return!!this.tsIsDeclarationStart()||super.shouldParseExportDeclaration()}parseConditional(t,e,s){if(!this.state.maybeInArrowParameters||!this.match(17))return super.parseConditional(t,e,s);const i=this.tryParse((()=>super.parseConditional(t,e)));return i.node?(i.error&&(this.state=i.failState),i.node):(i.error&&super.setOptionalParametersError(s,i.error),t)}parseParenItem(t,e){if(t=super.parseParenItem(t,e),this.eat(17)&&(t.optional=!0,this.resetEndLocation(t)),this.match(14)){const s=this.startNodeAt(e);return s.expression=t,s.typeAnnotation=this.tsParseTypeAnnotation(),this.finishNode(s,"TSTypeCastExpression")}return t}parseExportDeclaration(t){if(!this.state.isAmbientContext&&this.isContextual(125))return this.tsInAmbientContext((()=>this.parseExportDeclaration(t)));const e=this.state.startLoc,s=this.eatContextual(125);if(s&&(this.isContextual(125)||!this.shouldParseExportDeclaration()))throw this.raise(Te.ExpectedAmbientAfterExportDeclare,{at:this.state.startLoc});const i=U(this.state.type)&&this.tsTryParseExportDeclaration()||super.parseExportDeclaration(t);return i?(("TSInterfaceDeclaration"===i.type||"TSTypeAliasDeclaration"===i.type||s)&&(t.exportKind="type"),s&&(this.resetStartLocation(i,e),i.declare=!0),i):null}parseClassId(t,e,s,i){if((!e||s)&&this.isContextual(113))return;super.parseClassId(t,e,s,t.declare?1024:8331);const r=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers);r&&(t.typeParameters=r)}parseClassPropertyAnnotation(t){t.optional||(this.eat(35)?t.definite=!0:this.eat(17)&&(t.optional=!0));const e=this.tsTryParseTypeAnnotation();e&&(t.typeAnnotation=e)}parseClassProperty(t){if(this.parseClassPropertyAnnotation(t),this.state.isAmbientContext&&(!t.readonly||t.typeAnnotation)&&this.match(29)&&this.raise(Te.DeclareClassFieldHasInitializer,{at:this.state.startLoc}),t.abstract&&this.match(29)){const{key:e}=t;this.raise(Te.AbstractPropertyHasInitializer,{at:this.state.startLoc,propertyName:"Identifier"!==e.type||t.computed?`[${this.input.slice(e.start,e.end)}]`:e.name})}return super.parseClassProperty(t)}parseClassPrivateProperty(t){return t.abstract&&this.raise(Te.PrivateElementHasAbstract,{at:t}),t.accessibility&&this.raise(Te.PrivateElementHasAccessibility,{at:t,modifier:t.accessibility}),this.parseClassPropertyAnnotation(t),super.parseClassPrivateProperty(t)}parseClassAccessorProperty(t){return this.parseClassPropertyAnnotation(t),t.optional&&this.raise(Te.AccessorCannotBeOptional,{at:t}),super.parseClassAccessorProperty(t)}pushClassMethod(t,e,s,i,r,n){const a=this.tsTryParseTypeParameters(this.tsParseConstModifier);a&&r&&this.raise(Te.ConstructorHasTypeParameters,{at:a});const{declare:o=!1,kind:h}=e;!o||"get"!==h&&"set"!==h||this.raise(Te.DeclareAccessor,{at:e,kind:h}),a&&(e.typeParameters=a),super.pushClassMethod(t,e,s,i,r,n)}pushClassPrivateMethod(t,e,s,i){const r=this.tsTryParseTypeParameters(this.tsParseConstModifier);r&&(e.typeParameters=r),super.pushClassPrivateMethod(t,e,s,i)}declareClassPrivateMethodInScope(t,e){"TSDeclareMethod"!==t.type&&("MethodDefinition"!==t.type||t.value.body)&&super.declareClassPrivateMethodInScope(t,e)}parseClassSuper(t){super.parseClassSuper(t),t.superClass&&(this.match(47)||this.match(51))&&(t.superTypeParameters=this.tsParseTypeArgumentsInExpression()),this.eatContextual(113)&&(t.implements=this.tsParseHeritageClause("implements"))}parseObjPropValue(t,e,s,i,r,n,a){const o=this.tsTryParseTypeParameters(this.tsParseConstModifier);return o&&(t.typeParameters=o),super.parseObjPropValue(t,e,s,i,r,n,a)}parseFunctionParams(t,e){const s=this.tsTryParseTypeParameters(this.tsParseConstModifier);s&&(t.typeParameters=s),super.parseFunctionParams(t,e)}parseVarId(t,e){super.parseVarId(t,e),"Identifier"===t.id.type&&!this.hasPrecedingLineBreak()&&this.eat(35)&&(t.definite=!0);const s=this.tsTryParseTypeAnnotation();s&&(t.id.typeAnnotation=s,this.resetEndLocation(t.id))}parseAsyncArrowFromCallExpression(t,e){return this.match(14)&&(t.returnType=this.tsParseTypeAnnotation()),super.parseAsyncArrowFromCallExpression(t,e)}parseMaybeAssign(t,e){var s,i,r,n,a;let o,h,c,l;if(this.hasPlugin("jsx")&&(this.match(142)||this.match(47))){if(o=this.state.clone(),h=this.tryParse((()=>super.parseMaybeAssign(t,e)),o),!h.error)return h.node;const{context:s}=this.state,i=s[s.length-1];i!==N.j_oTag&&i!==N.j_expr||s.pop()}if(!(null!=(s=h)&&s.error||this.match(47)))return super.parseMaybeAssign(t,e);o&&o!==this.state||(o=this.state.clone());const p=this.tryParse((s=>{var i,r;l=this.tsParseTypeParameters(this.tsParseConstModifier);const n=super.parseMaybeAssign(t,e);return("ArrowFunctionExpression"!==n.type||null!=(i=n.extra)&&i.parenthesized)&&s(),0!==(null==(r=l)?void 0:r.params.length)&&this.resetStartLocationFromNode(n,l),n.typeParameters=l,n}),o);if(!p.error&&!p.aborted)return l&&this.reportReservedArrowTypeParam(l),p.node;if(!h&&(we(!this.hasPlugin("jsx")),c=this.tryParse((()=>super.parseMaybeAssign(t,e)),o),!c.error))return c.node;if(null!=(i=h)&&i.node)return this.state=h.failState,h.node;if(p.node)return this.state=p.failState,l&&this.reportReservedArrowTypeParam(l),p.node;if(null!=(r=c)&&r.node)return this.state=c.failState,c.node;throw(null==(n=h)?void 0:n.error)||p.error||(null==(a=c)?void 0:a.error)}reportReservedArrowTypeParam(t){var e;1!==t.params.length||t.params[0].constraint||null!=(e=t.extra)&&e.trailingComma||!this.getPluginOption("typescript","disallowAmbiguousJSXLike")||this.raise(Te.ReservedArrowTypeParam,{at:t})}parseMaybeUnary(t,e){return!this.hasPlugin("jsx")&&this.match(47)?this.tsParseTypeAssertion():super.parseMaybeUnary(t,e)}parseArrow(t){if(this.match(14)){const e=this.tryParse((t=>{const e=this.tsParseTypeOrTypePredicateAnnotation(14);return!this.canInsertSemicolon()&&this.match(19)||t(),e}));if(e.aborted)return;e.thrown||(e.error&&(this.state=e.failState),t.returnType=e.node)}return super.parseArrow(t)}parseAssignableListItemTypes(t,e){if(!(2&e))return t;this.eat(17)&&(t.optional=!0);const s=this.tsTryParseTypeAnnotation();return s&&(t.typeAnnotation=s),this.resetEndLocation(t),t}isAssignable(t,e){switch(t.type){case"TSTypeCastExpression":return this.isAssignable(t.expression,e);case"TSParameterProperty":return!0;default:return super.isAssignable(t,e)}}toAssignable(t,e=!1){switch(t.type){case"ParenthesizedExpression":this.toAssignableParenthesizedExpression(t,e);break;case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":e?this.expressionScope.recordArrowParameterBindingError(Te.UnexpectedTypeCastInParameter,{at:t}):this.raise(Te.UnexpectedTypeCastInParameter,{at:t}),this.toAssignable(t.expression,e);break;case"AssignmentExpression":e||"TSTypeCastExpression"!==t.left.type||(t.left=this.typeCastToParameter(t.left));default:super.toAssignable(t,e)}}toAssignableParenthesizedExpression(t,e){switch(t.expression.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":case"ParenthesizedExpression":this.toAssignable(t.expression,e);break;default:super.toAssignable(t,e)}}checkToRestConversion(t,e){switch(t.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSNonNullExpression":this.checkToRestConversion(t.expression,!1);break;default:super.checkToRestConversion(t,e)}}isValidLVal(t,e,s){return i={TSTypeCastExpression:!0,TSParameterProperty:"parameter",TSNonNullExpression:"expression",TSAsExpression:(64!==s||!e)&&["expression",!0],TSSatisfiesExpression:(64!==s||!e)&&["expression",!0],TSTypeAssertion:(64!==s||!e)&&["expression",!0]},r=t,Object.hasOwnProperty.call(i,r)&&i[r]||super.isValidLVal(t,e,s);var i,r}parseBindingAtom(){return 78===this.state.type?this.parseIdentifier(!0):super.parseBindingAtom()}parseMaybeDecoratorArguments(t){if(this.match(47)||this.match(51)){const e=this.tsParseTypeArgumentsInExpression();if(this.match(10)){const s=super.parseMaybeDecoratorArguments(t);return s.typeParameters=e,s}this.unexpected(null,10)}return super.parseMaybeDecoratorArguments(t)}checkCommaAfterRest(t){return this.state.isAmbientContext&&this.match(12)&&this.lookaheadCharCode()===t?(this.next(),!1):super.checkCommaAfterRest(t)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(35)||this.match(14)||super.isClassProperty()}parseMaybeDefault(t,e){const s=super.parseMaybeDefault(t,e);return"AssignmentPattern"===s.type&&s.typeAnnotation&&s.right.start<s.typeAnnotation.start&&this.raise(Te.TypeAnnotationAfterAssign,{at:s.typeAnnotation}),s}getTokenFromCode(t){if(this.state.inType){if(62===t)return void this.finishOp(48,1);if(60===t)return void this.finishOp(47,1)}super.getTokenFromCode(t)}reScan_lt_gt(){const{type:t}=this.state;47===t?(this.state.pos-=1,this.readToken_lt()):48===t&&(this.state.pos-=1,this.readToken_gt())}reScan_lt(){const{type:t}=this.state;return 51===t?(this.state.pos-=2,this.finishOp(47,1),47):t}toAssignableList(t,e,s){for(let e=0;e<t.length;e++){const s=t[e];"TSTypeCastExpression"===(null==s?void 0:s.type)&&(t[e]=this.typeCastToParameter(s))}super.toAssignableList(t,e,s)}typeCastToParameter(t){return t.expression.typeAnnotation=t.typeAnnotation,this.resetEndLocation(t.expression,t.typeAnnotation.loc.end),t.expression}shouldParseArrow(t){return this.match(14)?t.every((t=>this.isAssignable(t,!0))):super.shouldParseArrow(t)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}canHaveLeadingDecorator(){return super.canHaveLeadingDecorator()||this.isAbstractClass()}jsxParseOpeningElementAfterName(t){if(this.match(47)||this.match(51)){const e=this.tsTryParseAndCatch((()=>this.tsParseTypeArgumentsInExpression()));e&&(t.typeParameters=e)}return super.jsxParseOpeningElementAfterName(t)}getGetterSetterExpectedParamCount(t){const e=super.getGetterSetterExpectedParamCount(t),s=this.getObjectOrClassMethodParams(t)[0];return s&&this.isThisParam(s)?e+1:e}parseCatchClauseParam(){const t=super.parseCatchClauseParam(),e=this.tsTryParseTypeAnnotation();return e&&(t.typeAnnotation=e,this.resetEndLocation(t)),t}tsInAmbientContext(t){const e=this.state.isAmbientContext;this.state.isAmbientContext=!0;try{return t()}finally{this.state.isAmbientContext=e}}parseClass(t,e,s){const i=this.state.inAbstractClass;this.state.inAbstractClass=!!t.abstract;try{return super.parseClass(t,e,s)}finally{this.state.inAbstractClass=i}}tsParseAbstractDeclaration(t,e){if(this.match(80))return t.abstract=!0,this.maybeTakeDecorators(e,this.parseClass(t,!0,!1));if(this.isContextual(129)){if(!this.hasFollowingLineBreak())return t.abstract=!0,this.raise(Te.NonClassMethodPropertyHasAbstractModifer,{at:t}),this.tsParseInterfaceDeclaration(t)}else this.unexpected(null,80)}parseMethod(t,e,s,i,r,n,a){const o=super.parseMethod(t,e,s,i,r,n,a);if(o.abstract&&(this.hasPlugin("estree")?o.value.body:o.body)){const{key:t}=o;this.raise(Te.AbstractMethodHasImplementation,{at:o,methodName:"Identifier"!==t.type||o.computed?`[${this.input.slice(t.start,t.end)}]`:t.name})}return o}tsParseTypeParameterName(){return this.parseIdentifier().name}shouldParseAsAmbientContext(){return!!this.getPluginOption("typescript","dts")}parse(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.parse()}getExpression(){return this.shouldParseAsAmbientContext()&&(this.state.isAmbientContext=!0),super.getExpression()}parseExportSpecifier(t,e,s,i){return!e&&i?(this.parseTypeOnlyImportExportSpecifier(t,!1,s),this.finishNode(t,"ExportSpecifier")):(t.exportKind="value",super.parseExportSpecifier(t,e,s,i))}parseImportSpecifier(t,e,s,i,r){return!e&&i?(this.parseTypeOnlyImportExportSpecifier(t,!0,s),this.finishNode(t,"ImportSpecifier")):(t.importKind="value",super.parseImportSpecifier(t,e,s,i,s?4098:4096))}parseTypeOnlyImportExportSpecifier(t,e,s){const i=e?"imported":"local",r=e?"local":"exported";let n,a=t[i],o=!1,h=!0;const c=a.loc.start;if(this.isContextual(93)){const t=this.parseIdentifier();if(this.isContextual(93)){const s=this.parseIdentifier();z(this.state.type)?(o=!0,a=t,n=e?this.parseIdentifier():this.parseModuleExportName(),h=!1):(n=s,h=!1)}else z(this.state.type)?(h=!1,n=e?this.parseIdentifier():this.parseModuleExportName()):(o=!0,a=t)}else z(this.state.type)&&(o=!0,e?(a=this.parseIdentifier(!0),this.isContextual(93)||this.checkReservedWord(a.name,a.loc.start,!0,!0)):a=this.parseModuleExportName());o&&s&&this.raise(e?Te.TypeModifierIsUsedInTypeImports:Te.TypeModifierIsUsedInTypeExports,{at:c}),t[i]=a,t[r]=n,t[e?"importKind":"exportKind"]=o?"type":"value",h&&this.eatContextual(93)&&(t[r]=e?this.parseIdentifier():this.parseModuleExportName()),t[r]||(t[r]=ae(t[i])),e&&this.checkIdentifier(t[r],o?4098:4096)}},v8intrinsic:t=>class extends t{parseV8Intrinsic(){if(this.match(54)){const t=this.state.startLoc,e=this.startNode();if(this.next(),U(this.state.type)){const t=this.parseIdentifierName(),s=this.createIdentifier(e,t);if(s.type="V8IntrinsicIdentifier",this.match(10))return s}this.unexpected(t)}}parseExprAtom(t){return this.parseV8Intrinsic()||super.parseExprAtom(t)}},placeholders:t=>class extends t{parsePlaceholder(t){if(this.match(144)){const e=this.startNode();return this.next(),this.assertNoSpace(),e.name=super.parseIdentifier(!0),this.assertNoSpace(),this.expect(144),this.finishPlaceholder(e,t)}}finishPlaceholder(t,e){const s=!(!t.expectedNode||"Placeholder"!==t.type);return t.expectedNode=e,s?t:this.finishNode(t,"Placeholder")}getTokenFromCode(t){37===t&&37===this.input.charCodeAt(this.state.pos+1)?this.finishOp(144,2):super.getTokenFromCode(t)}parseExprAtom(t){return this.parsePlaceholder("Expression")||super.parseExprAtom(t)}parseIdentifier(t){return this.parsePlaceholder("Identifier")||super.parseIdentifier(t)}checkReservedWord(t,e,s,i){void 0!==t&&super.checkReservedWord(t,e,s,i)}parseBindingAtom(){return this.parsePlaceholder("Pattern")||super.parseBindingAtom()}isValidLVal(t,e,s){return"Placeholder"===t||super.isValidLVal(t,e,s)}toAssignable(t,e){t&&"Placeholder"===t.type&&"Expression"===t.expectedNode?t.expectedNode="Pattern":super.toAssignable(t,e)}chStartsBindingIdentifier(t,e){return!!super.chStartsBindingIdentifier(t,e)||144===this.lookahead().type}verifyBreakContinue(t,e){t.label&&"Placeholder"===t.label.type||super.verifyBreakContinue(t,e)}parseExpressionStatement(t,e){var s;if("Placeholder"!==e.type||null!=(s=e.extra)&&s.parenthesized)return super.parseExpressionStatement(t,e);if(this.match(14)){const s=t;return s.label=this.finishPlaceholder(e,"Identifier"),this.next(),s.body=super.parseStatementOrSloppyAnnexBFunctionDeclaration(),this.finishNode(s,"LabeledStatement")}return this.semicolon(),t.name=e.name,this.finishPlaceholder(t,"Statement")}parseBlock(t,e,s){return this.parsePlaceholder("BlockStatement")||super.parseBlock(t,e,s)}parseFunctionId(t){return this.parsePlaceholder("Identifier")||super.parseFunctionId(t)}parseClass(t,e,s){const i=e?"ClassDeclaration":"ClassExpression";this.next();const r=this.state.strict,n=this.parsePlaceholder("Identifier");if(n){if(!(this.match(81)||this.match(144)||this.match(5))){if(s||!e)return t.id=null,t.body=this.finishPlaceholder(n,"ClassBody"),this.finishNode(t,i);throw this.raise(_e.ClassNameIsRequired,{at:this.state.startLoc})}t.id=n}else this.parseClassId(t,e,s);return super.parseClassSuper(t),t.body=this.parsePlaceholder("ClassBody")||super.parseClassBody(!!t.superClass,r),this.finishNode(t,i)}parseExport(t,e){const s=this.parsePlaceholder("Identifier");if(!s)return super.parseExport(t,e);if(!this.isContextual(98)&&!this.match(12))return t.specifiers=[],t.source=null,t.declaration=this.finishPlaceholder(s,"Declaration"),this.finishNode(t,"ExportNamedDeclaration");this.expectPlugin("exportDefaultFrom");const i=this.startNode();return i.exported=s,t.specifiers=[this.finishNode(i,"ExportDefaultSpecifier")],super.parseExport(t,e)}isExportDefaultSpecifier(){if(this.match(65)){const t=this.nextTokenStart();if(this.isUnparsedContextual(t,"from")&&this.input.startsWith(X(144),this.nextTokenStartSince(t+4)))return!0}return super.isExportDefaultSpecifier()}maybeParseExportDefaultSpecifier(t,e){var s;return!(null==(s=t.specifiers)||!s.length)||super.maybeParseExportDefaultSpecifier(t,e)}checkExport(t){const{specifiers:e}=t;null!=e&&e.length&&(t.specifiers=e.filter((t=>"Placeholder"===t.exported.type))),super.checkExport(t),t.specifiers=e}parseImport(t){const e=this.parsePlaceholder("Identifier");if(!e)return super.parseImport(t);if(t.specifiers=[],!this.isContextual(98)&&!this.match(12))return t.source=this.finishPlaceholder(e,"StringLiteral"),this.semicolon(),this.finishNode(t,"ImportDeclaration");const s=this.startNodeAtNode(e);return s.local=e,t.specifiers.push(this.finishNode(s,"ImportDefaultSpecifier")),this.eat(12)&&(this.maybeParseStarImportSpecifier(t)||this.parseNamedImportSpecifiers(t)),this.expectContextual(98),t.source=this.parseImportSource(),this.semicolon(),this.finishNode(t,"ImportDeclaration")}parseImportSource(){return this.parsePlaceholder("StringLiteral")||super.parseImportSource()}assertNoSpace(){this.state.start>this.state.lastTokEndLoc.index&&this.raise(_e.UnexpectedSpace,{at:this.state.lastTokEndLoc})}}},je=Object.keys(Ze),De={sourceType:"script",sourceFilename:void 0,startColumn:0,startLine:1,allowAwaitOutsideFunction:!1,allowReturnOutsideFunction:!1,allowNewTargetOutsideFunction:!1,allowImportExportEverywhere:!1,allowSuperOutsideMethod:!1,allowUndeclaredExports:!1,plugins:[],strictMode:null,ranges:!1,tokens:!1,createImportExpressions:!1,createParenthesizedExpressions:!1,errorRecovery:!1,attachComment:!0,annexB:!0};class Ye extends xe{checkProto(t,e,s,i){if("SpreadElement"===t.type||this.isObjectMethod(t)||t.computed||t.shorthand)return;const r=t.key;if("__proto__"===("Identifier"===r.type?r.name:r.value)){if(e)return void this.raise(g.RecordNoProto,{at:r});s.used&&(i?null===i.doubleProtoLoc&&(i.doubleProtoLoc=r.loc.start):this.raise(g.DuplicateProto,{at:r})),s.used=!0}}shouldExitDescending(t,e){return"ArrowFunctionExpression"===t.type&&t.start===e}getExpression(){this.enterInitialScopes(),this.nextToken();const t=this.parseExpression();return this.match(139)||this.unexpected(),this.finalizeRemainingComments(),t.comments=this.state.comments,t.errors=this.state.errors,this.options.tokens&&(t.tokens=this.tokens),t}parseExpression(t,e){return t?this.disallowInAnd((()=>this.parseExpressionBase(e))):this.allowInAnd((()=>this.parseExpressionBase(e)))}parseExpressionBase(t){const e=this.state.startLoc,s=this.parseMaybeAssign(t);if(this.match(12)){const i=this.startNodeAt(e);for(i.expressions=[s];this.eat(12);)i.expressions.push(this.parseMaybeAssign(t));return this.toReferencedList(i.expressions),this.finishNode(i,"SequenceExpression")}return s}parseMaybeAssignDisallowIn(t,e){return this.disallowInAnd((()=>this.parseMaybeAssign(t,e)))}parseMaybeAssignAllowIn(t,e){return this.allowInAnd((()=>this.parseMaybeAssign(t,e)))}setOptionalParametersError(t,e){var s;t.optionalParametersLoc=null!=(s=null==e?void 0:e.loc)?s:this.state.startLoc}parseMaybeAssign(t,e){const s=this.state.startLoc;if(this.isContextual(108)&&this.prodParam.hasYield){let t=this.parseYield();return e&&(t=e.call(this,t,s)),t}let i;t?i=!1:(t=new ie,i=!0);const{type:r}=this.state;(10===r||U(r))&&(this.state.potentialArrowAt=this.state.start);let n=this.parseMaybeConditional(t);if(e&&(n=e.call(this,n,s)),(a=this.state.type)>=29&&a<=33){const e=this.startNodeAt(s),i=this.state.value;if(e.operator=i,this.match(29)){this.toAssignable(n,!0),e.left=n;const i=s.index;null!=t.doubleProtoLoc&&t.doubleProtoLoc.index>=i&&(t.doubleProtoLoc=null),null!=t.shorthandAssignLoc&&t.shorthandAssignLoc.index>=i&&(t.shorthandAssignLoc=null),null!=t.privateKeyLoc&&t.privateKeyLoc.index>=i&&(this.checkDestructuringPrivate(t),t.privateKeyLoc=null)}else e.left=n;return this.next(),e.right=this.parseMaybeAssign(),this.checkLVal(n,{in:this.finishNode(e,"AssignmentExpression")}),e}var a;return i&&this.checkExpressionErrors(t,!0),n}parseMaybeConditional(t){const e=this.state.startLoc,s=this.state.potentialArrowAt,i=this.parseExprOps(t);return this.shouldExitDescending(i,s)?i:this.parseConditional(i,e,t)}parseConditional(t,e,s){if(this.eat(17)){const s=this.startNodeAt(e);return s.test=t,s.consequent=this.parseMaybeAssignAllowIn(),this.expect(14),s.alternate=this.parseMaybeAssign(),this.finishNode(s,"ConditionalExpression")}return t}parseMaybeUnaryOrPrivate(t){return this.match(138)?this.parsePrivateName():this.parseMaybeUnary(t)}parseExprOps(t){const e=this.state.startLoc,s=this.state.potentialArrowAt,i=this.parseMaybeUnaryOrPrivate(t);return this.shouldExitDescending(i,s)?i:this.parseExprOp(i,e,-1)}parseExprOp(t,e,s){if(this.isPrivateName(t)){const e=this.getPrivateNameSV(t);(s>=Q(58)||!this.prodParam.hasIn||!this.match(58))&&this.raise(g.PrivateInExpectedIn,{at:t,identifierName:e}),this.classScope.usePrivateName(e,t.loc.start)}const i=this.state.type;if((r=i)>=39&&r<=59&&(this.prodParam.hasIn||!this.match(58))){let r=Q(i);if(r>s){if(39===i){if(this.expectPlugin("pipelineOperator"),this.state.inFSharpPipelineDirectBody)return t;this.checkPipelineAtInfixOperator(t,e)}const n=this.startNodeAt(e);n.left=t,n.operator=this.state.value;const a=41===i||42===i,o=40===i;if(o&&(r=Q(42)),this.next(),39===i&&this.hasPlugin(["pipelineOperator",{proposal:"minimal"}])&&96===this.state.type&&this.prodParam.hasAwait)throw this.raise(g.UnexpectedAwaitAfterPipelineBody,{at:this.state.startLoc});n.right=this.parseExprOpRightExpr(i,r);const h=this.finishNode(n,a||o?"LogicalExpression":"BinaryExpression"),c=this.state.type;if(o&&(41===c||42===c)||a&&40===c)throw this.raise(g.MixingCoalesceWithLogical,{at:this.state.startLoc});return this.parseExprOp(h,e,s)}}var r;return t}parseExprOpRightExpr(t,e){const s=this.state.startLoc;if(39===t)switch(this.getPluginOption("pipelineOperator","proposal")){case"hack":return this.withTopicBindingContext((()=>this.parseHackPipeBody()));case"smart":return this.withTopicBindingContext((()=>{if(this.prodParam.hasYield&&this.isContextual(108))throw this.raise(g.PipeBodyIsTighter,{at:this.state.startLoc});return this.parseSmartPipelineBodyInStyle(this.parseExprOpBaseRightExpr(t,e),s)}));case"fsharp":return this.withSoloAwaitPermittingContext((()=>this.parseFSharpPipelineBody(e)))}return this.parseExprOpBaseRightExpr(t,e)}parseExprOpBaseRightExpr(t,e){const s=this.state.startLoc;return this.parseExprOp(this.parseMaybeUnaryOrPrivate(),s,57===t?e-1:e)}parseHackPipeBody(){var t;const{startLoc:e}=this.state,s=this.parseMaybeAssign();return!p.has(s.type)||null!=(t=s.extra)&&t.parenthesized||this.raise(g.PipeUnparenthesizedBody,{at:e,type:s.type}),this.topicReferenceWasUsedInCurrentContext()||this.raise(g.PipeTopicUnused,{at:e}),s}checkExponentialAfterUnary(t){this.match(57)&&this.raise(g.UnexpectedTokenUnaryExponentiation,{at:t.argument})}parseMaybeUnary(t,e){const s=this.state.startLoc,i=this.isContextual(96);if(i&&this.isAwaitAllowed()){this.next();const t=this.parseAwait(s);return e||this.checkExponentialAfterUnary(t),t}const r=this.match(34),n=this.startNode();if(a=this.state.type,W[a]){n.operator=this.state.value,n.prefix=!0,this.match(72)&&this.expectPlugin("throwExpressions");const s=this.match(89);if(this.next(),n.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),this.state.strict&&s){const t=n.argument;"Identifier"===t.type?this.raise(g.StrictDelete,{at:n}):this.hasPropertyAsPrivateName(t)&&this.raise(g.DeletePrivateField,{at:n})}if(!r)return e||this.checkExponentialAfterUnary(n),this.finishNode(n,"UnaryExpression")}var a;const o=this.parseUpdate(n,r,t);if(i){const{type:t}=this.state;if((this.hasPlugin("v8intrinsic")?V(t):V(t)&&!this.match(54))&&!this.isAmbiguousAwait())return this.raiseOverwrite(g.AwaitNotInAsyncContext,{at:s}),this.parseAwait(s)}return o}parseUpdate(t,e,s){if(e){const e=t;return this.checkLVal(e.argument,{in:this.finishNode(e,"UpdateExpression")}),t}const i=this.state.startLoc;let r=this.parseExprSubscripts(s);if(this.checkExpressionErrors(s,!1))return r;for(;34===this.state.type&&!this.canInsertSemicolon();){const t=this.startNodeAt(i);t.operator=this.state.value,t.prefix=!1,t.argument=r,this.next(),this.checkLVal(r,{in:r=this.finishNode(t,"UpdateExpression")})}return r}parseExprSubscripts(t){const e=this.state.startLoc,s=this.state.potentialArrowAt,i=this.parseExprAtom(t);return this.shouldExitDescending(i,s)?i:this.parseSubscripts(i,e)}parseSubscripts(t,e,s){const i={optionalChainMember:!1,maybeAsyncArrow:this.atPossibleAsyncArrow(t),stop:!1};do{t=this.parseSubscript(t,e,s,i),i.maybeAsyncArrow=!1}while(!i.stop);return t}parseSubscript(t,e,s,i){const{type:r}=this.state;if(!s&&15===r)return this.parseBind(t,e,s,i);if(q(r))return this.parseTaggedTemplateExpression(t,e,i);let n=!1;if(18===r){if(s&&(this.raise(g.OptionalChainingNoNew,{at:this.state.startLoc}),40===this.lookaheadCharCode()))return i.stop=!0,t;i.optionalChainMember=n=!0,this.next()}if(!s&&this.match(10))return this.parseCoverCallAndAsyncArrowHead(t,e,i,n);{const s=this.eat(0);return s||n||this.eat(16)?this.parseMember(t,e,i,s,n):(i.stop=!0,t)}}parseMember(t,e,s,i,r){const n=this.startNodeAt(e);return n.object=t,n.computed=i,i?(n.property=this.parseExpression(),this.expect(3)):this.match(138)?("Super"===t.type&&this.raise(g.SuperPrivateField,{at:e}),this.classScope.usePrivateName(this.state.value,this.state.startLoc),n.property=this.parsePrivateName()):n.property=this.parseIdentifier(!0),s.optionalChainMember?(n.optional=r,this.finishNode(n,"OptionalMemberExpression")):this.finishNode(n,"MemberExpression")}parseBind(t,e,s,i){const r=this.startNodeAt(e);return r.object=t,this.next(),r.callee=this.parseNoCallExpr(),i.stop=!0,this.parseSubscripts(this.finishNode(r,"BindExpression"),e,s)}parseCoverCallAndAsyncArrowHead(t,e,s,i){const r=this.state.maybeInArrowParameters;let n=null;this.state.maybeInArrowParameters=!0,this.next();const a=this.startNodeAt(e);a.callee=t;const{maybeAsyncArrow:o,optionalChainMember:h}=s;o&&(this.expressionScope.enter(new qt(2)),n=new ie),h&&(a.optional=i),a.arguments=i?this.parseCallExpressionArguments(11):this.parseCallExpressionArguments(11,"Import"===t.type,"Super"!==t.type,a,n);let c=this.finishCallExpression(a,h);return o&&this.shouldParseAsyncArrow()&&!i?(s.stop=!0,this.checkDestructuringPrivate(n),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),c=this.parseAsyncArrowFromCallExpression(this.startNodeAt(e),c)):(o&&(this.checkExpressionErrors(n,!0),this.expressionScope.exit()),this.toReferencedArguments(c)),this.state.maybeInArrowParameters=r,c}toReferencedArguments(t,e){this.toReferencedListDeep(t.arguments,e)}parseTaggedTemplateExpression(t,e,s){const i=this.startNodeAt(e);return i.tag=t,i.quasi=this.parseTemplate(!0),s.optionalChainMember&&this.raise(g.OptionalChainingNoTemplate,{at:e}),this.finishNode(i,"TaggedTemplateExpression")}atPossibleAsyncArrow(t){return"Identifier"===t.type&&"async"===t.name&&this.state.lastTokEndLoc.index===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&t.start===this.state.potentialArrowAt}expectImportAttributesPlugin(){this.hasPlugin("importAssertions")||this.expectPlugin("importAttributes")}finishCallExpression(t,e){if("Import"===t.callee.type)if(2===t.arguments.length&&(this.hasPlugin("moduleAttributes")||this.expectImportAttributesPlugin()),0===t.arguments.length||t.arguments.length>2)this.raise(g.ImportCallArity,{at:t,maxArgumentCount:this.hasPlugin("importAttributes")||this.hasPlugin("importAssertions")||this.hasPlugin("moduleAttributes")?2:1});else for(const e of t.arguments)"SpreadElement"===e.type&&this.raise(g.ImportCallSpreadArgument,{at:e});return this.finishNode(t,e?"OptionalCallExpression":"CallExpression")}parseCallExpressionArguments(t,e,s,i,r){const n=[];let a=!0;const o=this.state.inFSharpPipelineDirectBody;for(this.state.inFSharpPipelineDirectBody=!1;!this.eat(t);){if(a)a=!1;else if(this.expect(12),this.match(t)){!e||this.hasPlugin("importAttributes")||this.hasPlugin("importAssertions")||this.hasPlugin("moduleAttributes")||this.raise(g.ImportCallArgumentTrailingComma,{at:this.state.lastTokStartLoc}),i&&this.addTrailingCommaExtraToNode(i),this.next();break}n.push(this.parseExprListItem(!1,r,s))}return this.state.inFSharpPipelineDirectBody=o,n}shouldParseAsyncArrow(){return this.match(19)&&!this.canInsertSemicolon()}parseAsyncArrowFromCallExpression(t,e){var s;return this.resetPreviousNodeTrailingComments(e),this.expect(19),this.parseArrowExpression(t,e.arguments,!0,null==(s=e.extra)?void 0:s.trailingCommaLoc),e.innerComments&&Tt(t,e.innerComments),e.callee.trailingComments&&Tt(t,e.callee.trailingComments),t}parseNoCallExpr(){const t=this.state.startLoc;return this.parseSubscripts(this.parseExprAtom(),t,!0)}parseExprAtom(t){let e,s=null;const{type:i}=this.state;switch(i){case 79:return this.parseSuper();case 83:return e=this.startNode(),this.next(),this.match(16)?this.parseImportMetaProperty(e):this.match(10)?this.options.createImportExpressions?this.parseImportCall(e):this.finishNode(e,"Import"):(this.raise(g.UnsupportedImport,{at:this.state.lastTokStartLoc}),this.finishNode(e,"Import"));case 78:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case 90:return this.parseDo(this.startNode(),!1);case 56:case 31:return this.readRegexp(),this.parseRegExpLiteral(this.state.value);case 134:return this.parseNumericLiteral(this.state.value);case 135:return this.parseBigIntLiteral(this.state.value);case 136:return this.parseDecimalLiteral(this.state.value);case 133:return this.parseStringLiteral(this.state.value);case 84:return this.parseNullLiteral();case 85:return this.parseBooleanLiteral(!0);case 86:return this.parseBooleanLiteral(!1);case 10:{const t=this.state.potentialArrowAt===this.state.start;return this.parseParenAndDistinguishExpression(t)}case 2:case 1:return this.parseArrayLike(2===this.state.type?4:3,!1,!0);case 0:return this.parseArrayLike(3,!0,!1,t);case 6:case 7:return this.parseObjectLike(6===this.state.type?9:8,!1,!0);case 5:return this.parseObjectLike(8,!1,!1,t);case 68:return this.parseFunctionOrFunctionSent();case 26:s=this.parseDecorators();case 80:return this.parseClass(this.maybeTakeDecorators(s,this.startNode()),!1);case 77:return this.parseNewOrNewTarget();case 25:case 24:return this.parseTemplate(!1);case 15:{e=this.startNode(),this.next(),e.object=null;const t=e.callee=this.parseNoCallExpr();if("MemberExpression"===t.type)return this.finishNode(e,"BindExpression");throw this.raise(g.UnsupportedBind,{at:t})}case 138:return this.raise(g.PrivateInExpectedIn,{at:this.state.startLoc,identifierName:this.state.value}),this.parsePrivateName();case 33:return this.parseTopicReferenceThenEqualsSign(54,"%");case 32:return this.parseTopicReferenceThenEqualsSign(44,"^");case 37:case 38:return this.parseTopicReference("hack");case 44:case 54:case 27:{const t=this.getPluginOption("pipelineOperator","proposal");if(t)return this.parseTopicReference(t);this.unexpected();break}case 47:{const t=this.input.codePointAt(this.nextTokenStart());at(t)||62===t?this.expectOnePlugin(["jsx","flow","typescript"]):this.unexpected();break}default:if(U(i)){if(this.isContextual(127)&&123===this.lookaheadInLineCharCode())return this.parseModuleExpression();const t=this.state.potentialArrowAt===this.state.start,e=this.state.containsEsc,s=this.parseIdentifier();if(!e&&"async"===s.name&&!this.canInsertSemicolon()){const{type:t}=this.state;if(68===t)return this.resetPreviousNodeTrailingComments(s),this.next(),this.parseAsyncFunctionExpression(this.startNodeAtNode(s));if(U(t))return 61===this.lookaheadCharCode()?this.parseAsyncArrowUnaryFunction(this.startNodeAtNode(s)):s;if(90===t)return this.resetPreviousNodeTrailingComments(s),this.parseDo(this.startNodeAtNode(s),!0)}return t&&this.match(19)&&!this.canInsertSemicolon()?(this.next(),this.parseArrowExpression(this.startNodeAtNode(s),[s],!1)):s}this.unexpected()}}parseTopicReferenceThenEqualsSign(t,e){const s=this.getPluginOption("pipelineOperator","proposal");if(s)return this.state.type=t,this.state.value=e,this.state.pos--,this.state.end--,this.state.endLoc=n(this.state.endLoc,-1),this.parseTopicReference(s);this.unexpected()}parseTopicReference(t){const e=this.startNode(),s=this.state.startLoc,i=this.state.type;return this.next(),this.finishTopicReference(e,s,t,i)}finishTopicReference(t,e,s,i){if(this.testTopicReferenceConfiguration(s,e,i)){const i="smart"===s?"PipelinePrimaryTopicReference":"TopicReference";return this.topicReferenceIsAllowedInCurrentContext()||this.raise("smart"===s?g.PrimaryTopicNotAllowed:g.PipeTopicUnbound,{at:e}),this.registerTopicReference(),this.finishNode(t,i)}throw this.raise(g.PipeTopicUnconfiguredToken,{at:e,token:X(i)})}testTopicReferenceConfiguration(t,e,s){switch(t){case"hack":return this.hasPlugin(["pipelineOperator",{topicToken:X(s)}]);case"smart":return 27===s;default:throw this.raise(g.PipeTopicRequiresHackPipes,{at:e})}}parseAsyncArrowUnaryFunction(t){this.prodParam.enter(ee(!0,this.prodParam.hasYield));const e=[this.parseIdentifier()];return this.prodParam.exit(),this.hasPrecedingLineBreak()&&this.raise(g.LineTerminatorBeforeArrow,{at:this.state.curPosition()}),this.expect(19),this.parseArrowExpression(t,e,!0)}parseDo(t,e){this.expectPlugin("doExpressions"),e&&this.expectPlugin("asyncDoExpressions"),t.async=e,this.next();const s=this.state.labels;return this.state.labels=[],e?(this.prodParam.enter(2),t.body=this.parseBlock(),this.prodParam.exit()):t.body=this.parseBlock(),this.state.labels=s,this.finishNode(t,"DoExpression")}parseSuper(){const t=this.startNode();return this.next(),!this.match(10)||this.scope.allowDirectSuper||this.options.allowSuperOutsideMethod?this.scope.allowSuper||this.options.allowSuperOutsideMethod||this.raise(g.UnexpectedSuper,{at:t}):this.raise(g.SuperNotAllowed,{at:t}),this.match(10)||this.match(0)||this.match(16)||this.raise(g.UnsupportedSuper,{at:t}),this.finishNode(t,"Super")}parsePrivateName(){const t=this.startNode(),e=this.startNodeAt(n(this.state.startLoc,1)),s=this.state.value;return this.next(),t.id=this.createIdentifier(e,s),this.finishNode(t,"PrivateName")}parseFunctionOrFunctionSent(){const t=this.startNode();if(this.next(),this.prodParam.hasYield&&this.match(16)){const e=this.createIdentifier(this.startNodeAtNode(t),"function");return this.next(),this.match(103)?this.expectPlugin("functionSent"):this.hasPlugin("functionSent")||this.unexpected(),this.parseMetaProperty(t,e,"sent")}return this.parseFunction(t)}parseMetaProperty(t,e,s){t.meta=e;const i=this.state.containsEsc;return t.property=this.parseIdentifier(!0),(t.property.name!==s||i)&&this.raise(g.UnsupportedMetaProperty,{at:t.property,target:e.name,onlyValidPropertyName:s}),this.finishNode(t,"MetaProperty")}parseImportMetaProperty(t){const e=this.createIdentifier(this.startNodeAtNode(t),"import");if(this.next(),this.isContextual(101))this.inModule||this.raise(g.ImportMetaOutsideModule,{at:e}),this.sawUnambiguousESM=!0;else if(this.isContextual(105)||this.isContextual(97)){const e=this.isContextual(105);if(e||this.unexpected(),this.expectPlugin(e?"sourcePhaseImports":"deferredImportEvaluation"),!this.options.createImportExpressions)throw this.raise(g.DynamicImportPhaseRequiresImportExpressions,{at:this.state.startLoc,phase:this.state.value});return this.next(),t.phase=e?"source":"defer",this.parseImportCall(t)}return this.parseMetaProperty(t,e,"meta")}parseLiteralAtNode(t,e,s){return this.addExtra(s,"rawValue",t),this.addExtra(s,"raw",this.input.slice(s.start,this.state.end)),s.value=t,this.next(),this.finishNode(s,e)}parseLiteral(t,e){const s=this.startNode();return this.parseLiteralAtNode(t,e,s)}parseStringLiteral(t){return this.parseLiteral(t,"StringLiteral")}parseNumericLiteral(t){return this.parseLiteral(t,"NumericLiteral")}parseBigIntLiteral(t){return this.parseLiteral(t,"BigIntLiteral")}parseDecimalLiteral(t){return this.parseLiteral(t,"DecimalLiteral")}parseRegExpLiteral(t){const e=this.parseLiteral(t.value,"RegExpLiteral");return e.pattern=t.pattern,e.flags=t.flags,e}parseBooleanLiteral(t){const e=this.startNode();return e.value=t,this.next(),this.finishNode(e,"BooleanLiteral")}parseNullLiteral(){const t=this.startNode();return this.next(),this.finishNode(t,"NullLiteral")}parseParenAndDistinguishExpression(t){const e=this.state.startLoc;let s;this.next(),this.expressionScope.enter(new qt(1));const i=this.state.maybeInArrowParameters,r=this.state.inFSharpPipelineDirectBody;this.state.maybeInArrowParameters=!0,this.state.inFSharpPipelineDirectBody=!1;const n=this.state.startLoc,a=[],o=new ie;let h,c,l=!0;for(;!this.match(11);){if(l)l=!1;else if(this.expect(12,null===o.optionalParametersLoc?null:o.optionalParametersLoc),this.match(11)){c=this.state.startLoc;break}if(this.match(21)){const t=this.state.startLoc;if(h=this.state.startLoc,a.push(this.parseParenItem(this.parseRestBinding(),t)),!this.checkCommaAfterRest(41))break}else a.push(this.parseMaybeAssignAllowIn(o,this.parseParenItem))}const p=this.state.lastTokEndLoc;this.expect(11),this.state.maybeInArrowParameters=i,this.state.inFSharpPipelineDirectBody=r;let u=this.startNodeAt(e);return t&&this.shouldParseArrow(a)&&(u=this.parseArrow(u))?(this.checkDestructuringPrivate(o),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),this.parseArrowExpression(u,a,!1),u):(this.expressionScope.exit(),a.length||this.unexpected(this.state.lastTokStartLoc),c&&this.unexpected(c),h&&this.unexpected(h),this.checkExpressionErrors(o,!0),this.toReferencedListDeep(a,!0),a.length>1?(s=this.startNodeAt(n),s.expressions=a,this.finishNode(s,"SequenceExpression"),this.resetEndLocation(s,p)):s=a[0],this.wrapParenthesis(e,s))}wrapParenthesis(t,e){if(!this.options.createParenthesizedExpressions)return this.addExtra(e,"parenthesized",!0),this.addExtra(e,"parenStart",t.index),this.takeSurroundingComments(e,t.index,this.state.lastTokEndLoc.index),e;const s=this.startNodeAt(t);return s.expression=e,this.finishNode(s,"ParenthesizedExpression")}shouldParseArrow(t){return!this.canInsertSemicolon()}parseArrow(t){if(this.eat(19))return t}parseParenItem(t,e){return t}parseNewOrNewTarget(){const t=this.startNode();if(this.next(),this.match(16)){const e=this.createIdentifier(this.startNodeAtNode(t),"new");this.next();const s=this.parseMetaProperty(t,e,"target");return this.scope.inNonArrowFunction||this.scope.inClass||this.options.allowNewTargetOutsideFunction||this.raise(g.UnexpectedNewTarget,{at:s}),s}return this.parseNew(t)}parseNew(t){if(this.parseNewCallee(t),this.eat(10)){const e=this.parseExprList(11);this.toReferencedList(e),t.arguments=e}else t.arguments=[];return this.finishNode(t,"NewExpression")}parseNewCallee(t){const e=this.match(83),s=this.parseNoCallExpr();t.callee=s,!e||"Import"!==s.type&&"ImportExpression"!==s.type||this.raise(g.ImportCallNotNewExpression,{at:s})}parseTemplateElement(t){const{start:e,startLoc:s,end:i,value:r}=this.state,a=e+1,o=this.startNodeAt(n(s,1));null===r&&(t||this.raise(g.InvalidEscapeSequenceTemplate,{at:n(this.state.firstInvalidTemplateEscapePos,1)}));const h=this.match(24),c=h?-1:-2,l=i+c;o.value={raw:this.input.slice(a,l).replace(/\r\n?/g,"\n"),cooked:null===r?null:r.slice(1,c)},o.tail=h,this.next();const p=this.finishNode(o,"TemplateElement");return this.resetEndLocation(p,n(this.state.lastTokEndLoc,c)),p}parseTemplate(t){const e=this.startNode();e.expressions=[];let s=this.parseTemplateElement(t);for(e.quasis=[s];!s.tail;)e.expressions.push(this.parseTemplateSubstitution()),this.readTemplateContinuation(),e.quasis.push(s=this.parseTemplateElement(t));return this.finishNode(e,"TemplateLiteral")}parseTemplateSubstitution(){return this.parseExpression()}parseObjectLike(t,e,s,i){s&&this.expectPlugin("recordAndTuple");const r=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;const n=Object.create(null);let a=!0;const o=this.startNode();for(o.properties=[],this.next();!this.match(t);){if(a)a=!1;else if(this.expect(12),this.match(t)){this.addTrailingCommaExtraToNode(o);break}let r;e?r=this.parseBindingProperty():(r=this.parsePropertyDefinition(i),this.checkProto(r,s,n,i)),s&&!this.isObjectProperty(r)&&"SpreadElement"!==r.type&&this.raise(g.InvalidRecordProperty,{at:r}),r.shorthand&&this.addExtra(r,"shorthand",!0),o.properties.push(r)}this.next(),this.state.inFSharpPipelineDirectBody=r;let h="ObjectExpression";return e?h="ObjectPattern":s&&(h="RecordExpression"),this.finishNode(o,h)}addTrailingCommaExtraToNode(t){this.addExtra(t,"trailingComma",this.state.lastTokStart),this.addExtra(t,"trailingCommaLoc",this.state.lastTokStartLoc,!1)}maybeAsyncOrAccessorProp(t){return!t.computed&&"Identifier"===t.key.type&&(this.isLiteralPropertyName()||this.match(0)||this.match(55))}parsePropertyDefinition(t){let e=[];if(this.match(26))for(this.hasPlugin("decorators")&&this.raise(g.UnsupportedPropertyDecorator,{at:this.state.startLoc});this.match(26);)e.push(this.parseDecorator());const s=this.startNode();let i,r=!1,n=!1;if(this.match(21))return e.length&&this.unexpected(),this.parseSpread();e.length&&(s.decorators=e,e=[]),s.method=!1,t&&(i=this.state.startLoc);let a=this.eat(55);this.parsePropertyNamePrefixOperator(s);const o=this.state.containsEsc,h=this.parsePropertyName(s,t);if(!a&&!o&&this.maybeAsyncOrAccessorProp(s)){const t=h.name;"async"!==t||this.hasPrecedingLineBreak()||(r=!0,this.resetPreviousNodeTrailingComments(h),a=this.eat(55),this.parsePropertyName(s)),"get"!==t&&"set"!==t||(n=!0,this.resetPreviousNodeTrailingComments(h),s.kind=t,this.match(55)&&(a=!0,this.raise(g.AccessorIsGenerator,{at:this.state.curPosition(),kind:t}),this.next()),this.parsePropertyName(s))}return this.parseObjPropValue(s,i,a,r,!1,n,t)}getGetterSetterExpectedParamCount(t){return"get"===t.kind?0:1}getObjectOrClassMethodParams(t){return t.params}checkGetterSetterParams(t){var e;const s=this.getGetterSetterExpectedParamCount(t),i=this.getObjectOrClassMethodParams(t);i.length!==s&&this.raise("get"===t.kind?g.BadGetterArity:g.BadSetterArity,{at:t}),"set"===t.kind&&"RestElement"===(null==(e=i[i.length-1])?void 0:e.type)&&this.raise(g.BadSetterRestParameter,{at:t})}parseObjectMethod(t,e,s,i,r){if(r){const s=this.parseMethod(t,e,!1,!1,!1,"ObjectMethod");return this.checkGetterSetterParams(s),s}if(s||e||this.match(10))return i&&this.unexpected(),t.kind="method",t.method=!0,this.parseMethod(t,e,s,!1,!1,"ObjectMethod")}parseObjectProperty(t,e,s,i){if(t.shorthand=!1,this.eat(14))return t.value=s?this.parseMaybeDefault(this.state.startLoc):this.parseMaybeAssignAllowIn(i),this.finishNode(t,"ObjectProperty");if(!t.computed&&"Identifier"===t.key.type){if(this.checkReservedWord(t.key.name,t.key.loc.start,!0,!1),s)t.value=this.parseMaybeDefault(e,ae(t.key));else if(this.match(29)){const s=this.state.startLoc;null!=i?null===i.shorthandAssignLoc&&(i.shorthandAssignLoc=s):this.raise(g.InvalidCoverInitializedName,{at:s}),t.value=this.parseMaybeDefault(e,ae(t.key))}else t.value=ae(t.key);return t.shorthand=!0,this.finishNode(t,"ObjectProperty")}}parseObjPropValue(t,e,s,i,r,n,a){const o=this.parseObjectMethod(t,s,i,r,n)||this.parseObjectProperty(t,e,r,a);return o||this.unexpected(),o}parsePropertyName(t,e){if(this.eat(0))t.computed=!0,t.key=this.parseMaybeAssignAllowIn(),this.expect(3);else{const{type:s,value:i}=this.state;let r;if(z(s))r=this.parseIdentifier(!0);else switch(s){case 134:r=this.parseNumericLiteral(i);break;case 133:r=this.parseStringLiteral(i);break;case 135:r=this.parseBigIntLiteral(i);break;case 136:r=this.parseDecimalLiteral(i);break;case 138:{const t=this.state.startLoc;null!=e?null===e.privateKeyLoc&&(e.privateKeyLoc=t):this.raise(g.UnexpectedPrivateField,{at:t}),r=this.parsePrivateName();break}default:this.unexpected()}t.key=r,138!==s&&(t.computed=!1)}return t.key}initFunction(t,e){t.id=null,t.generator=!1,t.async=e}parseMethod(t,e,s,i,r,n,a=!1){this.initFunction(t,s),t.generator=e,this.scope.enter(18|(a?64:0)|(r?32:0)),this.prodParam.enter(ee(s,t.generator)),this.parseFunctionParams(t,i);const o=this.parseFunctionBodyAndFinish(t,n,!0);return this.prodParam.exit(),this.scope.exit(),o}parseArrayLike(t,e,s,i){s&&this.expectPlugin("recordAndTuple");const r=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;const n=this.startNode();return this.next(),n.elements=this.parseExprList(t,!s,i,n),this.state.inFSharpPipelineDirectBody=r,this.finishNode(n,s?"TupleExpression":"ArrayExpression")}parseArrowExpression(t,e,s,i){this.scope.enter(6);let r=ee(s,!1);!this.match(5)&&this.prodParam.hasIn&&(r|=8),this.prodParam.enter(r),this.initFunction(t,s);const n=this.state.maybeInArrowParameters;return e&&(this.state.maybeInArrowParameters=!0,this.setArrowFunctionParameters(t,e,i)),this.state.maybeInArrowParameters=!1,this.parseFunctionBody(t,!0),this.prodParam.exit(),this.scope.exit(),this.state.maybeInArrowParameters=n,this.finishNode(t,"ArrowFunctionExpression")}setArrowFunctionParameters(t,e,s){this.toAssignableList(e,s,!1),t.params=e}parseFunctionBodyAndFinish(t,e,s=!1){return this.parseFunctionBody(t,!1,s),this.finishNode(t,e)}parseFunctionBody(t,e,s=!1){const i=e&&!this.match(5);if(this.expressionScope.enter(Kt()),i)t.body=this.parseMaybeAssign(),this.checkParams(t,!1,e,!1);else{const i=this.state.strict,r=this.state.labels;this.state.labels=[],this.prodParam.enter(4|this.prodParam.currentFlags()),t.body=this.parseBlock(!0,!1,(r=>{const n=!this.isSimpleParamList(t.params);r&&n&&this.raise(g.IllegalLanguageModeDirective,{at:"method"!==t.kind&&"constructor"!==t.kind||!t.key?t:t.key.loc.end});const a=!i&&this.state.strict;this.checkParams(t,!(this.state.strict||e||s||n),e,a),this.state.strict&&t.id&&this.checkIdentifier(t.id,65,a)})),this.prodParam.exit(),this.state.labels=r}this.expressionScope.exit()}isSimpleParameter(t){return"Identifier"===t.type}isSimpleParamList(t){for(let e=0,s=t.length;e<s;e++)if(!this.isSimpleParameter(t[e]))return!1;return!0}checkParams(t,e,s,i=!0){const r=!e&&new Set,n={type:"FormalParameters"};for(const e of t.params)this.checkLVal(e,{in:n,binding:5,checkClashes:r,strictModeChanged:i})}parseExprList(t,e,s,i){const r=[];let n=!0;for(;!this.eat(t);){if(n)n=!1;else if(this.expect(12),this.match(t)){i&&this.addTrailingCommaExtraToNode(i),this.next();break}r.push(this.parseExprListItem(e,s))}return r}parseExprListItem(t,e,s){let i;if(this.match(12))t||this.raise(g.UnexpectedToken,{at:this.state.curPosition(),unexpected:","}),i=null;else if(this.match(21)){const t=this.state.startLoc;i=this.parseParenItem(this.parseSpread(e),t)}else if(this.match(17)){this.expectPlugin("partialApplication"),s||this.raise(g.UnexpectedArgumentPlaceholder,{at:this.state.startLoc});const t=this.startNode();this.next(),i=this.finishNode(t,"ArgumentPlaceholder")}else i=this.parseMaybeAssignAllowIn(e,this.parseParenItem);return i}parseIdentifier(t){const e=this.startNode(),s=this.parseIdentifierName(t);return this.createIdentifier(e,s)}createIdentifier(t,e){return t.name=e,t.loc.identifierName=e,this.finishNode(t,"Identifier")}parseIdentifierName(t){let e;const{startLoc:s,type:i}=this.state;z(i)?e=this.state.value:this.unexpected();const r=i<=92;return t?r&&this.replaceToken(132):this.checkReservedWord(e,s,r,!1),this.next(),e}checkReservedWord(t,e,s,i){if(!(t.length>10)&&function(t){return ft.has(t)}(t))if(s&&function(t){return ht.has(t)}(t))this.raise(g.UnexpectedKeyword,{at:e,keyword:t});else if((this.state.strict?i?mt:ut:pt)(t,this.inModule))this.raise(g.UnexpectedReservedWord,{at:e,reservedWord:t});else if("yield"===t){if(this.prodParam.hasYield)return void this.raise(g.YieldBindingIdentifier,{at:e})}else if("await"===t){if(this.prodParam.hasAwait)return void this.raise(g.AwaitBindingIdentifier,{at:e});if(this.scope.inStaticBlock)return void this.raise(g.AwaitBindingIdentifierInStaticBlock,{at:e});this.expressionScope.recordAsyncArrowParametersError({at:e})}else if("arguments"===t&&this.scope.inClassAndNotInNonArrowFunction)return void this.raise(g.ArgumentsInClass,{at:e})}isAwaitAllowed(){return!!this.prodParam.hasAwait||!(!this.options.allowAwaitOutsideFunction||this.scope.inFunction)}parseAwait(t){const e=this.startNodeAt(t);return this.expressionScope.recordParameterInitializerError(g.AwaitExpressionFormalParameter,{at:e}),this.eat(55)&&this.raise(g.ObsoleteAwaitStar,{at:e}),this.scope.inFunction||this.options.allowAwaitOutsideFunction||(this.isAmbiguousAwait()?this.ambiguousScriptDifferentAst=!0:this.sawUnambiguousESM=!0),this.state.soloAwait||(e.argument=this.parseMaybeUnary(null,!0)),this.finishNode(e,"AwaitExpression")}isAmbiguousAwait(){if(this.hasPrecedingLineBreak())return!0;const{type:t}=this.state;return 53===t||10===t||0===t||q(t)||102===t&&!this.state.containsEsc||137===t||56===t||this.hasPlugin("v8intrinsic")&&54===t}parseYield(){const t=this.startNode();this.expressionScope.recordParameterInitializerError(g.YieldInParameter,{at:t}),this.next();let e=!1,s=null;if(!this.hasPrecedingLineBreak())switch(e=this.eat(55),this.state.type){case 13:case 139:case 8:case 11:case 3:case 9:case 14:case 12:if(!e)break;default:s=this.parseMaybeAssign()}return t.delegate=e,t.argument=s,this.finishNode(t,"YieldExpression")}parseImportCall(t){return this.next(),t.source=this.parseMaybeAssignAllowIn(),(this.hasPlugin("importAttributes")||this.hasPlugin("importAssertions"))&&(t.options=null),this.eat(12)&&(this.expectImportAttributesPlugin(),this.match(11)||(t.options=this.parseMaybeAssignAllowIn(),this.eat(12))),this.expect(11),this.finishNode(t,"ImportExpression")}checkPipelineAtInfixOperator(t,e){this.hasPlugin(["pipelineOperator",{proposal:"smart"}])&&"SequenceExpression"===t.type&&this.raise(g.PipelineHeadSequenceExpression,{at:e})}parseSmartPipelineBodyInStyle(t,e){if(this.isSimpleReference(t)){const s=this.startNodeAt(e);return s.callee=t,this.finishNode(s,"PipelineBareFunction")}{const s=this.startNodeAt(e);return this.checkSmartPipeTopicBodyEarlyErrors(e),s.expression=t,this.finishNode(s,"PipelineTopicExpression")}}isSimpleReference(t){switch(t.type){case"MemberExpression":return!t.computed&&this.isSimpleReference(t.object);case"Identifier":return!0;default:return!1}}checkSmartPipeTopicBodyEarlyErrors(t){if(this.match(19))throw this.raise(g.PipelineBodyNoArrow,{at:this.state.startLoc});this.topicReferenceWasUsedInCurrentContext()||this.raise(g.PipelineTopicUnused,{at:t})}withTopicBindingContext(t){const e=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:1,maxTopicIndex:null};try{return t()}finally{this.state.topicContext=e}}withSmartMixTopicForbiddingContext(t){if(!this.hasPlugin(["pipelineOperator",{proposal:"smart"}]))return t();{const e=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null};try{return t()}finally{this.state.topicContext=e}}}withSoloAwaitPermittingContext(t){const e=this.state.soloAwait;this.state.soloAwait=!0;try{return t()}finally{this.state.soloAwait=e}}allowInAnd(t){const e=this.prodParam.currentFlags();if(8&~e){this.prodParam.enter(8|e);try{return t()}finally{this.prodParam.exit()}}return t()}disallowInAnd(t){const e=this.prodParam.currentFlags();if(8&e){this.prodParam.enter(-9&e);try{return t()}finally{this.prodParam.exit()}}return t()}registerTopicReference(){this.state.topicContext.maxTopicIndex=0}topicReferenceIsAllowedInCurrentContext(){return this.state.topicContext.maxNumOfResolvableTopics>=1}topicReferenceWasUsedInCurrentContext(){return null!=this.state.topicContext.maxTopicIndex&&this.state.topicContext.maxTopicIndex>=0}parseFSharpPipelineBody(t){const e=this.state.startLoc;this.state.potentialArrowAt=this.state.start;const s=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!0;const i=this.parseExprOp(this.parseMaybeUnaryOrPrivate(),e,t);return this.state.inFSharpPipelineDirectBody=s,i}parseModuleExpression(){this.expectPlugin("moduleBlocks");const t=this.startNode();this.next(),this.match(5)||this.unexpected(null,5);const e=this.startNodeAt(this.state.endLoc);this.next();const s=this.initializeScopes(!0);this.enterInitialScopes();try{t.body=this.parseProgram(e,8,"module")}finally{s()}return this.finishNode(t,"ModuleExpression")}parsePropertyNamePrefixOperator(t){}}const We={kind:"loop"},Re={kind:"switch"},Fe=/[\uD800-\uDFFF]/u,Je=/in(?:stanceof)?/y;class Ue extends Ye{parseTopLevel(t,e){return t.program=this.parseProgram(e),t.comments=this.state.comments,this.options.tokens&&(t.tokens=function(t,e){for(let s=0;s<t.length;s++){const i=t[s],{type:r}=i;if("number"==typeof r){if(138===r){const{loc:e,start:r,value:a,end:o}=i,h=r+1,c=n(e.start,1);t.splice(s,1,new Vt({type:$(27),value:"#",start:r,end:h,startLoc:e.start,endLoc:c}),new Vt({type:$(132),value:a,start:h,end:o,startLoc:c,endLoc:e.end})),s++;continue}if(q(r)){const{loc:a,start:o,value:h,end:c}=i,l=o+1,p=n(a.start,1);let u,d,m,f,y;u=96===e.charCodeAt(o)?new Vt({type:$(22),value:"`",start:o,end:l,startLoc:a.start,endLoc:p}):new Vt({type:$(8),value:"}",start:o,end:l,startLoc:a.start,endLoc:p}),24===r?(m=c-1,f=n(a.end,-1),d=null===h?null:h.slice(1,-1),y=new Vt({type:$(22),value:"`",start:m,end:c,startLoc:f,endLoc:a.end})):(m=c-2,f=n(a.end,-2),d=null===h?null:h.slice(1,-2),y=new Vt({type:$(23),value:"${",start:m,end:c,startLoc:f,endLoc:a.end})),t.splice(s,1,u,new Vt({type:$(20),value:d,start:l,end:m,startLoc:p,endLoc:f}),y),s+=2;continue}i.type=$(r)}}return t}(this.tokens,this.input)),this.finishNode(t,"File")}parseProgram(t,e=139,s=this.options.sourceType){if(t.sourceType=s,t.interpreter=this.parseInterpreterDirective(),this.parseBlockBody(t,!0,!0,e),this.inModule&&!this.options.allowUndeclaredExports&&this.scope.undefinedExports.size>0)for(const[t,e]of Array.from(this.scope.undefinedExports))this.raise(g.ModuleExportUndefined,{at:e,localName:t});let i;return i=139===e?this.finishNode(t,"Program"):this.finishNodeAt(t,"Program",n(this.state.startLoc,-1)),i}stmtToDirective(t){const e=t;e.type="Directive",e.value=e.expression,delete e.expression;const s=e.value,i=s.value,r=this.input.slice(s.start,s.end),n=s.value=r.slice(1,-1);return this.addExtra(s,"raw",r),this.addExtra(s,"rawValue",n),this.addExtra(s,"expressionValue",i),s.type="DirectiveLiteral",e}parseInterpreterDirective(){if(!this.match(28))return null;const t=this.startNode();return t.value=this.state.value,this.next(),this.finishNode(t,"InterpreterDirective")}isLet(){return!!this.isContextual(100)&&this.hasFollowingBindingAtom()}chStartsBindingIdentifier(t,e){if(at(t)){if(Je.lastIndex=e,Je.test(this.input)){const t=this.codePointAtPos(Je.lastIndex);if(!ot(t)&&92!==t)return!1}return!0}return 92===t}chStartsBindingPattern(t){return 91===t||123===t}hasFollowingBindingAtom(){const t=this.nextTokenStart(),e=this.codePointAtPos(t);return this.chStartsBindingPattern(e)||this.chStartsBindingIdentifier(e,t)}hasInLineFollowingBindingIdentifier(){const t=this.nextTokenInLineStart(),e=this.codePointAtPos(t);return this.chStartsBindingIdentifier(e,t)}startsUsingForOf(){const{type:t,containsEsc:e}=this.lookahead();return!(102===t&&!e)&&(U(t)&&!this.hasFollowingLineBreak()?(this.expectPlugin("explicitResourceManagement"),!0):void 0)}startsAwaitUsing(){let t=this.nextTokenInLineStart();if(this.isUnparsedContextual(t,"using")){t=this.nextTokenInLineStartSince(t+5);const e=this.codePointAtPos(t);if(this.chStartsBindingIdentifier(e,t))return this.expectPlugin("explicitResourceManagement"),!0}return!1}parseModuleItem(){return this.parseStatementLike(15)}parseStatementListItem(){return this.parseStatementLike(6|(!this.options.annexB||this.state.strict?0:8))}parseStatementOrSloppyAnnexBFunctionDeclaration(t=!1){let e=0;return this.options.annexB&&!this.state.strict&&(e|=4,t&&(e|=8)),this.parseStatementLike(e)}parseStatement(){return this.parseStatementLike(0)}parseStatementLike(t){let e=null;return this.match(26)&&(e=this.parseDecorators(!0)),this.parseStatementContent(t,e)}parseStatementContent(t,e){const s=this.state.type,i=this.startNode(),r=!!(2&t),n=!!(4&t),a=1&t;switch(s){case 60:return this.parseBreakContinueStatement(i,!0);case 63:return this.parseBreakContinueStatement(i,!1);case 64:return this.parseDebuggerStatement(i);case 90:return this.parseDoWhileStatement(i);case 91:return this.parseForStatement(i);case 68:if(46===this.lookaheadCharCode())break;return n||this.raise(this.state.strict?g.StrictFunction:this.options.annexB?g.SloppyFunctionAnnexB:g.SloppyFunction,{at:this.state.startLoc}),this.parseFunctionStatement(i,!1,!r&&n);case 80:return r||this.unexpected(),this.parseClass(this.maybeTakeDecorators(e,i),!0);case 69:return this.parseIfStatement(i);case 70:return this.parseReturnStatement(i);case 71:return this.parseSwitchStatement(i);case 72:return this.parseThrowStatement(i);case 73:return this.parseTryStatement(i);case 96:if(!this.state.containsEsc&&this.startsAwaitUsing())return this.isAwaitAllowed()?r||this.raise(g.UnexpectedLexicalDeclaration,{at:i}):this.raise(g.AwaitUsingNotInAsyncContext,{at:i}),this.next(),this.parseVarStatement(i,"await using");break;case 107:if(this.state.containsEsc||!this.hasInLineFollowingBindingIdentifier())break;return this.expectPlugin("explicitResourceManagement"),!this.scope.inModule&&this.scope.inTopLevel?this.raise(g.UnexpectedUsingDeclaration,{at:this.state.startLoc}):r||this.raise(g.UnexpectedLexicalDeclaration,{at:this.state.startLoc}),this.parseVarStatement(i,"using");case 100:{if(this.state.containsEsc)break;const t=this.nextTokenStart(),e=this.codePointAtPos(t);if(91!==e){if(!r&&this.hasFollowingLineBreak())break;if(!this.chStartsBindingIdentifier(e,t)&&123!==e)break}}case 75:r||this.raise(g.UnexpectedLexicalDeclaration,{at:this.state.startLoc});case 74:{const t=this.state.value;return this.parseVarStatement(i,t)}case 92:return this.parseWhileStatement(i);case 76:return this.parseWithStatement(i);case 5:return this.parseBlock();case 13:return this.parseEmptyStatement(i);case 83:{const t=this.lookaheadCharCode();if(40===t||46===t)break}case 82:{let t;return this.options.allowImportExportEverywhere||a||this.raise(g.UnexpectedImportExport,{at:this.state.startLoc}),this.next(),83===s?(t=this.parseImport(i),"ImportDeclaration"!==t.type||t.importKind&&"value"!==t.importKind||(this.sawUnambiguousESM=!0)):(t=this.parseExport(i,e),("ExportNamedDeclaration"!==t.type||t.exportKind&&"value"!==t.exportKind)&&("ExportAllDeclaration"!==t.type||t.exportKind&&"value"!==t.exportKind)&&"ExportDefaultDeclaration"!==t.type||(this.sawUnambiguousESM=!0)),this.assertModuleNodeAllowed(t),t}default:if(this.isAsyncFunction())return r||this.raise(g.AsyncFunctionInSingleStatementContext,{at:this.state.startLoc}),this.next(),this.parseFunctionStatement(i,!0,!r&&n)}const o=this.state.value,h=this.parseExpression();return U(s)&&"Identifier"===h.type&&this.eat(14)?this.parseLabeledStatement(i,o,h,t):this.parseExpressionStatement(i,h,e)}assertModuleNodeAllowed(t){this.options.allowImportExportEverywhere||this.inModule||this.raise(g.ImportOutsideModule,{at:t})}decoratorsEnabledBeforeExport(){return!!this.hasPlugin("decorators-legacy")||this.hasPlugin("decorators")&&!1!==this.getPluginOption("decorators","decoratorsBeforeExport")}maybeTakeDecorators(t,e,s){return t&&(e.decorators&&e.decorators.length>0?("boolean"!=typeof this.getPluginOption("decorators","decoratorsBeforeExport")&&this.raise(g.DecoratorsBeforeAfterExport,{at:e.decorators[0]}),e.decorators.unshift(...t)):e.decorators=t,this.resetStartLocationFromNode(e,t[0]),s&&this.resetStartLocationFromNode(s,e)),e}canHaveLeadingDecorator(){return this.match(80)}parseDecorators(t){const e=[];do{e.push(this.parseDecorator())}while(this.match(26));if(this.match(82))t||this.unexpected(),this.decoratorsEnabledBeforeExport()||this.raise(g.DecoratorExportClass,{at:this.state.startLoc});else if(!this.canHaveLeadingDecorator())throw this.raise(g.UnexpectedLeadingDecorator,{at:this.state.startLoc});return e}parseDecorator(){this.expectOnePlugin(["decorators","decorators-legacy"]);const t=this.startNode();if(this.next(),this.hasPlugin("decorators")){const e=this.state.startLoc;let s;if(this.match(10)){const e=this.state.startLoc;this.next(),s=this.parseExpression(),this.expect(11),s=this.wrapParenthesis(e,s);const i=this.state.startLoc;t.expression=this.parseMaybeDecoratorArguments(s),!1===this.getPluginOption("decorators","allowCallParenthesized")&&t.expression!==s&&this.raise(g.DecoratorArgumentsOutsideParentheses,{at:i})}else{for(s=this.parseIdentifier(!1);this.eat(16);){const t=this.startNodeAt(e);t.object=s,this.match(138)?(this.classScope.usePrivateName(this.state.value,this.state.startLoc),t.property=this.parsePrivateName()):t.property=this.parseIdentifier(!0),t.computed=!1,s=this.finishNode(t,"MemberExpression")}t.expression=this.parseMaybeDecoratorArguments(s)}}else t.expression=this.parseExprSubscripts();return this.finishNode(t,"Decorator")}parseMaybeDecoratorArguments(t){if(this.eat(10)){const e=this.startNodeAtNode(t);return e.callee=t,e.arguments=this.parseCallExpressionArguments(11,!1),this.toReferencedList(e.arguments),this.finishNode(e,"CallExpression")}return t}parseBreakContinueStatement(t,e){return this.next(),this.isLineTerminator()?t.label=null:(t.label=this.parseIdentifier(),this.semicolon()),this.verifyBreakContinue(t,e),this.finishNode(t,e?"BreakStatement":"ContinueStatement")}verifyBreakContinue(t,e){let s;for(s=0;s<this.state.labels.length;++s){const i=this.state.labels[s];if(null==t.label||i.name===t.label.name){if(null!=i.kind&&(e||"loop"===i.kind))break;if(t.label&&e)break}}if(s===this.state.labels.length){const s=e?"BreakStatement":"ContinueStatement";this.raise(g.IllegalBreakContinue,{at:t,type:s})}}parseDebuggerStatement(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")}parseHeaderExpression(){this.expect(10);const t=this.parseExpression();return this.expect(11),t}parseDoWhileStatement(t){return this.next(),this.state.labels.push(We),t.body=this.withSmartMixTopicForbiddingContext((()=>this.parseStatement())),this.state.labels.pop(),this.expect(92),t.test=this.parseHeaderExpression(),this.eat(13),this.finishNode(t,"DoWhileStatement")}parseForStatement(t){this.next(),this.state.labels.push(We);let e=null;if(this.isAwaitAllowed()&&this.eatContextual(96)&&(e=this.state.lastTokStartLoc),this.scope.enter(0),this.expect(10),this.match(13))return null!==e&&this.unexpected(e),this.parseFor(t,null);const s=this.isContextual(100);{const i=this.isContextual(96)&&this.startsAwaitUsing(),r=i||this.isContextual(107)&&this.startsUsingForOf(),n=s&&this.hasFollowingBindingAtom()||r;if(this.match(74)||this.match(75)||n){const s=this.startNode();let n;i?(n="await using",this.isAwaitAllowed()||this.raise(g.AwaitUsingNotInAsyncContext,{at:this.state.startLoc}),this.next()):n=this.state.value,this.next(),this.parseVar(s,!0,n);const a=this.finishNode(s,"VariableDeclaration"),o=this.match(58);return o&&r&&this.raise(g.ForInUsing,{at:a}),(o||this.isContextual(102))&&1===a.declarations.length?this.parseForIn(t,a,e):(null!==e&&this.unexpected(e),this.parseFor(t,a))}}const i=this.isContextual(95),r=new ie,n=this.parseExpression(!0,r),a=this.isContextual(102);if(a&&(s&&this.raise(g.ForOfLet,{at:n}),null===e&&i&&"Identifier"===n.type&&this.raise(g.ForOfAsync,{at:n})),a||this.match(58)){this.checkDestructuringPrivate(r),this.toAssignable(n,!0);const s=a?"ForOfStatement":"ForInStatement";return this.checkLVal(n,{in:{type:s}}),this.parseForIn(t,n,e)}return this.checkExpressionErrors(r,!0),null!==e&&this.unexpected(e),this.parseFor(t,n)}parseFunctionStatement(t,e,s){return this.next(),this.parseFunction(t,1|(s?2:0)|(e?8:0))}parseIfStatement(t){return this.next(),t.test=this.parseHeaderExpression(),t.consequent=this.parseStatementOrSloppyAnnexBFunctionDeclaration(),t.alternate=this.eat(66)?this.parseStatementOrSloppyAnnexBFunctionDeclaration():null,this.finishNode(t,"IfStatement")}parseReturnStatement(t){return this.prodParam.hasReturn||this.options.allowReturnOutsideFunction||this.raise(g.IllegalReturn,{at:this.state.startLoc}),this.next(),this.isLineTerminator()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")}parseSwitchStatement(t){this.next(),t.discriminant=this.parseHeaderExpression();const e=t.cases=[];let s;this.expect(5),this.state.labels.push(Re),this.scope.enter(0);for(let t;!this.match(8);)if(this.match(61)||this.match(65)){const i=this.match(61);s&&this.finishNode(s,"SwitchCase"),e.push(s=this.startNode()),s.consequent=[],this.next(),i?s.test=this.parseExpression():(t&&this.raise(g.MultipleDefaultsInSwitch,{at:this.state.lastTokStartLoc}),t=!0,s.test=null),this.expect(14)}else s?s.consequent.push(this.parseStatementListItem()):this.unexpected();return this.scope.exit(),s&&this.finishNode(s,"SwitchCase"),this.next(),this.state.labels.pop(),this.finishNode(t,"SwitchStatement")}parseThrowStatement(t){return this.next(),this.hasPrecedingLineBreak()&&this.raise(g.NewlineAfterThrow,{at:this.state.lastTokEndLoc}),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")}parseCatchClauseParam(){const t=this.parseBindingAtom();return this.scope.enter(this.options.annexB&&"Identifier"===t.type?8:0),this.checkLVal(t,{in:{type:"CatchClause"},binding:9}),t}parseTryStatement(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.match(62)){const e=this.startNode();this.next(),this.match(10)?(this.expect(10),e.param=this.parseCatchClauseParam(),this.expect(11)):(e.param=null,this.scope.enter(0)),e.body=this.withSmartMixTopicForbiddingContext((()=>this.parseBlock(!1,!1))),this.scope.exit(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(67)?this.parseBlock():null,t.handler||t.finalizer||this.raise(g.NoCatchOrFinally,{at:t}),this.finishNode(t,"TryStatement")}parseVarStatement(t,e,s=!1){return this.next(),this.parseVar(t,!1,e,s),this.semicolon(),this.finishNode(t,"VariableDeclaration")}parseWhileStatement(t){return this.next(),t.test=this.parseHeaderExpression(),this.state.labels.push(We),t.body=this.withSmartMixTopicForbiddingContext((()=>this.parseStatement())),this.state.labels.pop(),this.finishNode(t,"WhileStatement")}parseWithStatement(t){return this.state.strict&&this.raise(g.StrictWith,{at:this.state.startLoc}),this.next(),t.object=this.parseHeaderExpression(),t.body=this.withSmartMixTopicForbiddingContext((()=>this.parseStatement())),this.finishNode(t,"WithStatement")}parseEmptyStatement(t){return this.next(),this.finishNode(t,"EmptyStatement")}parseLabeledStatement(t,e,s,i){for(const t of this.state.labels)t.name===e&&this.raise(g.LabelRedeclaration,{at:s,labelName:e});const r=(n=this.state.type)>=90&&n<=92?"loop":this.match(71)?"switch":null;var n;for(let e=this.state.labels.length-1;e>=0;e--){const s=this.state.labels[e];if(s.statementStart!==t.start)break;s.statementStart=this.state.start,s.kind=r}return this.state.labels.push({name:e,kind:r,statementStart:this.state.start}),t.body=8&i?this.parseStatementOrSloppyAnnexBFunctionDeclaration(!0):this.parseStatement(),this.state.labels.pop(),t.label=s,this.finishNode(t,"LabeledStatement")}parseExpressionStatement(t,e,s){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")}parseBlock(t=!1,e=!0,s){const i=this.startNode();return t&&this.state.strictErrors.clear(),this.expect(5),e&&this.scope.enter(0),this.parseBlockBody(i,t,!1,8,s),e&&this.scope.exit(),this.finishNode(i,"BlockStatement")}isValidDirective(t){return"ExpressionStatement"===t.type&&"StringLiteral"===t.expression.type&&!t.expression.extra.parenthesized}parseBlockBody(t,e,s,i,r){const n=t.body=[],a=t.directives=[];this.parseBlockOrModuleBlockBody(n,e?a:void 0,s,i,r)}parseBlockOrModuleBlockBody(t,e,s,i,r){const n=this.state.strict;let a=!1,o=!1;for(;!this.match(i);){const i=s?this.parseModuleItem():this.parseStatementListItem();if(e&&!o){if(this.isValidDirective(i)){const t=this.stmtToDirective(i);e.push(t),a||"use strict"!==t.value.value||(a=!0,this.setStrict(!0));continue}o=!0,this.state.strictErrors.clear()}t.push(i)}null==r||r.call(this,a),n||this.setStrict(!1),this.next()}parseFor(t,e){return t.init=e,this.semicolon(!1),t.test=this.match(13)?null:this.parseExpression(),this.semicolon(!1),t.update=this.match(11)?null:this.parseExpression(),this.expect(11),t.body=this.withSmartMixTopicForbiddingContext((()=>this.parseStatement())),this.scope.exit(),this.state.labels.pop(),this.finishNode(t,"ForStatement")}parseForIn(t,e,s){const i=this.match(58);return this.next(),i?null!==s&&this.unexpected(s):t.await=null!==s,"VariableDeclaration"!==e.type||null==e.declarations[0].init||i&&this.options.annexB&&!this.state.strict&&"var"===e.kind&&"Identifier"===e.declarations[0].id.type||this.raise(g.ForInOfLoopInitializer,{at:e,type:i?"ForInStatement":"ForOfStatement"}),"AssignmentPattern"===e.type&&this.raise(g.InvalidLhs,{at:e,ancestor:{type:"ForStatement"}}),t.left=e,t.right=i?this.parseExpression():this.parseMaybeAssignAllowIn(),this.expect(11),t.body=this.withSmartMixTopicForbiddingContext((()=>this.parseStatement())),this.scope.exit(),this.state.labels.pop(),this.finishNode(t,i?"ForInStatement":"ForOfStatement")}parseVar(t,e,s,i=!1){const r=t.declarations=[];for(t.kind=s;;){const t=this.startNode();if(this.parseVarId(t,s),t.init=this.eat(29)?e?this.parseMaybeAssignDisallowIn():this.parseMaybeAssignAllowIn():null,null!==t.init||i||("Identifier"===t.id.type||e&&(this.match(58)||this.isContextual(102))?"const"!==s||this.match(58)||this.isContextual(102)||this.raise(g.DeclarationMissingInitializer,{at:this.state.lastTokEndLoc,kind:"const"}):this.raise(g.DeclarationMissingInitializer,{at:this.state.lastTokEndLoc,kind:"destructuring"})),r.push(this.finishNode(t,"VariableDeclarator")),!this.eat(12))break}return t}parseVarId(t,e){const s=this.parseBindingAtom();this.checkLVal(s,{in:{type:"VariableDeclarator"},binding:"var"===e?5:8201}),t.id=s}parseAsyncFunctionExpression(t){return this.parseFunction(t,8)}parseFunction(t,e=0){const s=2&e,i=!!(1&e),r=i&&!(4&e),n=!!(8&e);this.initFunction(t,n),this.match(55)&&(s&&this.raise(g.GeneratorInSingleStatementContext,{at:this.state.startLoc}),this.next(),t.generator=!0),i&&(t.id=this.parseFunctionId(r));const a=this.state.maybeInArrowParameters;return this.state.maybeInArrowParameters=!1,this.scope.enter(2),this.prodParam.enter(ee(n,t.generator)),i||(t.id=this.parseFunctionId()),this.parseFunctionParams(t,!1),this.withSmartMixTopicForbiddingContext((()=>{this.parseFunctionBodyAndFinish(t,i?"FunctionDeclaration":"FunctionExpression")})),this.prodParam.exit(),this.scope.exit(),i&&!s&&this.registerFunctionStatementId(t),this.state.maybeInArrowParameters=a,t}parseFunctionId(t){return t||U(this.state.type)?this.parseIdentifier():null}parseFunctionParams(t,e){this.expect(10),this.expressionScope.enter(new Qt(3)),t.params=this.parseBindingList(11,41,2|(e?4:0)),this.expressionScope.exit()}registerFunctionStatementId(t){t.id&&this.scope.declareName(t.id.name,!this.options.annexB||this.state.strict||t.generator||t.async?this.scope.treatFunctionsAsVar?5:8201:17,t.id.loc.start)}parseClass(t,e,s){this.next();const i=this.state.strict;return this.state.strict=!0,this.parseClassId(t,e,s),this.parseClassSuper(t),t.body=this.parseClassBody(!!t.superClass,i),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")}isClassProperty(){return this.match(29)||this.match(13)||this.match(8)}isClassMethod(){return this.match(10)}isNonstaticConstructor(t){return!(t.computed||t.static||"constructor"!==t.key.name&&"constructor"!==t.key.value)}parseClassBody(t,e){this.classScope.enter();const s={hadConstructor:!1,hadSuperClass:t};let i=[];const r=this.startNode();if(r.body=[],this.expect(5),this.withSmartMixTopicForbiddingContext((()=>{for(;!this.match(8);){if(this.eat(13)){if(i.length>0)throw this.raise(g.DecoratorSemicolon,{at:this.state.lastTokEndLoc});continue}if(this.match(26)){i.push(this.parseDecorator());continue}const t=this.startNode();i.length&&(t.decorators=i,this.resetStartLocationFromNode(t,i[0]),i=[]),this.parseClassMember(r,t,s),"constructor"===t.kind&&t.decorators&&t.decorators.length>0&&this.raise(g.DecoratorConstructor,{at:t})}})),this.state.strict=e,this.next(),i.length)throw this.raise(g.TrailingDecorator,{at:this.state.startLoc});return this.classScope.exit(),this.finishNode(r,"ClassBody")}parseClassMemberFromModifier(t,e){const s=this.parseIdentifier(!0);if(this.isClassMethod()){const i=e;return i.kind="method",i.computed=!1,i.key=s,i.static=!1,this.pushClassMethod(t,i,!1,!1,!1,!1),!0}if(this.isClassProperty()){const i=e;return i.computed=!1,i.key=s,i.static=!1,t.body.push(this.parseClassProperty(i)),!0}return this.resetPreviousNodeTrailingComments(s),!1}parseClassMember(t,e,s){const i=this.isContextual(106);if(i){if(this.parseClassMemberFromModifier(t,e))return;if(this.eat(5))return void this.parseClassStaticBlock(t,e)}this.parseClassMemberWithIsStatic(t,e,s,i)}parseClassMemberWithIsStatic(t,e,s,i){const r=e,n=e,a=e,o=e,h=e,c=r,l=r;if(e.static=i,this.parsePropertyNamePrefixOperator(e),this.eat(55)){c.kind="method";const e=this.match(138);return this.parseClassElementName(c),e?void this.pushClassPrivateMethod(t,n,!0,!1):(this.isNonstaticConstructor(r)&&this.raise(g.ConstructorIsGenerator,{at:r.key}),void this.pushClassMethod(t,r,!0,!1,!1,!1))}const p=U(this.state.type)&&!this.state.containsEsc,u=this.match(138),d=this.parseClassElementName(e),m=this.state.startLoc;if(this.parsePostMemberNameModifiers(l),this.isClassMethod()){if(c.kind="method",u)return void this.pushClassPrivateMethod(t,n,!1,!1);const i=this.isNonstaticConstructor(r);let a=!1;i&&(r.kind="constructor",s.hadConstructor&&!this.hasPlugin("typescript")&&this.raise(g.DuplicateConstructor,{at:d}),i&&this.hasPlugin("typescript")&&e.override&&this.raise(g.OverrideOnConstructor,{at:d}),s.hadConstructor=!0,a=s.hadSuperClass),this.pushClassMethod(t,r,!1,!1,i,a)}else if(this.isClassProperty())u?this.pushClassPrivateProperty(t,o):this.pushClassProperty(t,a);else if(p&&"async"===d.name&&!this.isLineTerminator()){this.resetPreviousNodeTrailingComments(d);const e=this.eat(55);l.optional&&this.unexpected(m),c.kind="method";const s=this.match(138);this.parseClassElementName(c),this.parsePostMemberNameModifiers(l),s?this.pushClassPrivateMethod(t,n,e,!0):(this.isNonstaticConstructor(r)&&this.raise(g.ConstructorIsAsync,{at:r.key}),this.pushClassMethod(t,r,e,!0,!1,!1))}else if(!p||"get"!==d.name&&"set"!==d.name||this.match(55)&&this.isLineTerminator())if(p&&"accessor"===d.name&&!this.isLineTerminator()){this.expectPlugin("decoratorAutoAccessors"),this.resetPreviousNodeTrailingComments(d);const e=this.match(138);this.parseClassElementName(a),this.pushClassAccessorProperty(t,h,e)}else this.isLineTerminator()?u?this.pushClassPrivateProperty(t,o):this.pushClassProperty(t,a):this.unexpected();else{this.resetPreviousNodeTrailingComments(d),c.kind=d.name;const e=this.match(138);this.parseClassElementName(r),e?this.pushClassPrivateMethod(t,n,!1,!1):(this.isNonstaticConstructor(r)&&this.raise(g.ConstructorIsAccessor,{at:r.key}),this.pushClassMethod(t,r,!1,!1,!1,!1)),this.checkGetterSetterParams(r)}}parseClassElementName(t){const{type:e,value:s}=this.state;if(132!==e&&133!==e||!t.static||"prototype"!==s||this.raise(g.StaticPrototype,{at:this.state.startLoc}),138===e){"constructor"===s&&this.raise(g.ConstructorClassPrivateField,{at:this.state.startLoc});const e=this.parsePrivateName();return t.key=e,e}return this.parsePropertyName(t)}parseClassStaticBlock(t,e){var s;this.scope.enter(208);const i=this.state.labels;this.state.labels=[],this.prodParam.enter(0);const r=e.body=[];this.parseBlockOrModuleBlockBody(r,void 0,!1,8),this.prodParam.exit(),this.scope.exit(),this.state.labels=i,t.body.push(this.finishNode(e,"StaticBlock")),null!=(s=e.decorators)&&s.length&&this.raise(g.DecoratorStaticBlock,{at:e})}pushClassProperty(t,e){e.computed||"constructor"!==e.key.name&&"constructor"!==e.key.value||this.raise(g.ConstructorClassField,{at:e.key}),t.body.push(this.parseClassProperty(e))}pushClassPrivateProperty(t,e){const s=this.parseClassPrivateProperty(e);t.body.push(s),this.classScope.declarePrivateName(this.getPrivateNameSV(s.key),0,s.key.loc.start)}pushClassAccessorProperty(t,e,s){if(!s&&!e.computed){const t=e.key;"constructor"!==t.name&&"constructor"!==t.value||this.raise(g.ConstructorClassField,{at:t})}const i=this.parseClassAccessorProperty(e);t.body.push(i),s&&this.classScope.declarePrivateName(this.getPrivateNameSV(i.key),0,i.key.loc.start)}pushClassMethod(t,e,s,i,r,n){t.body.push(this.parseMethod(e,s,i,r,n,"ClassMethod",!0))}pushClassPrivateMethod(t,e,s,i){const r=this.parseMethod(e,s,i,!1,!1,"ClassPrivateMethod",!0);t.body.push(r);const n="get"===r.kind?r.static?6:2:"set"===r.kind?r.static?5:1:0;this.declareClassPrivateMethodInScope(r,n)}declareClassPrivateMethodInScope(t,e){this.classScope.declarePrivateName(this.getPrivateNameSV(t.key),e,t.key.loc.start)}parsePostMemberNameModifiers(t){}parseClassPrivateProperty(t){return this.parseInitializer(t),this.semicolon(),this.finishNode(t,"ClassPrivateProperty")}parseClassProperty(t){return this.parseInitializer(t),this.semicolon(),this.finishNode(t,"ClassProperty")}parseClassAccessorProperty(t){return this.parseInitializer(t),this.semicolon(),this.finishNode(t,"ClassAccessorProperty")}parseInitializer(t){this.scope.enter(80),this.expressionScope.enter(Kt()),this.prodParam.enter(0),t.value=this.eat(29)?this.parseMaybeAssignAllowIn():null,this.expressionScope.exit(),this.prodParam.exit(),this.scope.exit()}parseClassId(t,e,s,i=8331){if(U(this.state.type))t.id=this.parseIdentifier(),e&&this.declareNameFromIdentifier(t.id,i);else{if(!s&&e)throw this.raise(g.MissingClassName,{at:this.state.startLoc});t.id=null}}parseClassSuper(t){t.superClass=this.eat(81)?this.parseExprSubscripts():null}parseExport(t,e){const s=this.parseMaybeImportPhase(t,!0),i=this.maybeParseExportDefaultSpecifier(t,s),r=!i||this.eat(12),n=r&&this.eatExportStar(t),a=n&&this.maybeParseExportNamespaceSpecifier(t),o=r&&(!a||this.eat(12)),h=i||n;if(n&&!a){if(i&&this.unexpected(),e)throw this.raise(g.UnsupportedDecoratorExport,{at:t});return this.parseExportFrom(t,!0),this.finishNode(t,"ExportAllDeclaration")}const c=this.maybeParseExportNamedSpecifiers(t);let l;if(i&&r&&!n&&!c&&this.unexpected(null,5),a&&o&&this.unexpected(null,98),h||c){if(l=!1,e)throw this.raise(g.UnsupportedDecoratorExport,{at:t});this.parseExportFrom(t,h)}else l=this.maybeParseExportDeclaration(t);if(h||c||l){var p;const s=t;if(this.checkExport(s,!0,!1,!!s.source),"ClassDeclaration"===(null==(p=s.declaration)?void 0:p.type))this.maybeTakeDecorators(e,s.declaration,s);else if(e)throw this.raise(g.UnsupportedDecoratorExport,{at:t});return this.finishNode(s,"ExportNamedDeclaration")}if(this.eat(65)){const s=t,i=this.parseExportDefaultExpression();if(s.declaration=i,"ClassDeclaration"===i.type)this.maybeTakeDecorators(e,i,s);else if(e)throw this.raise(g.UnsupportedDecoratorExport,{at:t});return this.checkExport(s,!0,!0),this.finishNode(s,"ExportDefaultDeclaration")}this.unexpected(null,5)}eatExportStar(t){return this.eat(55)}maybeParseExportDefaultSpecifier(t,e){if(e||this.isExportDefaultSpecifier()){this.expectPlugin("exportDefaultFrom",null==e?void 0:e.loc.start);const s=e||this.parseIdentifier(!0),i=this.startNodeAtNode(s);return i.exported=s,t.specifiers=[this.finishNode(i,"ExportDefaultSpecifier")],!0}return!1}maybeParseExportNamespaceSpecifier(t){if(this.isContextual(93)){t.specifiers||(t.specifiers=[]);const e=this.startNodeAt(this.state.lastTokStartLoc);return this.next(),e.exported=this.parseModuleExportName(),t.specifiers.push(this.finishNode(e,"ExportNamespaceSpecifier")),!0}return!1}maybeParseExportNamedSpecifiers(t){if(this.match(5)){t.specifiers||(t.specifiers=[]);const e="type"===t.exportKind;return t.specifiers.push(...this.parseExportSpecifiers(e)),t.source=null,t.declaration=null,this.hasPlugin("importAssertions")&&(t.assertions=[]),!0}return!1}maybeParseExportDeclaration(t){return!!this.shouldParseExportDeclaration()&&(t.specifiers=[],t.source=null,this.hasPlugin("importAssertions")&&(t.assertions=[]),t.declaration=this.parseExportDeclaration(t),!0)}isAsyncFunction(){if(!this.isContextual(95))return!1;const t=this.nextTokenInLineStart();return this.isUnparsedContextual(t,"function")}parseExportDefaultExpression(){const t=this.startNode();if(this.match(68))return this.next(),this.parseFunction(t,5);if(this.isAsyncFunction())return this.next(),this.next(),this.parseFunction(t,13);if(this.match(80))return this.parseClass(t,!0,!0);if(this.match(26))return this.hasPlugin("decorators")&&!0===this.getPluginOption("decorators","decoratorsBeforeExport")&&this.raise(g.DecoratorBeforeExport,{at:this.state.startLoc}),this.parseClass(this.maybeTakeDecorators(this.parseDecorators(!1),this.startNode()),!0,!0);if(this.match(75)||this.match(74)||this.isLet())throw this.raise(g.UnsupportedDefaultExport,{at:this.state.startLoc});const e=this.parseMaybeAssignAllowIn();return this.semicolon(),e}parseExportDeclaration(t){return this.match(80)?this.parseClass(this.startNode(),!0,!1):this.parseStatementListItem()}isExportDefaultSpecifier(){const{type:t}=this.state;if(U(t)){if(95===t&&!this.state.containsEsc||100===t)return!1;if((130===t||129===t)&&!this.state.containsEsc){const{type:t}=this.lookahead();if(U(t)&&98!==t||5===t)return this.expectOnePlugin(["flow","typescript"]),!1}}else if(!this.match(65))return!1;const e=this.nextTokenStart(),s=this.isUnparsedContextual(e,"from");if(44===this.input.charCodeAt(e)||U(this.state.type)&&s)return!0;if(this.match(65)&&s){const t=this.input.charCodeAt(this.nextTokenStartSince(e+4));return 34===t||39===t}return!1}parseExportFrom(t,e){this.eatContextual(98)?(t.source=this.parseImportSource(),this.checkExport(t),this.maybeParseImportAttributes(t),this.checkJSONModuleImport(t)):e&&this.unexpected(),this.semicolon()}shouldParseExportDeclaration(){const{type:t}=this.state;return 26===t&&(this.expectOnePlugin(["decorators","decorators-legacy"]),this.hasPlugin("decorators"))?(!0===this.getPluginOption("decorators","decoratorsBeforeExport")&&this.raise(g.DecoratorBeforeExport,{at:this.state.startLoc}),!0):74===t||75===t||68===t||80===t||this.isLet()||this.isAsyncFunction()}checkExport(t,e,s,i){var r;if(e)if(s){if(this.checkDuplicateExports(t,"default"),this.hasPlugin("exportDefaultFrom")){var n;const e=t.declaration;"Identifier"!==e.type||"from"!==e.name||e.end-e.start!=4||null!=(n=e.extra)&&n.parenthesized||this.raise(g.ExportDefaultFromAsIdentifier,{at:e})}}else if(null!=(r=t.specifiers)&&r.length)for(const e of t.specifiers){const{exported:t}=e,s="Identifier"===t.type?t.name:t.value;if(this.checkDuplicateExports(e,s),!i&&e.local){const{local:t}=e;"Identifier"!==t.type?this.raise(g.ExportBindingIsString,{at:e,localName:t.value,exportName:s}):(this.checkReservedWord(t.name,t.loc.start,!0,!1),this.scope.checkLocalExport(t))}}else if(t.declaration)if("FunctionDeclaration"===t.declaration.type||"ClassDeclaration"===t.declaration.type){const e=t.declaration.id;if(!e)throw new Error("Assertion failure");this.checkDuplicateExports(t,e.name)}else if("VariableDeclaration"===t.declaration.type)for(const e of t.declaration.declarations)this.checkDeclaration(e.id)}checkDeclaration(t){if("Identifier"===t.type)this.checkDuplicateExports(t,t.name);else if("ObjectPattern"===t.type)for(const e of t.properties)this.checkDeclaration(e);else if("ArrayPattern"===t.type)for(const e of t.elements)e&&this.checkDeclaration(e);else"ObjectProperty"===t.type?this.checkDeclaration(t.value):"RestElement"===t.type?this.checkDeclaration(t.argument):"AssignmentPattern"===t.type&&this.checkDeclaration(t.left)}checkDuplicateExports(t,e){this.exportedIdentifiers.has(e)&&("default"===e?this.raise(g.DuplicateDefaultExport,{at:t}):this.raise(g.DuplicateExport,{at:t,exportName:e})),this.exportedIdentifiers.add(e)}parseExportSpecifiers(t){const e=[];let s=!0;for(this.expect(5);!this.eat(8);){if(s)s=!1;else if(this.expect(12),this.eat(8))break;const i=this.isContextual(130),r=this.match(133),n=this.startNode();n.local=this.parseModuleExportName(),e.push(this.parseExportSpecifier(n,r,t,i))}return e}parseExportSpecifier(t,e,s,i){return this.eatContextual(93)?t.exported=this.parseModuleExportName():e?t.exported=function(t){const{type:e,start:s,end:i,loc:r,range:n,extra:a}=t;if("Placeholder"===e)return function(t){return ae(t)}(t);const o=Object.create(ne);return o.type=e,o.start=s,o.end=i,o.loc=r,o.range=n,void 0!==t.raw?o.raw=t.raw:o.extra=a,o.value=t.value,o}(t.local):t.exported||(t.exported=ae(t.local)),this.finishNode(t,"ExportSpecifier")}parseModuleExportName(){if(this.match(133)){const t=this.parseStringLiteral(this.state.value),e=t.value.match(Fe);return e&&this.raise(g.ModuleExportNameHasLoneSurrogate,{at:t,surrogateCharCode:e[0].charCodeAt(0)}),t}return this.parseIdentifier(!0)}isJSONModuleImport(t){return null!=t.assertions&&t.assertions.some((({key:t,value:e})=>"json"===e.value&&("Identifier"===t.type?"type"===t.name:"type"===t.value)))}checkImportReflection(t){const{specifiers:e}=t,s=1===e.length?e[0].type:null;if("source"===t.phase)"ImportDefaultSpecifier"!==s&&this.raise(g.SourcePhaseImportRequiresDefault,{at:e[0].loc.start});else if("defer"===t.phase)"ImportNamespaceSpecifier"!==s&&this.raise(g.DeferImportRequiresNamespace,{at:e[0].loc.start});else if(t.module){var i;"ImportDefaultSpecifier"!==s&&this.raise(g.ImportReflectionNotBinding,{at:e[0].loc.start}),(null==(i=t.assertions)?void 0:i.length)>0&&this.raise(g.ImportReflectionHasAssertion,{at:t.specifiers[0].loc.start})}}checkJSONModuleImport(t){if(this.isJSONModuleImport(t)&&"ExportAllDeclaration"!==t.type){const{specifiers:e}=t;if(null!=e){const t=e.find((t=>{let e;if("ExportSpecifier"===t.type?e=t.local:"ImportSpecifier"===t.type&&(e=t.imported),void 0!==e)return"Identifier"===e.type?"default"!==e.name:"default"!==e.value}));void 0!==t&&this.raise(g.ImportJSONBindingNotDefault,{at:t.loc.start})}}}isPotentialImportPhase(t){return!t&&(this.isContextual(105)||this.isContextual(97)||this.isContextual(127))}applyImportPhase(t,e,s,i){e||("module"===s?(this.expectPlugin("importReflection",i),t.module=!0):this.hasPlugin("importReflection")&&(t.module=!1),"source"===s?(this.expectPlugin("sourcePhaseImports",i),t.phase="source"):"defer"===s?(this.expectPlugin("deferredImportEvaluation",i),t.phase="defer"):this.hasPlugin("sourcePhaseImports")&&(t.phase=null))}parseMaybeImportPhase(t,e){if(!this.isPotentialImportPhase(e))return this.applyImportPhase(t,e,null),null;const s=this.parseIdentifier(!0),{type:i}=this.state;return(z(i)?98!==i||102===this.lookaheadCharCode():12!==i)?(this.resetPreviousIdentifierLeadingComments(s),this.applyImportPhase(t,e,s.name,s.loc.start),null):(this.applyImportPhase(t,e,null),s)}isPrecedingIdImportPhase(t){const{type:e}=this.state;return U(e)?98!==e||102===this.lookaheadCharCode():12!==e}parseImport(t){return this.match(133)?this.parseImportSourceAndAttributes(t):this.parseImportSpecifiersAndAfter(t,this.parseMaybeImportPhase(t,!1))}parseImportSpecifiersAndAfter(t,e){t.specifiers=[];const s=!this.maybeParseDefaultImportSpecifier(t,e)||this.eat(12),i=s&&this.maybeParseStarImportSpecifier(t);return s&&!i&&this.parseNamedImportSpecifiers(t),this.expectContextual(98),this.parseImportSourceAndAttributes(t)}parseImportSourceAndAttributes(t){return null!=t.specifiers||(t.specifiers=[]),t.source=this.parseImportSource(),this.maybeParseImportAttributes(t),this.checkImportReflection(t),this.checkJSONModuleImport(t),this.semicolon(),this.finishNode(t,"ImportDeclaration")}parseImportSource(){return this.match(133)||this.unexpected(),this.parseExprAtom()}parseImportSpecifierLocal(t,e,s){e.local=this.parseIdentifier(),t.specifiers.push(this.finishImportSpecifier(e,s))}finishImportSpecifier(t,e,s=8201){return this.checkLVal(t.local,{in:{type:e},binding:s}),this.finishNode(t,e)}parseImportAttributes(){this.expect(5);const t=[],e=new Set;do{if(this.match(8))break;const s=this.startNode(),i=this.state.value;if(e.has(i)&&this.raise(g.ModuleAttributesWithDuplicateKeys,{at:this.state.startLoc,key:i}),e.add(i),this.match(133)?s.key=this.parseStringLiteral(i):s.key=this.parseIdentifier(!0),this.expect(14),!this.match(133))throw this.raise(g.ModuleAttributeInvalidValue,{at:this.state.startLoc});s.value=this.parseStringLiteral(this.state.value),t.push(this.finishNode(s,"ImportAttribute"))}while(this.eat(12));return this.expect(8),t}parseModuleAttributes(){const t=[],e=new Set;do{const s=this.startNode();if(s.key=this.parseIdentifier(!0),"type"!==s.key.name&&this.raise(g.ModuleAttributeDifferentFromType,{at:s.key}),e.has(s.key.name)&&this.raise(g.ModuleAttributesWithDuplicateKeys,{at:s.key,key:s.key.name}),e.add(s.key.name),this.expect(14),!this.match(133))throw this.raise(g.ModuleAttributeInvalidValue,{at:this.state.startLoc});s.value=this.parseStringLiteral(this.state.value),t.push(this.finishNode(s,"ImportAttribute"))}while(this.eat(12));return t}maybeParseImportAttributes(t){let e,s=!1;if(this.match(76)){if(this.hasPrecedingLineBreak()&&40===this.lookaheadCharCode())return;this.next(),this.hasPlugin("moduleAttributes")?e=this.parseModuleAttributes():(this.expectImportAttributesPlugin(),e=this.parseImportAttributes()),s=!0}else if(this.isContextual(94)&&!this.hasPrecedingLineBreak())this.hasPlugin("importAttributes")?(!0!==this.getPluginOption("importAttributes","deprecatedAssertSyntax")&&this.raise(g.ImportAttributesUseAssert,{at:this.state.startLoc}),this.addExtra(t,"deprecatedAssertSyntax",!0)):this.expectOnePlugin(["importAttributes","importAssertions"]),this.next(),e=this.parseImportAttributes();else if(this.hasPlugin("importAttributes")||this.hasPlugin("importAssertions"))e=[];else{if(!this.hasPlugin("moduleAttributes"))return;e=[]}!s&&this.hasPlugin("importAssertions")?t.assertions=e:t.attributes=e}maybeParseDefaultImportSpecifier(t,e){if(e){const s=this.startNodeAtNode(e);return s.local=e,t.specifiers.push(this.finishImportSpecifier(s,"ImportDefaultSpecifier")),!0}return!!z(this.state.type)&&(this.parseImportSpecifierLocal(t,this.startNode(),"ImportDefaultSpecifier"),!0)}maybeParseStarImportSpecifier(t){if(this.match(55)){const e=this.startNode();return this.next(),this.expectContextual(93),this.parseImportSpecifierLocal(t,e,"ImportNamespaceSpecifier"),!0}return!1}parseNamedImportSpecifiers(t){let e=!0;for(this.expect(5);!this.eat(8);){if(e)e=!1;else{if(this.eat(14))throw this.raise(g.DestructureNamedImport,{at:this.state.startLoc});if(this.expect(12),this.eat(8))break}const s=this.startNode(),i=this.match(133),r=this.isContextual(130);s.imported=this.parseModuleExportName();const n=this.parseImportSpecifier(s,i,"type"===t.importKind||"typeof"===t.importKind,r,void 0);t.specifiers.push(n)}}parseImportSpecifier(t,e,s,i,r){if(this.eatContextual(93))t.local=this.parseIdentifier();else{const{imported:s}=t;if(e)throw this.raise(g.ImportBindingIsString,{at:t,importName:s.value});this.checkReservedWord(s.name,t.loc.start,!0,!0),t.local||(t.local=ae(s))}return this.finishImportSpecifier(t,"ImportSpecifier",r)}isThisParam(t){return"Identifier"===t.type&&"this"===t.name}}class ze extends Ue{constructor(t,e){super(t=function(t){if(null==t)return Object.assign({},De);if(null!=t.annexB&&!1!==t.annexB)throw new Error("The `annexB` option can only be set to `false`.");const e={};for(const i of Object.keys(De)){var s;e[i]=null!=(s=t[i])?s:De[i]}return e}(t),e),this.options=t,this.initializeScopes(),this.plugins=function(t){const e=new Map;for(const s of t){const[t,i]=Array.isArray(s)?s:[s,{}];e.has(t)||e.set(t,i||{})}return e}(this.options.plugins),this.filename=t.sourceFilename}getScopeHandler(){return It}parse(){this.enterInitialScopes();const t=this.startNode(),e=this.startNode();return this.nextToken(),t.errors=null,this.parseTopLevel(t,e),t.errors=this.state.errors,t}}!function(t){const e={};for(const s of Object.keys(t))e[s]=$(t[s])}(J);function Be(t,e){let s=ze;return null!=t&&t.plugins&&(function(t){if(Le(t,"decorators")){if(Le(t,"decorators-legacy"))throw new Error("Cannot use the decorators and decorators-legacy plugin together");const e=ke(t,"decorators","decoratorsBeforeExport");if(null!=e&&"boolean"!=typeof e)throw new Error("'decoratorsBeforeExport' must be a boolean, if specified.");const s=ke(t,"decorators","allowCallParenthesized");if(null!=s&&"boolean"!=typeof s)throw new Error("'allowCallParenthesized' must be a boolean.")}if(Le(t,"flow")&&Le(t,"typescript"))throw new Error("Cannot combine flow and typescript plugins.");if(Le(t,"placeholders")&&Le(t,"v8intrinsic"))throw new Error("Cannot combine placeholders and v8intrinsic plugins.");if(Le(t,"pipelineOperator")){const e=ke(t,"pipelineOperator","proposal");if(!Me.includes(e)){const t=Me.map((t=>`"${t}"`)).join(", ");throw new Error(`"pipelineOperator" requires "proposal" option whose value must be one of: ${t}.`)}const s=Le(t,["recordAndTuple",{syntaxType:"hash"}]);if("hack"===e){if(Le(t,"placeholders"))throw new Error("Cannot combine placeholders plugin and Hack-style pipes.");if(Le(t,"v8intrinsic"))throw new Error("Cannot combine v8intrinsic plugin and Hack-style pipes.");const e=ke(t,"pipelineOperator","topicToken");if(!Ae.includes(e)){const t=Ae.map((t=>`"${t}"`)).join(", ");throw new Error(`"pipelineOperator" in "proposal": "hack" mode also requires a "topicToken" option whose value must be one of: ${t}.`)}if("#"===e&&s)throw new Error('Plugin conflict between `["pipelineOperator", { proposal: "hack", topicToken: "#" }]` and `["recordAndtuple", { syntaxType: "hash"}]`.')}else if("smart"===e&&s)throw new Error('Plugin conflict between `["pipelineOperator", { proposal: "smart" }]` and `["recordAndtuple", { syntaxType: "hash"}]`.')}if(Le(t,"moduleAttributes")){if(Le(t,"importAssertions")||Le(t,"importAttributes"))throw new Error("Cannot combine importAssertions, importAttributes and moduleAttributes plugins.");if("may-2020"!==ke(t,"moduleAttributes","version"))throw new Error("The 'moduleAttributes' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is 'may-2020'.")}if(Le(t,"importAssertions")&&Le(t,"importAttributes"))throw new Error("Cannot combine importAssertions and importAttributes plugins.");if(Le(t,"recordAndTuple")&&null!=ke(t,"recordAndTuple","syntaxType")&&!Oe.includes(ke(t,"recordAndTuple","syntaxType")))throw new Error("The 'syntaxType' option of the 'recordAndTuple' plugin must be one of: "+Oe.map((t=>`'${t}'`)).join(", "));if(Le(t,"asyncDoExpressions")&&!Le(t,"doExpressions")){const t=new Error("'asyncDoExpressions' requires 'doExpressions', please add 'doExpressions' to parser plugins.");throw t.missingPlugins="doExpressions",t}if(Le(t,"optionalChainingAssign")&&"2023-07"!==ke(t,"optionalChainingAssign","version"))throw new Error("The 'optionalChainingAssign' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is '2023-07'.")}(t.plugins),s=function(t){const e=je.filter((e=>Le(t,e))),s=e.join("/");let i=Ve[s];if(!i){i=ze;for(const t of e)i=Ze[t](i);Ve[s]=i}return i}(t.plugins)),new s(t,e)}const Ve={};e.Qc=function(t,e){var s;if("unambiguous"!==(null==(s=e)?void 0:s.sourceType))return Be(e,t).parse();e=Object.assign({},e);try{e.sourceType="module";const s=Be(e,t),i=s.parse();if(s.sawUnambiguousESM)return i;if(s.ambiguousScriptDifferentAst)try{return e.sourceType="script",Be(e,t).parse()}catch(t){}else i.program.sourceType="script";return i}catch(s){try{return e.sourceType="script",Be(e,t).parse()}catch(t){}throw s}}}},e={};function s(i){var r=e[i];if(void 0!==r)return r.exports;var n=e[i]={exports:{}};return t[i](n,n.exports,s),n.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(new ArrayBuffer(256));for(let s=0;s<64;s++)e[t.charCodeAt(s)]=s;const i={encode:function(e){let s="",i="";const r=new Uint8Array(e);for(let e=0;e<r.length;e+=3){const i=r[e]<<16|r[e+1]<<8|r[e+2];s+=t[i>>18&63]+t[i>>12&63]+t[i>>6&63]+t[63&i]}const n=r.length%3;return 1===n?(i="==",s=s.slice(0,-2)):2===n&&(i="=",s=s.slice(0,-1)),s+i},decode:function(t){let s=0;t.endsWith("==")?s=2:t.endsWith("=")&&(s=1);const i=.75*t.length-s,r=new ArrayBuffer(i),n=new Uint8Array(r);let a=0;for(let s=0;s<t.length;s+=4){const i=e[t.charCodeAt(s)]<<18|e[t.charCodeAt(s+1)]<<12|e[t.charCodeAt(s+2)]<<6|e[t.charCodeAt(s+3)];n[a++]=i>>16&255,n[a++]=i>>8&255,n[a++]=255&i}return r}};Object.setPrototypeOf(i,null),Object.freeze(i);const r=i,n={encode:function(t){const e=Array.from(t).map((t=>t.codePointAt(0)||0)),s=[];for(const t of e)t<=127?s.push(t):t<=2047?(s.push(t>>6|192),s.push(63&t|128)):t<=65535?(s.push(t>>12|224),s.push(t>>6&63|128),s.push(63&t|128)):t<=1114111&&(s.push(t>>18|240),s.push(t>>12&63|128),s.push(t>>6&63|128),s.push(63&t|128));return new Uint8Array(s).buffer},decode:function(t){const e=new Uint8Array(t);let s="",i=0;for(;i<e.length;){const t=e[i];if(0==(128&t))s+=String.fromCharCode(t),i+=1;else if(192==(224&t)){const r=e[i+1];s+=String.fromCharCode((31&t)<<6|63&r),i+=2}else if(224==(240&t)){const r=e[i+1],n=e[i+2];s+=String.fromCharCode((15&t)<<12|(63&r)<<6|63&n),i+=3}else if(240==(248&t)){const r=(7&t)<<18|(63&e[i+1])<<12|(63&e[i+2])<<6|63&e[i+3];s+=r<=1114111?String.fromCodePoint(r):"�",i+=4}else s+="�",i+=1}return s}};Object.setPrototypeOf(n,null),Object.freeze(n);const a=n,o=JSON.parse(a.decode(r.decode("W3sibmFtZSI6IjEgb24gMSBTb2NjZXIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci82ZmY3ZWJlMy05ZDMzLTRhM2MtOGFiMi02ZmYxNTcxM2UyYjYiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiIxdjEubG9sIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiaHR0cHM6Ly8xdjEubG9sLyJ9LHsibmFtZSI6IjIwNDgiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiIvci81MzBkOWRlMC1jYWRhLTQzZTgtYWUyOS03MGVkYThlNTE2ZmUiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiIzIEZvb3QgTmluamEgSUkiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9jMTJjOGQ3YS1iOGU3LTRlMjEtYTA0ZC0xZjg0YWU3YWNhNzAiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiIzIEZvb3QgTmluamEiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9lYTdiMDhhNi02MjhkLTRmMmYtOWE0MS1jMTFhMzYwMjMzNDIiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiIzRCBCb21iZXIiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvYWFjZDkzYjQtZTM3Yi00Y2I4LWEyMzktNWQyMWY3YThmMWIyIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiM0QgUmV2ZXJzaSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzA5MGMxODQxLWI2ODgtNDQ0Ny05ODAyLTE2MGIxMGNjMzE0MiIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IjNEIFRhbmtzIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvMjY2N2Q4YjktNDEwNS00Mjk2LTkyNzItZGFkNWI1NmYyYThjIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiNCBDb2xvcnMiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL3N0b3JhZ2UueTguY29tL3k4LXN0dWRpby9odG1sNS9ha2VlbXl3a2EvZm91cl9jb2xvcnNfdjIvIn0seyJuYW1lIjoiNjI1IFNhbmR3aWNoIFN0YWNrZXIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci81YjIxNmZmNi1iYmI2LTQ0MmItYjI3Zi1jNjQ2NTY4N2I4NDQiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiI3IERheXMgV2l0aG91dCBSYWluIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvZDdmNTE4OGYtMTU0ZC00ZGJhLWFmYTAtOWMwZWU0NGNmNDVmIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiOTAwNzE5OTI1NDc0MDk5MiIsInR5cGUiOiJodG1sNSIsInVybCI6Ii9yLzUzMmE1OGNlLTUzNTAtNGNlMS1iZDg4LTk0ZmE1OWE4OWI2MiIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkFib2JvJ3MgQmlnIEFkdmVudHVyZSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzgxYzIxZDkxLWM3MjQtNDc3Yy1iZDk1LTJjNDg3MTgzYjlkZiIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkFic2VuY2UiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvZmViYWFlMTYtODY0Yy00MzlmLWFkMDctMzUzNmE0NDBmMjA3IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiQWJ1c2UiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvYzQ2YjdlOWQtMjNkMS00OTk3LTgzNjQtMTcyMjNhNjcyYTIyIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiQWNlIG9mIFNwYWNlIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvNmZiODVmZDktNTUxNS00NmJhLTkwMjctZTI0NzcyOGRjMTZiIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiQWNoaWV2ZW1lbnQgVW5sb2NrZWQgMiIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2EzYmQyMDRlLWFjOTktNGQ0OS1iOTlkLWY0YTE5NmIwMjU5MCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkFjaGlldmVtZW50IFVubG9ja2VkIDMiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9mYjM2MDBlNC05NGQ4LTQ5NWEtYjk4MC01NDFkZGYzNzQ3MzciLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJBY2hpZXZlbWVudCBVbmxvY2tlZCIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzE5MmIxMTQ1LTA2MDAtNDhmZS05N2M5LTcwNWQyNGFmYzIwOSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkFjay1BY2sgQXR0YWNrIiwidHlwZSI6ImRvcyIsInVybCI6Ii9yLzBlN2UwY2VlLTNmZjktNDQwNC1iMTU3LTRkMGNmMjdhZmU5ZiIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkFjdGlvbiBEcml2aW5nIEdhbWUiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci80MDBlYzk3ZS03OTRjLTQyMDUtOWZhYS1jYmZlZTExMDY0MmMiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJBZGRpY3Rpb24gU29saXRhaXJlIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvZDc0ZmZiNDAtNThlMC00ZmNjLWIyODEtN2Y3Yzg4ZmY4MjVhIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiQWdlIG9mIFdhciIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzYyMWIxOWQ3LWY5ZGItNGU4OC05ZWI5LWQ5N2Q1NTQ4YzUwZCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkFsaWVuIENhYmFsIiwidHlwZSI6ImRvcyIsInVybCI6Ii9yL2JiYWYwNzk0LWI1MDktNDUzYy05ZjUzLWQ0NTE5ZGZhZDA5YyIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkFsaWVuIEhvbWluaWQiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9hYjNlZmI0OC05ZWRjLTQxYTctYTY5OC0yN2Q0MmFiZWE3MWEiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJBbGllbiBQeXJhbWlkIFNvbGl0YWlyZSIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vY2RuLmh0bWxnYW1lcy5jb20vQWxpZW5QeXJhbWlkU29saXRhaXJlLyJ9LHsibmFtZSI6IkFsbCBGaXZlcyBEb21pbm8iLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL2Nkbi5odG1sZ2FtZXMuY29tL0FsbEZpdmVzRG9taW5vLyJ9LHsibmFtZSI6IkFtb25nIFVTIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiL3IvMTFhOTYwOWMtYWNmMC00NTU3LTk0YjEtYjZiNmQ4NGYyYTQwIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiQW1vcnBob3VzIFBsdXMiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9iMjQ3MTQ0MC03ZjRjLTRlYjQtYTcyZS0xNGY3YTM0ZWRjYWIiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJBcHBlbCIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vc2NyYXRjaC5taXQuZWR1L3Byb2plY3RzLzYwOTE3MDMyL2VtYmVkIn0seyJuYW1lIjoiQXBwbGUgU2hvb3RlciIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzUzMGE2NTIwLTY5ZGYtNDFjOC1iYjlmLTg3ZGFjYmQ1NzkxYSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkFzdGVyb2lkcyIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzQzOTJlOTY3LTNiNzQtNDIwZC1hMDBhLTdjYjQ2ZGZmZDJkMyIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkFzdHJvIDNEIiwidHlwZSI6ImRvcyIsInVybCI6Ii9yL2RlMmI4YjFkLTdjYTUtNDY3ZS05ZmNiLThkYzg2NzY5OTVjYSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkFzdHJvZmxhc2giLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci83MWIxM2I2ZC00NWY1LTQ5MjgtOWE4ZS1lNGNiYjU3MmU2OWMiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJBdGFyaSBCcmVha291dCIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzExM2EwZDUyLTM5N2UtNGM2OS1iYmZhLTNkZjVlNGUwN2JhOSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkF2YWxhbmNoZSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzE4MDU5Y2RhLWQ0ZGItNDM1Yi1hNzU2LWM1NTNmMDU5ZWIyYyIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkJhbGwgRmFsbCAzRCIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vc3RvcmFnZS55OC5jb20veTgtc3R1ZGlvL3VuaXR5X3dlYmdsL3k4Z2FtZXMvQmFsbEZhbGwzRC0yMDIyLWI0L2luZGV4Lmh0bWwifSx7Im5hbWUiOiJCYXR0bGUgUG9uZyIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2Y4Y2RmMDg2LWQ5MTEtNGYzZS05NjhjLWNhYzEyOTM3YThlZCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkJhdHRsZXNoaXBzIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvYTY4M2VjNzctODdlNS00N2M0LWEzMGUtNTk1MjM2YzlmZDM2IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiQmluZ28iLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL2Nkbi5odG1sZ2FtZXMuY29tL0JpbmdvLyJ9LHsibmFtZSI6IkJsb29kIiwidHlwZSI6ImRvcyIsInVybCI6Ii9yLzE4OWE3NGMwLTdiNWUtNDk2MC05MDIzLTQyMGY4ODI3NmNlNiIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkJsb29ucyBQbGF5ZXIgUGFjayAyIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvOGNiMzllZDctOWVhYi00ZTlkLTg0NjMtODdkNzQyNTNiZDg5IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiQmxvb25zIFBsYXllciBQYWNrIDMiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9mOWI4YWNlNy1hNjBkLTQ2Y2ItODI2MC03YzhiMzhhMjE3OGQiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJCbG9vbnMgUGxheWVyIFBhY2sgNCIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzBkYzk5NGE0LTQwYTEtNDVlNy1iM2NmLTdlYWE3Nzc1M2FmNSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkJsb29ucyBQbGF5ZXIgUGFjayA1IiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvNjFjZTA1NjEtN2IwZi00MDRhLWFjYTQtZGY4ZjhmYjU1YTliIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiQmxvb25zIFRvd2VyIERlZmVuc2UgMiIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzBjMWZlMWZiLTEwMTEtNDY1Yi05NGJhLTI2N2NlOTY2M2ZmOSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkJsb29ucyBUb3dlciBEZWZlbnNlIDMiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci8yMTUzYWFhOS00MTJiLTRkMzQtYWYzOS04YjQzY2Y5MmVmMmEiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJCbG9vbnMgVG93ZXIgRGVmZW5zZSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzkyMTdkNzY1LTUwYTktNDdmMy05MjI2LTE0ZTdiNWFkZDJkYiIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkJsb3hvcnoiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci85YzA0ZWNhNi1kNzlkLTQ3ZDAtODFkYi1lNTlkODBiMGI5YWQiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJCb21iamFjayIsInR5cGUiOiJkb3MiLCJ1cmwiOiIvci82MjVmMmJhYi1jNDAyLTQ1MmQtOWQ4Ni1mYWEwZTVjZGM5ZDUiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJCb3dtYW4iLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci80Y2ZhOWNiZi1lNDEwLTQ3ODctYjNhNy04ODA3ZTUwNGNmNjkiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJCb3hoZWFkIDIgUGxheSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzVkMjFhM2IwLWMzNTItNGViMS05NmNiLWZmZWEzOWYyZjlhZCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkJyZWFraW5nIFRoZSBCYW5rIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvNDcxNjQzNWUtZjkzOS00NmRkLTljMWQtNTVmMWM0Y2Q3OWZkIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiQnJpY2tzIEJyZWFrZXIiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL2VtYmVkLmdhbWVkaXN0cmlidXRpb24uY29tLz91cmw9aHR0cHM6Ly9odG1sNS5nYW1lZGlzdHJpYnV0aW9uLmNvbS8zZDNkNjhkYTZkNWE0NzFlOTNiYWIxYzNiZGUwMWQ3MC8ifSx7Im5hbWUiOiJCdWJibGUgQnVyc3QiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL2VtYmVkLmdhbWVkaXN0cmlidXRpb24uY29tLz91cmw9aHR0cHM6Ly9odG1sNS5nYW1lZGlzdHJpYnV0aW9uLmNvbS80MDVjMDA2MTI5ODE0NjZjYmM1ZDlkY2VmNDIxNDgxMS8ifSx7Im5hbWUiOiJCdWJibGUgU2hvb3RlciIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzE4NDg0MTQyLWNkMzEtNDlkMi05NzQyLThmYjk3YjIwNzBiYyIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkJ1YmJsZSBUYW5rcyAyIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvYzg3NWExYjEtOWM2Ny00ODFkLTk2NjQtNjVkN2M4ZTM0ZDJmIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiQnViYmxlIFRyb3VibGUiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci8yNWI5ZjhhOC01YjIyLTQ3OTYtYjdiNS0yMTBjNjBkZDYwZmMiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJCdWxsZXQgQmlsbCIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2Q2ZWI1ZmVlLTBhODctNDdjNy04ZDFiLWVlNjRmM2VhYzgwNSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkNIQU1QIEtvbmciLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvM2VlODYxNWEtZDA0Mi00YzJiLTk4MDktOTg1ODY0NDkyNmU0IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiQ2FzdGxlIFdhcnMiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9iNGU0NWU1Mi0wY2UyLTRlMTItYTFkNy1hYTMxMmY3YzUxYjQiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJDYXVzYWxpdHkiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9lNmE3NzFiMC0xMmY3LTRhZjYtOWQ5Yi1hYzE3NmEzNTAxYTUiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJDYXZlcm4gb2YgdGhlIEV2aWwgV2l6YXJkIiwidHlwZSI6ImRvcyIsInVybCI6Ii9yLzU0NGZmN2JjLTZiZjUtNGU0MC05MWQxLWUzODdhMWFiYTgwMiIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkNoYW1waW9uIEFyY2hlciIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2JhZmM3Njk4LWQ2OGItNDUyMi1hOWUwLTkxZDFlY2M3MDMzOCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkNoYXNtIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvOGM0YzMzNzktODBmNi00ZWNjLThhMGMtMmY3YzgyNjQ2MzEzIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiQ2hlc3MiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL3BsYXlwYWdlci5jb20vZW1iZWQvbWluaWNoZXNzL2luZGV4Lmh0bWwifSx7Im5hbWUiOiJDaGV4IFF1ZXN0IiwidHlwZSI6ImRvcyIsInVybCI6Ii9yLzIxN2RhNzM2LWNhZTAtNGU2Yi04ZDhhLTI4OGZiZWUyZDVmMyIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkNoaW5lc2UgRnJlZWNlbGwiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL2Nkbi5odG1sZ2FtZXMuY29tL0NoaW5lc2VGcmVlQ2VsbC8ifSx7Im5hbWUiOiJDaG9vc2UgWW91ciBXZWFwb24gMiIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzY5Y2UxYzExLWM3MTEtNDA3Ni04NmJmLTU5NjhhYTc5MjI5NyIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkNob29zZSBZb3VyIFdlYXBvbiAzIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvZjIzZDZiNzgtZDE4Yy00ZGU1LThmZjItNjY2NDA0Y2RmNThjIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiQ2hvb3NlIFlvdXIgV2VhcG9uIDQiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9iMzlkOGJkOC04MmVhLTQ0OTQtODQxNC1jOGUzZjU3M2U4YWUiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJDaG9vc2UgWW91ciBXZWFwb24iLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci80MjI0YWRiNS0xMzQ2LTQzNDEtOGUyOC03ZjkzM2NlYWI1ODAiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJDb2xvciBDb21iYXQiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9jMzQ2Y2UwOS04YmRjLTRkNTgtOGRjZC01YjBhNWIxMWQyYzYiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJDb2xvciBTd2l0Y2giLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9mZjM3NDA2My1iYWQxLTQ1MTUtOWQxYy0zODNhYTM5ZGNhMmUiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJDb2xvcmluZyBNYW5kYWxhcyIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vY2RuLmh0bWxnYW1lcy5jb20vQ29sb3JpbmdNYW5kYWxhcy8ifSx7Im5hbWUiOiJDb21tYW5kZXIgS2VlbiA0OiBTZWNyZXQgb2YgdGhlIE9yYWNsZSIsInR5cGUiOiJkb3MiLCJ1cmwiOiIvci9jOTgzNjQ2YS00MzdiLTRmZWYtOGYyNS03ZjdhYzc2YTUzN2MiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJDb21tYW5kbyIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzIxOWM2MTY3LWI0NGYtNGZlZS05YTgxLTQ1OGRjZDgyZjkxNCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkNvbm5lY3QgNCIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzg5OWM5ZjA3LWU1MjItNDRiMC04Zjg5LTliYjY2ODI1YWFhOCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkNvbm5lY3QgdGhlIFdvcmxkIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvMzcxMjA4NjgtZmZiYS00MmNjLWIzODMtOTk1ODNmMTAyMmVmIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiQ29ucXVlciBBbnRhcmN0aWNhIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvYzBhNmRlNzctOTYyOC00YTRjLWExNzItMzk3M2IwZDFhNTUxIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiQ29va2llIENsaWNrZXIiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiIvci9kYWNiMzZhOC1jNWM4LTQ3MjgtODYwMy0xZjg1NjM5NmQyOTYiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJDcmltc29uIFJvb20iLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9mNDMzYjI4NC1iZmFiLTQyNDEtYjNhMC04NzU1Yzc3ODcxZTEiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJDcm9zcyBDb3VudHJ5IFRydWNraW5nIiwidHlwZSI6ImRvcyIsInVybCI6Ii9yLzA5NzQ2ZjBlLWM2MGMtNGI0Ny04MjAxLWIyNGIxMGY5YjA0YiIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkN1YmVmaWVsZCIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzdjMmU4ODVkLTJiMzAtNGY5OC1hMTMyLTQ1MjU2MzAzNjQwMSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkN1cnNvciAxMCIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2ExZDJiMmE2LWYzYTgtNGEyZi04NThmLTNjYjc4MWYzOTdjZSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkN1cnNvciBJbnZpc2libGUiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci85MGE5MjgxNC1lMjM1LTRjMTgtYjUxYy1iYTdlNDI0MGIwOTUiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJDdXJ2ZWJhbGwiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci8yZDM5ZjU2Zi01ZmQzLTQxM2MtYThlMi1mYTNkZTI3MDE5YjMiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJDdXQgVGhlIFJvcGUgMiIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vZW1iZWQuZ2FtZWRpc3RyaWJ1dGlvbi5jb20vP3VybD1odHRwczovL2FwcC0xNTE1MDguZ2FtZXMuczMueWFuZGV4Lm5ldC8xNTE1MDgvanZ4ZjlqOWsyc2R0NzFrbnB3YTJmNmF6c25kbzZucncvaW5kZXguaHRtbCJ9LHsibmFtZSI6IkN1dCB0aGUgUm9wZSBWaXZpZCBFZGl0aW9uIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiL3IvMjYzNGE3Y2ItNjNjNy00MDU1LWFmMWUtODI0MGRmMWVlMTZmIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiQ3V0IHRoZSBSb3BlOiBUaW1lIFRyYXZlbCIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vZW1iZWQuZ2FtZWRpc3RyaWJ1dGlvbi5jb20vP3VybD1odHRwczovL2FwcC05NzUxNS5nYW1lcy5zMy55YW5kZXgubmV0Lzk3NTE1L3UxODI0YzBvOXhsazJubTlobGN4dGJzNGw2eXNsNDRzL2luZGV4Lmh0bWwifSx7Im5hbWUiOiJDdXQgdGhlIFJvcGUiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiIvci9iNjc2MzQxOS1kNjQzLTQ2ZTktODg4ZC0wNzRlMjIxOWQxZGIiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJEQyBHYW1lcyIsInR5cGUiOiJkb3MiLCJ1cmwiOiIvci80NmJmYzhhYi1mYzg0LTQ3NWEtODA2Ni0xMzk0ZTg5NzMzZGUiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJEYWQgbicgTWUiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci8wNGJiZGNmZC04YjkwLTQ1NjEtOTYxMy0yYTJjMDdjYzFlZTMiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJEYXJrIE1haGpvbmcgQ29ubmVjdCIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vY2RuLmh0bWxnYW1lcy5jb20vRGFya01haGpvbmdDb25uZWN0LyJ9LHsibmFtZSI6IkRlYXRoIFdvcm0iLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL2VtYmVkLmdhbWVkaXN0cmlidXRpb24uY29tLz91cmw9aHR0cHM6Ly9hcHAtMTY1ODY1LmdhbWVzLnMzLnlhbmRleC5uZXQvMTY1ODY1L2c1aTkyemxmdGo3MDlrMDhlamsxOTVnNnZpbWk3ZXpjL2luZGV4Lmh0bWwifSx7Im5hbWUiOiJEb2dlbWluZXIgMiIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vZG9nZW1pbmVyMi5jb20vIn0seyJuYW1lIjoiRG9nZW1pbmVyIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiL3IvZjI5OGNmODMtMjNmNS00YmI3LWI4NmQtMjEyM2I3OTJjZjAxIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRG9taW5vZXMiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiIvci80NDA2ZGJiOC00OWYwLTQyMjItOTAwMC1jNTJmZjVhNGI2ZmMiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJEb29kbGUgSnVtcCIsInR5cGUiOiJodG1sNSIsInVybCI6Ii9yLzg3ODEzMDdhLWI4MWEtNGMxYy1iYTU5LWUwZjcyM2YxNGJkYSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkRvb20gSUkiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvZmM3OTg4NjktM2QwOS00YTE4LWEzZWQtOTM1Nzc1MTYzMjU5IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRG9vbSIsInR5cGUiOiJkb3MiLCJ1cmwiOiIvci9iOWMxNmE3OC0yYTliLTQyZGQtODljMC0zYTNlY2E5MzVlMjgiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJEb3VibGUgU25ha2UiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvYzYwNjVhYWMtZjJhMS00YWQxLWFkN2EtZjlmNzNlYTA3NWNlIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRHIgQ2FydGVyIGFuZCB0aGUgQ2F2ZSBvZiBEZXNwYWlyIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvMDBmMDRhMTgtZjI1ZC00MDFkLTkxODMtMjRlNjJiYTU3NjYwIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRHJha2UgU25ha2UgYW5kIHRoZSBTZWNyZXQgQ3J5cHQiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvYmYwZWYyMTItNjMwOS00ZjAyLWFmZTQtZDk1ZWZiOTU4NDYyIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRHVjayBMaWZlIDIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9jMzNiZWY5Ny03YzVjLTRkNmMtYjM2Zi00Mzk0OGJkNDFiMTAiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJEdWNrIExpZmUgMyIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzJiZmE0ZWQzLTI4NWEtNGRiNi05ZmNmLWYxNzYxZjI2YjljMCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkR1Y2sgTGlmZSA0IiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvMTQ2MGViMzctOTQ5YS00ZGY4LTlhNjMtMmYxMWRiZTRjMzUwIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRHVjayBMaWZlIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvMDU1NGZiMmItNzU4YS00OTIxLTlkNjAtYmY2ZjFiZjBiMTlhIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRHVrZSBOdWtlbSAzRCIsInR5cGUiOiJkb3MiLCJ1cmwiOiIvci9hNGJmZWQ2OS05NmE4LTQzMzYtYmMyNC1hNDQwMDc2NWMwMjQiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJEdW5rIEJhbGxzIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiaHR0cHM6Ly9jZG4uaHRtbGdhbWVzLmNvbS9EdW5rQmFsbHMvIn0seyJuYW1lIjoiRHp6ZWUiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvZmNjOTVlYzMtM2EzMy00MGM3LWJhNzEtODAwNjg4YTJmNmZiIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRWZmaW5nIFdvcm1zIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvNGU2OWFjYjgtYzUxNC00YzJlLTk4YTYtMGMwM2FiNzM0MzZjIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRWdndGFzdGljIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvOTA5OTBkY2UtMmU4Yi00OTIwLWJiMzktNTI1ZmQ5YTMzYzc0IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRWd5cHQgUnVuZXMiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL2Nkbi5odG1sZ2FtZXMuY29tL0VneXB0UnVuZXMvIn0seyJuYW1lIjoiRWxlY3RyaWMgQm94IiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvODhhMGY3ZDctNDUyZi00M2Y0LWIzZTgtNzcxZjMxNGMzNmY3IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRWxlY3RyaWMgTWFuIDIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci82YzU2ZDdhOC0xOWNiLTRhNDUtYmEzOS04MjY1OWU0MDMzYWUiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJFc2NhcGluZyBUaGUgUHJpc29uIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvNTgzYTNjNTYtNDBmMy00YjdkLWJjYmItNjI5NThiNzlmY2Y5IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRXh0aW5jdCIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2Q4NTlmMTgxLWEzMTgtNGJlYS04OTI2LTg4NzZmNmE1YWY3OCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkZhY3RvcnkgQmFsbHMgMiIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2I5YThkZDNmLTE0MzAtNGM0MS04ODVlLWM0ODM1YWUyZDgzNSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkZhY3RvcnkgQmFsbHMgMyIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzJkYzFjMDRjLTEyNmUtNDVlYy04NjBmLTRmNmM0ZmFlZDQ3ZSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkZhY3RvcnkgQmFsbHMgNCIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2UwYWZiYjVkLTE1M2UtNDJjYy04MTkxLTFkYzA2YjE4Y2QyMSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkZhY3RvcnkgQmFsbHMiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9jYjE4ZTNkYy02Y2NlLTQxMDUtOGQ4Yi1iYWM0MTZiMGFmM2QiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJGYWxsZG93biAyIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvNWUwN2Y1NGEtYjY0Yi00MzQyLTkwZTgtNGJjM2I0NjNlNmY3IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRmFsbGRvd24iLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9mZjg4MGVhYy1mODZhLTQ2ZmQtODQxNy0zODA4OGZhOGUzNTAiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJGYW1pbHkgQ3Jpc2lzIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvMGU2OTEwMWEtNzc2Zi00ZTY1LWI3YzAtZTcyY2Q4MjExYmVhIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRmFuY3kgUGFudHMgQWR2ZW50dXJlIDIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci85ZmZjOTU1ZS0yYTdkLTQ5NDItYWY4Zi01OTk4NDE4MmE3MTQiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJGYW5jeSBQYW50cyBBZHZlbnR1cmUiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci8xOGM1NzgxMi1jNzA5LTRkZDYtOGRiZi03ZDgwZmRmMzFjY2QiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJGYXQgTmluamEiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci8yYTc0ODcwOS1hOTBjLTQ5MDAtOTgyNy0yMzA4OTQ4MGVkNDciLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJGZWVkIFVzIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvNmVlMGExODAtYjgzZS00NmI3LWFhNDctY2IzZDkwMjNiZmNkIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRmV1ZGFsaXNtIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvZGZhN2Q3ZWItOWRhMy00YjRmLWIwYzAtYzU0Mjg3MTNjYzA2IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRmxhcHB5IEJpcmQiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvYzVkYjFkZmUtMTQ0My00OGIyLTg4NzEtMWNmYjY0MmJhYTAzIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiRmxhcHB5IEJpcmQiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiIvci9jMmFmZTIwZS01ZWVjLTRkZDYtOTRjMy0yOTMxOWFmNTQ2ZjQiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJGbGlwIDNEIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiaHR0cHM6Ly9zY3JhdGNoLm1pdC5lZHUvcHJvamVjdHMvNDMwOTk5MzU2L2VtYmVkIn0seyJuYW1lIjoiRnJlYWsgRmFybSIsInR5cGUiOiJkb3MiLCJ1cmwiOiIvci8yNWI0YzQ3Zi1iY2U2LTQ5NTktYjEzYy03MGE5NjMyOTVhM2YiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJGcmVlY2VsbCIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vY2RuLmh0bWxnYW1lcy5jb20vRnJlZS1jZWxsLyJ9LHsibmFtZSI6IkZyb2dnZXIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci85YTUxYzk4NS0yY2I4LTQ3ZmEtYTdhOC0zMTY4NzkyNzM4M2YiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJGcnVpdCBOaW5qYSIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vc3Rvcm1zLmNvbS9nYW1lcy9GcnVpdE5pbmphLVdlYlByb3RlY3RlZC8ifSx7Im5hbWUiOiJHYWxhZ2EiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci85OGE3ODk3Ni02M2M4LTQ0N2UtYjdlMi1iYmNjOWFlZGMxZmEiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJHZW9tZXRyeSBEYXNoIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiaHR0cHM6Ly9zY3JhdGNoLm1pdC5lZHUvcHJvamVjdHMvMTA1NTAwODk1L2VtYmVkIn0seyJuYW1lIjoiR29sZCBNaW5lciAoU3BlY2lhbCBFZGl0aW9uKSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzJhOTQ1YWEyLTc3NmYtNDkwYy05OTk1LWU3ZTIxMDkxYjBjZCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkdvbGQgTWluZXIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci83NzBkOWIxYy00MjQyLTRjOTUtYTZmZC0xZTUwMGQxYWY3NzciLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJHcmVlZHkgU2hhcmsiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiIvci83OWFlZWJkYS0yNDIwLTRhZDQtOTg5Ni04NjU0NDEwZDc2ZDMiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJHcmlkbG9jayIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzhlZWI1YTNiLTk3N2QtNDVmMi05ODNkLTkxMTY3YTM4NDhmMyIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6Ikdyb3VuZEZpcmUiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvYTQ1ZjcyMmMtNGZhOC00YzFhLWI2ZDEtMjlkZjU5NzA0NWU0IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiR3VuIE1heWhlbSAyIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvMDg1YmJjZjctMWNiMS00NTkwLThhZmUtM2MzNTAzZjU3OGRiIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiR3VuIE1heWhlbSAzIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvMDVjMjA0YmItMDQ3OS00N2E2LWFiYTEtYjQwNzZlMWM5YzhiIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiSGFuZ01hbiEiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvYzM1MDM3MGItYTI4Yy00YzBhLWJmOTQtMzYzMWU0MzFkYjIyIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiSGFwcHkgV2hlZWxzIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiaHR0cHM6Ly9nYW1lcy1vbmxpbmUuaW8vZ2FtZS9IYXBweVdoZWVscy8ifSx7Im5hbWUiOiJIZXggQ29ubmVjdCIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vY2RuLmh0bWxnYW1lcy5jb20vSGV4Q29ubmVjdC8ifSx7Im5hbWUiOiJIZXh0cmlzIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiL3IvOGI1NjMxODMtZDI2YS00ZGFlLTlkNjgtODI5NjRkNjgxNTg1IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiSGlkZGVuIEZvcmVzdCIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vY2RuLmh0bWxnYW1lcy5jb20vSGlkZGVuRm9yZXN0LyJ9LHsibmFtZSI6IkhvYm8gMiIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2JiNjc4YjZkLTQyMDUtNDNjNC05ODQ2LThmM2QxZTBhNmY0OCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkhvYm8gMyIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzY3MTY3YzBlLTM1M2EtNDMyMi1iMTYyLWEyZGFiY2FlNGFkOCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkhvYm8gNCIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2QyNDNhNzhlLTdlM2YtNDA3Ni05NTNhLTA4YzQxY2Q2ZTUzNyIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkhvYm8gNSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2RiOWE0MWU0LTUxOWQtNGY0Ni1iZDg1LWExM2M4NmRhZDZlMCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkhvYm8gNiIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2Y1NmU1MzlkLTg0NzItNDMwYy04Y2M1LWE1NDlmMzAxNzdjNyIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkhvYm8gNyIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2ZmMWY5NGY3LWU1ZGYtNDNjYi04MWU0LWY3ZTljNThmM2I3NSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IkhvYm8iLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci80Nzc2YzcwZi04OTEzLTRlZjctYjZhZC1lOTVmMTVlNmZlYmIiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJIb3VzZSBvZiBDYXJkcyIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vY2RuLmh0bWxnYW1lcy5jb20vSG91c2VPZkNhcmRzLyJ9LHsibmFtZSI6IkpldHBhY2sgSm95cmlkZSIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vc3Rvcm1zLmNvbS9nYW1lcy9KZXRwYWNrSm95cmlkZS1XZWJQcm90ZWN0ZWQvIn0seyJuYW1lIjoiS0JhbGwiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvYWNiMDM5NmQtMGZjNi00NzNmLWI2ZWYtMzcwNzE4MzRjZjM5IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiS2FzaWEiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvNTVkY2M4OTctYWUxMC00NTU3LWE4N2UtODljNDRiMTU3ZjU2IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiS3J1bmtlciIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8va3J1bmtlci5pbyJ9LHsibmFtZSI6IkxlYXJuIHRvIEZseSAyIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvZTNhN2VmODEtYzQ1Zi00YzNkLTk3Y2ItMTQ0MWE3N2RlNTY5IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiTGVhcm4gdG8gRmx5IiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvMTA5MjljMGItY2RlZC00OWI3LTkyYmYtYTRhZTk2YmQxYWExIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiTGluZSBSaWRlciIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzNmYWJhNWFkLTE5YTgtNDkxMS1hZDJjLTdmZGUxMjZjZTdkMyIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6Ikx1ZG8gRGFzaCIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8venYxeTJpOHAucGxheS5nYW1lem9wLmNvbS9nL1NKUlgxMlRYY1JIIn0seyJuYW1lIjoiTHVkbyIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vY2RuLmh0bWxnYW1lcy5jb20vTHVkby8ifSx7Im5hbWUiOiJNYVplIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiaHR0cHM6Ly9zdG9yYWdlLnk4LmNvbS95OC1zdHVkaW8vaHRtbDUvYWtlZW15d2thL21hemVfdjEvaW5kZXguaHRtbCJ9LHsibmFtZSI6Ik1haGpvbmcgVHJpcGxlIERpbWVuc2lvbnMiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL2Nkbi5odG1sZ2FtZXMuY29tL01haGpvbmdUcmlwbGVEaW1lbnNpb25zLyJ9LHsibmFtZSI6Ik1hcmlvIENvbWJhdCIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzMzY2UyNDQ4LTIxYWYtNDg1OS05YzAwLTgxYTIzOGY2NDBiOCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6Ik1pbmRmaWVsZHMgMiIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzRkMjMzOGVkLTdmNGUtNGViYy04MDUwLTlkOTdjYTIyYzIxYSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6Ik1pbmRnYW1lcyBET1MgQ29sbGVjdGlvbiIsInR5cGUiOiJkb3MiLCJ1cmwiOiIvci80N2RmMTlkOS02MmQwLTQyMzQtYmIzZS03NWRmOTI0YTE1NGYiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJNaW5lY3JhZnQgMkQiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL3NjcmF0Y2gubWl0LmVkdS9wcm9qZWN0cy8xMDEyODQwNy9lbWJlZCJ9LHsibmFtZSI6Ik1pbmVjcmFmdCBDbGFzc2ljIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiL3IvNGM2ODE1YmMtN2ZlOS00ZDA2LTk0ODUtNzhiMDhmNmM2ODY0IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiTWluZWNyYWZ0IFRvd2VyIERlZmVuY2UgMiIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2U2ZTNmODEwLTNjZjAtNDBmZi1iMzkyLThkMTY1ODg3YjFiMiIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6Ik1pbmVzd2VlcGVyIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiL3IvZGMzMDEyZjQtYTc4Ni00NGEyLWFmMGQtZTk1MmI2OWE5Zjk3IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiTWluaSBQcmluY2UiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvYjgyZjZjYTItZDViZS00ZjlmLThiODUtOWQyNTcxNzZkNmRjIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiTWlzc2lsZSBTdHJpa2UiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci8xMDVmNGNhNi00NGRmLTRhZmUtODFlMC0yNGM0YTMzMjE5N2QiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJNb25zdGVyIEJyYXdsIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvYTQ3ODQ3MjYtOGMzYi00ZWQxLTg4OTMtNTc1ZTQwYTE1NzZjIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiTW9ydGFsIEtvbWJhdCIsInR5cGUiOiJkb3MiLCJ1cmwiOiIvci9iMWNjMjVkYy04YjEwLTQ5OGQtYWIwNi1lZWFjYWI1Mzk2MmYiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJNb3NzIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvMDZiNTUyZGYtNDI0Yy00NTBjLWFlNGUtOTEzNTVhODJjMTIxIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiTXMgUGFjbWFuIFBDIiwidHlwZSI6ImRvcyIsInVybCI6Ii9yLzUzNDkzMWY5LWJkMWUtNGZhOS1iN2UwLTVjNDg4ZWE5YjdkZCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6Ik11bHRpdGFzayIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzE1NjBjMTJhLWMxYTItNGZmYS1iOTMxLWJhZDFiOGU1MGQxNSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6Ik4gR2FtZSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2FhM2I5M2U1LTRhNWYtNDkwNy05Njc4LTBkZTI5NzI0Nzg3NyIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6Ik5lb24gTWF0aCIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vY2RuLmh0bWxnYW1lcy5jb20vTmVvbk1hdGgvIn0seyJuYW1lIjoiTmV1dCBUb3dlciIsInR5cGUiOiJkb3MiLCJ1cmwiOiIvci83MzYxYThiYi04ODM0LTRiNGEtYTc3ZC01ODlmOTRmZDI3MzAiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJOaW5qYSBCbGl0eiIsInR5cGUiOiJkb3MiLCJ1cmwiOiIvci9iYzBhOWQ0Yy0wMjljLTRhNzMtYmM4Ni1iYzZiY2FkNTgyZWEiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJPbmUgTGluZSIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vY2RuLmh0bWxnYW1lcy5jb20vT25lTGluZS8ifSx7Im5hbWUiOiJPc3N1YXJ5IiwidHlwZSI6ImRvcyIsInVybCI6Ii9yL2U1YzFlYzdmLTYyYTUtNDkyMy04NzVmLTRhMzkzNWZjOTE2NCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlBhYyBNYW4iLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci8wZWQ0N2VkNC0zNmJkLTQ1MzctOTUwNi1mZTkyZWU0MDA0ZmYiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJQYWMtTWFuIiwidHlwZSI6ImRvcyIsInVybCI6Ii9yLzVkODhmMzEwLTczNGUtNGJkMi05M2NjLTIwOTUxY2I0NTkyZSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlBhYy1NYW4iLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL2ZyZWVwYWNtYW4ub3JnLyJ9LHsibmFtZSI6IlBhY21hbiBBZHZhbmNlZCIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzYxYWViOTcyLWNhYWYtNGZiNC05MjJjLTExZDc5NzQwMDcyZSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlBhbmRlbWljIDIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci8wNDUwYmU0Ny0zNmI3LTRkYTItYmRmNS1hODg4ODZjYzIwYWIiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJQYXBhJ3MgUGl6emVyaWEiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci83Y2NiNGY1ZC1hMTBlLTRiZmUtYTg4YS0yYTk3MzQwZjBjZTkiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJQYXBlciBCYXR0bGUiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL3N0b3JhZ2UueTguY29tL3k4LXN0dWRpby91bml0eS9qb2xsL3BhcGVyZ2FtZS9wYXBlcl9iYXR0bGVfdjIwL2luZGV4Lmh0bWwifSx7Im5hbWUiOiJQZW5ndWluIERpbmVyIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvOWRiMTY3YjItZjU5Mi00ZmY1LWJhNWQtNTk4ZTNmZDYxODA2IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiUGVuZ3VpbiIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2ZmZTMwODM3LTA0MTEtNDdmNC04YWE3LWZiZDcyNDIzMjg4ZSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlBpY28ncyBTY2hvb2wiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci8wNTJhYzQwNC05YmE1LTQxNmEtOGI3OC1iODUzOWViZDBjYzIiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJQbGFudCBWUyBab21iaWVzIDIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci85ZTc2M2I5MC03ODdhLTQ4OGYtYWMyMi03ZjQyYTU4YzIzZGQiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJQbGF5aW5nIFdpdGggRmlyZSAyIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvOTI2MTQzYzUtNDUzYi00MGI3LThiY2EtYTU5MGYzZmFmYzAyIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiUGxhem1hIEJ1cnN0IiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvNmRmMGY4NjYtZWY0Ni00MWQzLWI0ZTItMjIyMDk5YTQ3MTQ1IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiUGx1bWJlciAyIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvYWMyZWViMmMtZjAwNC00OGU5LTkzYmQtMjNkMmJhYjQzNjNmIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiUG9vbCBNYXN0ZXIiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL3p2MXkyaThwLnBsYXkuZ2FtZXpvcC5jb20vZy9oZ2VtcFA4U2MifSx7Im5hbWUiOiJQb3J0YWwgMiIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzIzNjU3NDQyLTA3OTMtNDE5Yy1hMDI3LTVlN2E2YzA5N2VlMCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlBvcnRhbCIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzA4NmE4NTkzLTEyZjEtNDVhOS05NGQ2LTVlNTBlYTAzNzFiOCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlBvdHR5IFJhY2VycyAyIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvN2MwN2NiYzYtOTliOS00ZWQ5LWFjYTUtNjdlMDNkODdiMzg5IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiUG90dHkgUmFjZXJzIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvMWU0OTU2NDUtNWIyZi00M2YzLTg5YzAtZDA1YzNiMmM1ZTQxIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiUHJpbWFyeSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzk0MTVhMGQ4LWQ3YjktNDZlOS1iMDk2LTU5NThkNmY1NzFkZCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlByaW5jZSBvZiBQZXJzaWEiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvYjIxZWI4YzQtZGE2Yy00ZmVmLTk2Y2UtNmQ1NjEwNWFiNWM2IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiUHV6emxlIEJvYmJsZSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2Q3N2Y1NWU2LTI3MDYtNDUxMy04MzcyLWI0NGQzOTQzOGFlOCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlF1YWtlIiwidHlwZSI6ImRvcyIsInVybCI6Ii9yL2E1NmRhYWUxLTY0MGYtNDJkNi04ODUwLWYwYjNjNmJhOGFiOCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlF1aW50YSIsInR5cGUiOiJkb3MiLCJ1cmwiOiIvci8wYmIxNmUzOC05Mzg4LTQzNzQtODYyYy03MDdmZWNmZTI2NTciLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJSQ3Jvc3MiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvYWU4MzkzYmItYTM3Ny00MWUxLTg5N2EtMzQ0N2Y1N2U5MjAxIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiUmFmdCBXYXJzIDIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9iZDFlZDQwNy03MjdjLTQwNTQtYWFlZS00YTNjYmI3ZWMzODYiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJSYWZ0IFdhcnMiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci80M2IyNzI5MS1kOTU1LTRjNjYtYWQ2My0wM2NhNzA5ZWI3MDkiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJSYWdkb2xsIEF2YWxhbmNoZSAyIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvMGY1NjkxZWEtOWM4Ny00MDA0LWI3N2QtMGMwNTUxYzg0MzI4IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiUmFnZG9sbCBBdmFsYW5jaGUiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9iZDkxNmU1Yy04YTc1LTQwODctYTQ4OS1jNmFmMDM2MTA1ODIiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJSYWdlIDIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9iMTUzYzJmMi03OThlLTQ1YmQtOTNkNS04NjgxOTRlMTRlMzEiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJSYWdlIDMiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci80MTIyOGE0ZS1mNGJkLTRlNTctYmEyNS00MTU2NzBhZjYwZDQiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJSYWdlIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvYzdkYTExMzctY2UyNi00OTlmLWE3ZTMtYjkzMjg5ZTk2Yzc1IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiUmVkYmVhcmQiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci85YzNlNTcwZi1mN2EyLTRlZjMtYTIwNi1jNzYwOWNjNTYxZWQiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJSZXRyb0Z1ZWwiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvYmVlYjY1MTQtNTc1Zi00N2Q1LWI2MmYtZDE1NjIyZWE2Yzc4IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiUmV2ZXJzaSIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vcGxheXBhZ2VyLmNvbS9lbWJlZC9yZXZlcnNpL2luZGV4Lmh0bWwifSx7Im5hbWUiOiJSaWRkbGUgU2Nob29sIDIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci8xZmFkYzUxMC1jYTdlLTQxNTYtYmY0Ni03OWZhNjhlZmM0ZWMiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJSaWRkbGUgU2Nob29sIDMiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9hYTE2NGI4ZS1mNmVmLTRhNDktOGM4OS01OTk3Y2RmMGQwNjkiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJSaWRkbGUgU2Nob29sIDQiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9lMWRkYjk5ZC1hMDlmLTQ0ZjYtYTFhYy00Yjc5ZWUyYTAwMzEiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJSaWRkbGUgU2Nob29sIDUiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci84NDYxMmIzZS01OTdlLTQxZTUtYTZhZS0xNWJiYWFkYTYxNWQiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJSaWRkbGUgU2Nob29sIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvMjk4MGUyNGItYzIxMi00ZmZhLWI0ZGUtNjA5MTczNjNjOGI5IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiUmlkZGxlIFRyYW5zZmVyIDIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci8yYjJlNTg1NC1kMDQ3LTQxODEtOTUxZi03YTU0YWY2NDdhNmEiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJSaWRkbGUgVHJhbnNmZXIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci80MTE4YjFlMy1mOWJjLTQzMzgtYjUzMC05OTc1NGE3YzM2MTkiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJSb2FkYmxvY2sgMiIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzVlN2JlNDRlLTg4NzktNDQ1MC05NDE0LWVjZTJmNmI1YzA1OCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlJvYWRibG9jayIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzU5YWE4ZGIyLWNlOTQtNGQ1Yy1hOWNkLTJkMGNiMTI0ODdkZSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlJ1biAzIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiaHR0cHM6Ly91YmcxMDAuZ2l0aHViLmlvL2dhbWVzL3J1bjMifSx7Im5hbWUiOiJTY2FyeSBCdWJibGVzIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiaHR0cHM6Ly9jZG4uaHRtbGdhbWVzLmNvbS9TY2FyeUJ1YmJsZXMvIn0seyJuYW1lIjoiU2NhcnkgTWF6ZSBHYW1lIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvNmE4MThmNTUtZmM2Mi00OWRjLTg1YmItNjg3OWMyMWNhYzk0IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiU2hhZG93IEZpZ2h0ZXJzIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiaHR0cHM6Ly9lbWJlZC5nYW1lZGlzdHJpYnV0aW9uLmNvbS8/dXJsPWh0dHBzOi8vaHRtbDUuZ2FtZWRpc3RyaWJ1dGlvbi5jb20vNDljYjY3ZWVhMzQ2NDRhMWFmYWZlYTI5NzBlYWVhZDEvIn0seyJuYW1lIjoiU2hhbmdoYWkgRHluYXN0eSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzIxOTgxNDc4LTYyMTYtNDI0Ni1hNGYyLTFmM2Y0ZThjZTkyMSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlNoZWxsIFNob2NrZXJzIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiaHR0cHM6Ly9zaGVsbHNob2NrLmlvLyJ9LHsibmFtZSI6IlNoaWZ0IDIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9hNjc5ODNiOS0yMWQyLTQwOWMtOGI3OS02YTVjYzZmMmE4YjAiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJTaGlmdCAzIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvMmVhYWYzNjgtMjU5Yi00OTkyLWE2YmYtNzhlYTZkMmNmODU5IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiU2hpZnQgNCIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2FmOGIzOTJjLTAzZmMtNGY1NS1iNTc3LWY1NmNkNTY0ZmYyZCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlNoaWZ0IiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvM2M0ZTJjZTYtYWM4Ni00MDUyLTlhMjUtYWM2ODU0ZGIzZjk3IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiU2hvcHBpbmcgQ2FydCBIZXJvIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvOTYxZDA3MzAtYzNiZS00ZDFlLWI2N2QtOGE1Y2M0NjliZGI1IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiU2h1ZmZsZSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzQzMjk4MDRmLTUwZTYtNDg4Ni1iNmIzLTY1MDZmNWIwMTYyNyIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlNpbGVuY2VyIiwidHlwZSI6ImRvcyIsInVybCI6Ii9yL2RjZWI3Mzk5LWU0ZTMtNDY5Yi05ZjUzLTRlMzQzNmMzZjY2ZSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlNraSBTbGFsb20iLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL2Nkbi5odG1sZ2FtZXMuY29tL1NraVNsYWxvbS8ifSx7Im5hbWUiOiJTa3lkb20iLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL2VtYmVkLmdhbWVkaXN0cmlidXRpb24uY29tLz91cmw9aHR0cHM6Ly9odG1sNS5nYW1lZGlzdHJpYnV0aW9uLmNvbS9hZTEwMjYzMjQ3YzQ0Mjc4YjMzYzg0NWZmMWMyZGY4MC8ifSx7Im5hbWUiOiJTa3l3aXJlIDIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9iMDJiMjk1MS03Y2UwLTRlOWUtYmQ0OS1jYmJkNjNkYzI0ZDYiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJTa3l3aXJlIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvNjE5NTQ5ZGUtZTM3NC00NjAxLTk2MjItNzUzMDQwNmE5NDdkIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiU2xpcCBTcGVlZCIsInR5cGUiOiJkb3MiLCJ1cmwiOiIvci8xYTAxZGY0OC0wY2Q4LTQ0NzQtYTNhMy00MTBkN2E4NjgwMjgiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJTbG9wZSIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vc3RvcmFnZS55OC5jb20veTgtc3R1ZGlvL3VuaXR5X3dlYmdsL2JpdGxhc2x0L3Nsb3BlX3ZfMV8yXzUvaW5kZXguaHRtbCJ9LHsibmFtZSI6IlNuYWtlIiwidHlwZSI6ImRvcyIsInVybCI6Ii9yL2VmYTEwMmNiLTg4Y2QtNGQ5OC04ZmI1LTgxMWMwMmJkOTNjZCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlNuYWtlIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvZjAwMWJlNGQtZGYxNy00YzkwLTkzMjctMjVkNDg0MmZjMTQ1IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiU25vdyBTdG9ybSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzEyZjM5YmQzLTg3NjItNDJlNi1iMThjLTdlOWUwNjdlOWI5ZCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlNvbGl0YWlyZSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzg4ZjY0NGRhLTYwNTgtNDViZC04YmYwLTZmNTRkNTgwOTljOCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlNvbGl0YWlyZSIsInR5cGUiOiJodG1sNSIsInVybCI6Ii9yLzM1YjFmNDE3LTQxM2YtNDc1NS05M2ZlLTVkMWRmYWUxNGUwMCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlNvbmljIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvODc2ZmFlZGUtMmRkZS00N2IyLWFlZjctMmNiZjE4ZjQ0NjcyIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiU3BhY2UgQmxhc3QiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL2Nkbi5odG1sZ2FtZXMuY29tL1NwYWNlQmxhc3QvIn0seyJuYW1lIjoiU3BhY2UgQmxhemUiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL2VtYmVkLmdhbWVkaXN0cmlidXRpb24uY29tLz91cmw9aHR0cHM6Ly9odG1sNS5nYW1lZGlzdHJpYnV0aW9uLmNvbS9hMWM0ODU4Y2MyZGI0NTFiYjk3YzhlOTI2MjU3YjQ5YS8ifSx7Im5hbWUiOiJTcGFjZSBJbnZhZGVycyIsInR5cGUiOiJkb3MiLCJ1cmwiOiIvci81ZDg2NTQ5MC1iZDA5LTQ5OWItYTgyNy1lNDA4YWNkNmJjNTkiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJTcGFjZSBJbnZhZGVycyIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2FiMGNmZmU1LTU0NWEtNGJjYS1iNDc5LWNkYTY0MmNjODc0MCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlNwZWN0cmUiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvOGM0YjhiODUtMjJjZi00M2M4LWIzMjItYTU4Yjg1MWZkZDRjIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiU3BpdGJhbGwiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvYjExMjU5ODAtOTZiZi00Yjg3LTliODEtYjVhMGJmOTFmZGNjIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiU3F1aWQgR2FtZSIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vc3F1YWQtZ2FtZS52YWtodGFuZ2kxOTgwLnJlcGwuY28vIn0seyJuYW1lIjoiU3RpY2sgUlBHIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvYmIwNTA2NmItYzA3ZS00NGZkLWI4YjYtMjk5ZjVhODQ5ZWZlIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiU3R1cGlkaXR5IFRlc3QiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci84NzMzODNhNS03MzJmLTRiOTktYWFhMy0zOGY5ODBmYTU1MjgiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJTdXBlciBNYXJpbyA2MyIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzYyNjdhNTI5LWNmMzMtNDAwOC1iNWM3LTEzN2QxNTJiYTljNSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlN1cGVyIE1hcmlvIEZsYXNoIDIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9lOTQzOTYwMC1kNjg4LTQ4NGEtYWUyMi0zZjZkYTM1MTgzZTgiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJTdXBlciBNYXJpbyBGbGFzaCIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2M4ZTZlYjUxLWY0NjUtNGU5Mi05ZDk4LTFiZWIyYzBjNzQwYSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlN1cGVyIE1hcmlvIFN1bnNoaW5lIDY0IiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvOTRlMjY1MzUtNGI3OC00OTlhLThmNDctMmQwOTBlNGQzMDQ3IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiU3VwZXIgUm9jbyBCcm9zIiwidHlwZSI6ImRvcyIsInVybCI6Ii9yLzg2NDRiZmM4LTY2MWUtNDNjMi05OTlkLTI2MGJlYjlmNGE5MCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlN1cGVyIFNtYXNoIEZsYXNoIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvNWZlMjY4ODEtYTQwMC00OTZhLWI0NjYtZGQyYjA0YzJlYWNkIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiU3VwZXIgU3BhY2UgRnVlbCBJbmMuIiwidHlwZSI6ImRvcyIsInVybCI6Ii9yL2I0OWJlMWJlLTFmMGQtNDMyYi1iNmYyLWViZjA2MzFjODdjZiIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlN1cGVyIFN0cmVldCBGaWdodGVyIElJIFR1cmJvIiwidHlwZSI6ImRvcyIsInVybCI6Ii9yL2RmNGMyZGU5LWIzMmItNDQwOC04NTEzLTIxN2ZmZjk2MjQwMSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlN1cGVyIFZHQSBQdXp6bGUiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvNGQ3MGU0MDEtZTIxMC00MjI0LTk4ZTYtNWYxNDI2ODdjN2JjIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiU3VyZiIsInR5cGUiOiJodG1sNSIsInVybCI6Ii9yLzM4MDBmZmQxLTk0MmYtNDRiOC05YWMyLTY2MDU5ZDY4ZTdjZiIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlN3b3JkcyBhbmQgU2FuZGFscyAyIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvZWM3YmMxZDMtODA2Zi00NzdhLWEzOGUtMjhlZjUxZjNmNTU5IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiU3dvcmRzIGFuZCBTYW5kYWxzIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvZjcxZjk0ZjAtOGNiNC00OTcxLThjYzItMzBiYWQ4YmU4N2VjIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiVC1SZXggUnVuIDNEIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiL3IvNDY0YTljYTMtODM3MS00MWRmLWExNGQtMWE4OWZjOWExODJlIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiVC1SZXggUnVuIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiL3IvZGIxZTRhODItMjNlMi00NjgxLTllZGMtZTUzN2UzZjNmOGE0IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiVGFuayBUcm91YmxlIDIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9kNDkzYjAxMy03YWIyLTQ2NzgtOTZkYy0zNWRkNDg4YWE3NzUiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJUYW5rcyIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzFlZjU4NTRiLWNiZjAtNDNjNy04MDEzLTc4NDY0ZjM0MThhNiIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlRlbXBsZSBSdW4gMiIsInR5cGUiOiJodG1sNSIsInVybCI6Ii9yLzliMWUwMTgwLWY1YjEtNGUxYS04N2I3LTQ5Yzc0MTE3OTYxMyIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlRlcnJpdG9yeSBXYXIiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci83MTZjNzQ4Ny1jNjY4LTRhNDctOTQxOS02NDIwM2EwMjE3MzEiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJUZXRyYUZpeCIsInR5cGUiOiJkb3MiLCJ1cmwiOiIvci9lMTUwMDA2ZC0xNmU0LTQ5YWItYmYxOC02MzRhOTA4NjBhNWYiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJUZXRyaXMiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvMjNlZGIzM2QtNWM2NS00MTExLWExODItYWU5NjNmZmRjMGFjIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiVGV0cmlzIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvMjI4MWZjODUtYjE1Yi00YmZkLWIxOWEtM2I5ZDQ0OTdlMTQwIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiVGV0cmlzIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiL3IvNTQxNWEwYmQtNzA4MC00NWUyLWI4YjUtOWFiMzFmZWFmZjY1IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiVGhlIEJhdHRsZSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzA4OTEyMDk2LTYxN2YtNGNhYS05NGQ0LTRkOGI2OTk4OTRlOSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlRoZSBCcmlnaHQgRnJvbSBUaGUgU2NyZWVuIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvOWE2ZmE2MGYtZDk3NS00ZTdiLWEyNjQtZTQxNjk1NDM4Nzk5IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiVGhlIENsYXNzcm9vbSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2I2MTMwOGM1LWM3OTQtNGNiMy1hYTRhLTQ1ZDUzYmIxYmM4YSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlRoZSBIdW50IiwidHlwZSI6ImRvcyIsInVybCI6Ii9yLzBiOTQwMmRhLWM1YmYtNDViMy1iOGIzLThiMjUzMjhkYjhkNCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlRoZSBJbXBvc3NpYmxlIEdhbWUgTGl0ZSIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2NmNjVmZGQwLTljZWUtNDc4Ny1iMTFhLWFiNDMyNjVkYmYwNSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlRoZSBJbXBvc3NpYmxlIFF1aXogMiIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2RkZjljMGVlLTYzNGQtNGE0MC05MzM2LTBlMDAyZDU5ZThhNCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlRoZSBJbXBvc3NpYmxlIFF1aXoiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9kNGUwMjM2NC00Y2FhLTQ3NGMtYjQ5MC00YTFmYzlmN2NiZjYiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJUaGUgTGFzdCBTdGFuZCBVbmlvbiBDaXR5IiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvYjE4MWUyNzMtY2NmZC00MDA2LWJiNjYtYTAxOWU5NDJjZDIwIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiVGhpbmcgVGhpbmcgMiIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzY3ODkwMzVjLWRmMzQtNDM1MS1iYTgxLWI4N2YyMWExMzVkYyIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlRoaW5nIFRoaW5nIDMiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci85YTAwNGRmNi1kYWQ3LTQ3OWEtYjQ0MC01N2UwMWQ5ZTY1NjUiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJUaGluZyBUaGluZyA0IiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvZmI1ZGUyOWEtZTYzYi00NzQ0LWJmYjAtZDZjODNmYzZlMzk1IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiVGhpbmcgVGhpbmcgQXJlbmEgMiIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yL2UwMjZlM2E1LTExMjItNDQ2Ni05YWE0LWIyOTc3Mzk2YmIyMiIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlRoaW5nIFRoaW5nIEFyZW5hIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvYWY2MWUyZWMtOTJmNy00N2ZkLThlYTQtODRjNzlkMzI2MDZkIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiVGhpbmcgVGhpbmciLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci82OTRmNjljNC1hNjgyLTQ5MTEtODk2OS04NGMxMWJkMTk4ZWQiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJUaGlzIGlzIHRoZSBPbmx5IExldmVsIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvZjNmY2Q0MTQtY2MyYi00ODQ3LThlNTktMDMwYWU1NWRiZmNiIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiVGljIFRhYyBUb2UiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9jZmQ2MjljYy1lMmYxLTRhMmItYjE5Mi0yYzY1ZmM1MDU5ZGQiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJUaWMgVGFjIFRvZSIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8venYxeTJpOHAucGxheS5nYW1lem9wLmNvbS9nL0gxV21hZmtQOUpRIn0seyJuYW1lIjoiVHJhdmVsb2d1ZSBFc2NhcGUiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci9iNjE5ZDg3Zi05YjhhLTQ2ZGItYjlmYS00ZjIyOGRkMGFlMzEiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJUcmlwbGUgQ29ubmVjdCIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vY2RuLmh0bWxnYW1lcy5jb20vVHJpcGxlQ29ubmVjdC8ifSx7Im5hbWUiOiJUdW5uZWwgUnVzaCIsInR5cGUiOiJodG1sNSIsInVybCI6Ii9yLzkxZDNlNzc1LTI2YmUtNDYyMC1iMzc5LTU0NDc1YzY2MzY0OCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlVsdGltYXRlIENoZXNzIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvMzhjNmVmNDgtNzJhMy00MmU0LTk3ZjEtYTVjOGFjOWJlYjEzIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiVW5mYWlyIE1hcmlvIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvODBiZWEwNjAtYmJhZC00MjUyLTk1OTgtMWI0MWE2M2JhOTY4IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiVW5vIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiaHR0cHM6Ly9lbWJlZC5nYW1lZGlzdHJpYnV0aW9uLmNvbS8/dXJsPWh0dHBzOi8vYXBwLTE3Nzc5OS5nYW1lcy5zMy55YW5kZXgubmV0LzE3Nzc5OS9kN2EzNWU1N2hsODc0bnA3NDVuY3N2YWp3ZW4yZ2VzOS9pbmRleC5odG1sIn0seyJuYW1lIjoiVXJ0aHd1cm0iLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvNzMyZTZlYTctOGQ1NC00NzQzLTkyMTQtZWRhMjNhYTFmNThmIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiVmV4IDMiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiIvci85ODM2M2U0Ny1hMTMxLTQ2ZWItYTViOS0wMGNkMjJkM2EzNTMiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJWZXggNCIsInR5cGUiOiJodG1sNSIsInVybCI6Ii9yLzBlNTM2MTQwLTU1M2ItNDJiNS04NTQ0LTU5ZGY4ZWM2MjYxMSIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IlZleCA1IiwidHlwZSI6Imh0bWw1IiwidXJsIjoiL3IvNzVjM2RhNWEtMTA5NC00NmIyLWJmN2MtMzYzNDg0Y2UzZTkyIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiVmV4IDYiLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiIvci9jZGM1NWE4OS0xODk5LTQ0MGUtOWU4YS1mNjFiZjQ4YzA3ZmEiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJXYXJwIFNob3QiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci8zOWU1NDY4Yy0wYTc3LTRmMDQtYjkyYS1jMTllZTc1MzE2MmUiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJXaGFjayBZb3VyIFBDIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvZjUyOWQwNjUtNjliYi00ZTEzLWI3OGYtOWM3MTVhNThhZmEzIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiV29sZmVuc3RlaW4gM0QiLCJ0eXBlIjoiZG9zIiwidXJsIjoiL3IvODZhYmY1ZWYtZjNlNS00NWZlLTk0Y2MtYjhjMTg4ZDM4MDE0IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiV29yRE9TIiwidHlwZSI6ImRvcyIsInVybCI6Ii9yL2QyMzk3NzM2LWU4MDYtNGEyNS05OTBlLWU1NzI2MDhmNmFmNCIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IldvcmxkJ3MgRWFzaWVzdCBHYW1lIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvNDVmYWVjOWMtZjYwMC00NGRlLTliYzAtNGRhZTc3MjRiMzk4IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiV29ybGQncyBIYXJkZXN0IEdhbWUgMiIsInR5cGUiOiJmbGFzaCIsInVybCI6Ii9yLzdjYjdhYmJhLTA5MmItNDFmNS1iMWMxLWMyYmUwNjA2MjMyMiIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6IldvcmxkJ3MgSGFyZGVzdCBHYW1lIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvODEzNDkyNzItZGRjMC00YmU1LTkwY2ItY2Y1NDU0YmU4NjY3IiwibmV3IjpmYWxzZX0seyJuYW1lIjoiWC1NZW46IENoaWxkcmVuIG9mIHRoZSBBdG9tIiwidHlwZSI6ImRvcyIsInVybCI6Ii9yL2VhOGYzZDYwLTE3YTItNGIyMi1hY2ZmLWIyNDhjNjExODZmMiIsIm5ldyI6ZmFsc2V9LHsibmFtZSI6Ill1bGV0aWRlIFJpcHRpZGUiLCJ0eXBlIjoiZmxhc2giLCJ1cmwiOiIvci8yZTkyNjZhMy0yM2Y4LTQ3MzYtOGEyOC0zZjlmNDExODYwZGUiLCJuZXciOmZhbHNlfSx7Im5hbWUiOiJab21iaWUgS2lsbGVyIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiaHR0cHM6Ly9lbWJlZC5nYW1lZGlzdHJpYnV0aW9uLmNvbS8/dXJsPWh0dHBzOi8vYXBwLTE1ODY5My5nYW1lcy5zMy55YW5kZXgubmV0LzE1ODY5My8yMjg5aTRoZXo0bmtmcXlvMzF4NGwyanI0bXEybHgwdS9pbmRleC5odG1sIn0seyJuYW1lIjoiWm9tYm9jYWx5cHNlIiwidHlwZSI6ImZsYXNoIiwidXJsIjoiL3IvNWZiNzEzOGQtNjIzNC00YzdhLWE4OTAtMTY3NjMwMTAwZGRkIiwibmV3IjpmYWxzZX0seyJuYW1lIjoiZXYuaW8iLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL3d3dy5ldi5pbyJ9LHsibmFtZSI6ImhvbGUuaW8iLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL2hvbGUtaW8uY29tIn0seyJuYW1lIjoicG93ZXJsaW5lLmlvIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiaHR0cHM6Ly9wb3dlcmxpbmUuaW8ifSx7Im5hbWUiOiJzbGl0aGVyLmlvIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiaHR0cHM6Ly9zbGl0aGVyLmlvIn0seyJuYW1lIjoic25ha2UuaW8iLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL3NuYWtlLmlvIn0seyJuYW1lIjoidmVuZ2UuaW8iLCJ0eXBlIjoiaHRtbDUiLCJ1cmwiOiJodHRwczovL3ZlbmdlLmlvIn0seyJuYW1lIjoidm94aW9tLmlvIiwidHlwZSI6Imh0bWw1IiwidXJsIjoiaHR0cHM6Ly92b3hpb20uaW8ifSx7Im5hbWUiOiJ3aW5ncy5pbyIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vd2luZ3MuaW8ifSx7Im5hbWUiOiJ6b21ic3JveWFsZS5pbyIsInR5cGUiOiJodG1sNSIsInVybCI6Imh0dHBzOi8vem9tYnNyb3lhbGUuaW8ifV0="))),h=function(t,e){if(!t)throw c(e)},c=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},l=function(t){const e=[];let s=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[s++]=r:r<2048?(e[s++]=r>>6|192,e[s++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[s++]=r>>18|240,e[s++]=r>>12&63|128,e[s++]=r>>6&63|128,e[s++]=63&r|128):(e[s++]=r>>12|224,e[s++]=r>>6&63|128,e[s++]=63&r|128)}return e},p={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const r=t[e],n=e+1<t.length,a=n?t[e+1]:0,o=e+2<t.length,h=o?t[e+2]:0,c=r>>2,l=(3&r)<<4|a>>4;let p=(15&a)<<2|h>>6,u=63&h;o||(u=64,n||(p=64)),i.push(s[c],s[l],s[p],s[u])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(l(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let s=0,i=0;for(;s<t.length;){const r=t[s++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const n=t[s++];e[i++]=String.fromCharCode((31&r)<<6|63&n)}else if(r>239&&r<365){const n=((7&r)<<18|(63&t[s++])<<12|(63&t[s++])<<6|63&t[s++])-65536;e[i++]=String.fromCharCode(55296+(n>>10)),e[i++]=String.fromCharCode(56320+(1023&n))}else{const n=t[s++],a=t[s++];e[i++]=String.fromCharCode((15&r)<<12|(63&n)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const r=s[t.charAt(e++)],n=e<t.length?s[t.charAt(e)]:0;++e;const a=e<t.length?s[t.charAt(e)]:64;++e;const o=e<t.length?s[t.charAt(e)]:64;if(++e,null==r||null==n||null==a||null==o)throw new u;const h=r<<2|n>>4;if(i.push(h),64!==a){const t=n<<4&240|a>>2;if(i.push(t),64!==o){const t=a<<6&192|o;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class u extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const d=function(t){const e=l(t);return p.encodeByteArray(e,!0)},m=function(t){return d(t).replace(/\./g,"")},f=function(t){try{return p.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function y(t){return I(void 0,t)}function I(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const s in e)e.hasOwnProperty(s)&&"__proto__"!==s&&(t[s]=I(t[s],e[s]));return t}const g=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==s.g)return s.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=t&&f(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},b=()=>{var t;return null===(t=g())||void 0===t?void 0:t.config};class x{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,s)=>{e?this.reject(e):this.resolve(s),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,s))}}}function w(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")}function T(){try{return"object"==typeof indexedDB}catch(t){return!1}}function N(){return new Promise(((t,e)=>{try{let s=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),s||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{s=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}class C extends Error{constructor(t,e,s){super(e),this.code=t,this.customData=s,this.name="FirebaseError",Object.setPrototypeOf(this,C.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,v.prototype.create)}}class v{constructor(t,e,s){this.service=t,this.serviceName=e,this.errors=s}create(t,...e){const s=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],n=r?function(t,e){return t.replace(S,((t,s)=>{const i=e[s];return null!=i?String(i):`<${s}?>`}))}(r,s):"Error",a=`${this.serviceName}: ${n} (${i}).`;return new C(i,a,s)}}const S=/\{\$([^}]+)}/g;function P(t){return JSON.parse(t)}function E(t){return JSON.stringify(t)}const _=function(t){let e={},s={},i={},r="";try{const n=t.split(".");e=P(f(n[0])||""),s=P(f(n[1])||""),r=n[2],i=s.d||{},delete s.d}catch(t){}return{header:e,claims:s,data:i,signature:r}};function L(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function M(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function A(t,e,s){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(s,t[r],r,t));return i}function O(t,e){if(t===e)return!0;const s=Object.keys(t),i=Object.keys(e);for(const r of s){if(!i.includes(r))return!1;const s=t[r],n=e[r];if(Z(s)&&Z(n)){if(!O(s,n))return!1}else if(s!==n)return!1}for(const t of i)if(!s.includes(t))return!1;return!0}function Z(t){return null!==t&&"object"==typeof t}class j{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const s=this.W_;if("string"==typeof t)for(let i=0;i<16;i++)s[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let i=0;i<16;i++)s[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let t=16;t<80;t++){const e=s[t-3]^s[t-8]^s[t-14]^s[t-16];s[t]=4294967295&(e<<1|e>>>31)}let i,r,n=this.chain_[0],a=this.chain_[1],o=this.chain_[2],h=this.chain_[3],c=this.chain_[4];for(let t=0;t<80;t++){t<40?t<20?(i=h^a&(o^h),r=1518500249):(i=a^o^h,r=1859775393):t<60?(i=a&o|h&(a|o),r=2400959708):(i=a^o^h,r=3395469782);const e=(n<<5|n>>>27)+i+c+r+s[t]&4294967295;c=h,h=o,o=4294967295&(a<<30|a>>>2),a=n,n=e}this.chain_[0]=this.chain_[0]+n&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,e){if(null==t)return;void 0===e&&(e=t.length);const s=e-this.blockSize;let i=0;const r=this.buf_;let n=this.inbuf_;for(;i<e;){if(0===n)for(;i<=s;)this.compress_(t,i),i+=this.blockSize;if("string"==typeof t){for(;i<e;)if(r[n]=t.charCodeAt(i),++n,++i,n===this.blockSize){this.compress_(r),n=0;break}}else for(;i<e;)if(r[n]=t[i],++n,++i,n===this.blockSize){this.compress_(r),n=0;break}}this.inbuf_=n,this.total_+=e}digest(){const t=[];let e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let t=this.blockSize-1;t>=56;t--)this.buf_[t]=255&e,e/=256;this.compress_(this.buf_);let s=0;for(let e=0;e<5;e++)for(let i=24;i>=0;i-=8)t[s]=this.chain_[e]>>i&255,++s;return t}}function D(t,e){return`${t} failed: ${e} argument `}const Y=function(t){let e=0;for(let s=0;s<t.length;s++){const i=t.charCodeAt(s);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,s++):e+=3}return e},W=1e3,R=2,F=144e5,J=.5;function U(t,e=W,s=R){const i=e*Math.pow(s,t),r=Math.round(J*i*(Math.random()-.5)*2);return Math.min(F,i+r)}function z(t){return t&&t._delegate?t._delegate:t}class B{constructor(t,e,s){this.name=t,this.instanceFactory=e,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const V="[DEFAULT]";class G{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new x;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:e});s&&t.resolve(s)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const s=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(s)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:s})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:V})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:s});e.resolve(t)}catch(t){}}}}clearInstance(t=V){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=V){return this.instances.has(t)}getOptions(t=V){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:e});for(const[t,e]of this.instancesDeferred.entries())s===this.normalizeInstanceIdentifier(t)&&e.resolve(i);return i}onInit(t,e){var s;const i=this.normalizeInstanceIdentifier(e),r=null!==(s=this.onInitCallbacks.get(i))&&void 0!==s?s:new Set;r.add(t),this.onInitCallbacks.set(i,r);const n=this.instances.get(i);return n&&t(n,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const s=this.onInitCallbacks.get(e);if(s)for(const i of s)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===V?void 0:i),options:e}),this.instances.set(t,s),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch(t){}var i;return s||null}normalizeInstanceIdentifier(t=V){return this.component?this.component.multipleInstances?t:V:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class H{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new G(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}const X=[];var Q;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Q||(Q={}));const q={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},$=Q.INFO,K={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},tt=(t,e,...s)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=K[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...s)};class et{constructor(t){this.name=t,this._logLevel=$,this._logHandler=tt,this._userLogHandler=null,X.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Q))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?q[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...t),this._logHandler(this,Q.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...t),this._logHandler(this,Q.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...t),this._logHandler(this,Q.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...t),this._logHandler(this,Q.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...t),this._logHandler(this,Q.ERROR,...t)}}const st=(t,e)=>e.some((e=>t instanceof e));let it,rt;const nt=new WeakMap,at=new WeakMap,ot=new WeakMap,ht=new WeakMap,ct=new WeakMap;let lt={get(t,e,s){if(t instanceof IDBTransaction){if("done"===e)return at.get(t);if("objectStoreNames"===e)return t.objectStoreNames||ot.get(t);if("store"===e)return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return ut(t[e])},set:(t,e,s)=>(t[e]=s,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function pt(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(rt||(rt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(dt(this),t),ut(nt.get(this))}:function(...t){return ut(e.apply(dt(this),t))}:function(t,...s){const i=e.call(dt(this),t,...s);return ot.set(i,t.sort?t.sort():[t]),ut(i)}:(t instanceof IDBTransaction&&function(t){if(at.has(t))return;const e=new Promise(((e,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",n),t.removeEventListener("abort",n)},r=()=>{e(),i()},n=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",n),t.addEventListener("abort",n)}));at.set(t,e)}(t),st(t,it||(it=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,lt):t);var e}function ut(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",n)},r=()=>{e(ut(t.result)),i()},n=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",n)}));return e.then((e=>{e instanceof IDBCursor&&nt.set(e,t)})).catch((()=>{})),ct.set(e,t),e}(t);if(ht.has(t))return ht.get(t);const e=pt(t);return e!==t&&(ht.set(t,e),ct.set(e,t)),e}const dt=t=>ct.get(t),mt=["get","getKey","getAll","getAllKeys","count"],ft=["put","add","delete","clear"],yt=new Map;function It(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(yt.get(e))return yt.get(e);const s=e.replace(/FromIndex$/,""),i=e!==s,r=ft.includes(s);if(!(s in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!mt.includes(s))return;const n=async function(t,...e){const n=this.transaction(t,r?"readwrite":"readonly");let a=n.store;return i&&(a=a.index(e.shift())),(await Promise.all([a[s](...e),r&&n.done]))[0]};return yt.set(e,n),n}var gt;gt=lt,lt={...gt,get:(t,e,s)=>It(t,e)||gt.get(t,e,s),has:(t,e)=>!!It(t,e)||gt.has(t,e)};class bt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const xt="@firebase/app",wt="0.9.23",Tt=new et("@firebase/app"),Nt="[DEFAULT]",Ct={[xt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vt=new Map,St=new Map;function Pt(t,e){try{t.container.addComponent(e)}catch(s){Tt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function Et(t){const e=t.name;if(St.has(e))return Tt.debug(`There were multiple attempts to register component ${e}.`),!1;St.set(e,t);for(const e of vt.values())Pt(e,t);return!0}function _t(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}const Lt=new v("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class kt{constructor(t,e,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new B("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Lt.create("app-deleted",{appName:this._name})}}function Mt(t,e={}){let s=t;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:Nt,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw Lt.create("bad-app-name",{appName:String(r)});if(s||(s=b()),!s)throw Lt.create("no-options");const n=vt.get(r);if(n){if(O(s,n.options)&&O(i,n.config))return n;throw Lt.create("duplicate-app",{appName:r})}const a=new H(r);for(const t of St.values())a.addComponent(t);const o=new kt(s,i,a);return vt.set(r,o),o}function At(t=Nt){const e=vt.get(t);if(!e&&t===Nt&&b())return Mt();if(!e)throw Lt.create("no-app",{appName:t});return e}function Ot(t,e,s){var i;let r=null!==(i=Ct[t])&&void 0!==i?i:t;s&&(r+=`-${s}`);const n=r.match(/\s|\//),a=e.match(/\s|\//);if(n||a){const t=[`Unable to register library "${r}" with version "${e}":`];return n&&t.push(`library name "${r}" contains illegal characters (whitespace or "/")`),n&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Tt.warn(t.join(" "))}Et(new B(`${r}-version`,(()=>({library:r,version:e})),"VERSION"))}const Zt="firebase-heartbeat-database",jt=1,Dt="firebase-heartbeat-store";let Yt=null;function Wt(){return Yt||(Yt=function(t,e,{blocked:s,upgrade:i,blocking:r,terminated:n}={}){const a=indexedDB.open(t,e),o=ut(a);return i&&a.addEventListener("upgradeneeded",(t=>{i(ut(a.result),t.oldVersion,t.newVersion,ut(a.transaction),t)})),s&&a.addEventListener("blocked",(t=>s(t.oldVersion,t.newVersion,t))),o.then((t=>{n&&t.addEventListener("close",(()=>n())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),o}(Zt,jt,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Dt)}}).catch((t=>{throw Lt.create("idb-open",{originalErrorMessage:t.message})}))),Yt}async function Rt(t,e){try{const s=(await Wt()).transaction(Dt,"readwrite"),i=s.objectStore(Dt);await i.put(e,Ft(t)),await s.done}catch(t){if(t instanceof C)Tt.warn(t.message);else{const e=Lt.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});Tt.warn(e.message)}}}function Ft(t){return`${t.name}!${t.options.appId}`}class Jt{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new zt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t;const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ut();if(null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==s&&!this._heartbeatsCache.heartbeats.some((t=>t.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Ut(),{heartbeatsToSend:s,unsentEntries:i}=function(t,e=1024){const s=[];let i=t.slice();for(const r of t){const t=s.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),Bt(s)>e){t.dates.pop();break}}else if(s.push({agent:r.agent,dates:[r.date]}),Bt(s)>e){s.pop();break}i=i.slice(1)}return{heartbeatsToSend:s,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=m(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Ut(){return(new Date).toISOString().substring(0,10)}class zt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!T()&&N().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=await Wt();return await e.transaction(Dt).objectStore(Dt).get(Ft(t))}catch(t){if(t instanceof C)Tt.warn(t.message);else{const e=Lt.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});Tt.warn(e.message)}}}(this.app);return t||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return Rt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const s=await this.read();return Rt(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}}}function Bt(t){return m(JSON.stringify({version:2,heartbeats:t})).length}Et(new B("platform-logger",(t=>new bt(t)),"PRIVATE")),Et(new B("heartbeat",(t=>new Jt(t)),"PRIVATE")),Ot(xt,wt,""),Ot(xt,wt,"esm2017"),Ot("fire-js",""),Ot("firebase","10.6.0","app");const Vt=(t,e)=>e.some((e=>t instanceof e));let Gt,Ht;const Xt=new WeakMap,Qt=new WeakMap,qt=new WeakMap,$t=new WeakMap,Kt=new WeakMap;let te={get(t,e,s){if(t instanceof IDBTransaction){if("done"===e)return Qt.get(t);if("objectStoreNames"===e)return t.objectStoreNames||qt.get(t);if("store"===e)return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return se(t[e])},set:(t,e,s)=>(t[e]=s,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function ee(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ht||(Ht=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(ie(this),t),se(Xt.get(this))}:function(...t){return se(e.apply(ie(this),t))}:function(t,...s){const i=e.call(ie(this),t,...s);return qt.set(i,t.sort?t.sort():[t]),se(i)}:(t instanceof IDBTransaction&&function(t){if(Qt.has(t))return;const e=new Promise(((e,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",n),t.removeEventListener("abort",n)},r=()=>{e(),i()},n=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",n),t.addEventListener("abort",n)}));Qt.set(t,e)}(t),Vt(t,Gt||(Gt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,te):t);var e}function se(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",n)},r=()=>{e(se(t.result)),i()},n=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",n)}));return e.then((e=>{e instanceof IDBCursor&&Xt.set(e,t)})).catch((()=>{})),Kt.set(e,t),e}(t);if($t.has(t))return $t.get(t);const e=ee(t);return e!==t&&($t.set(t,e),Kt.set(e,t)),e}const ie=t=>Kt.get(t),re=["get","getKey","getAll","getAllKeys","count"],ne=["put","add","delete","clear"],ae=new Map;function oe(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(ae.get(e))return ae.get(e);const s=e.replace(/FromIndex$/,""),i=e!==s,r=ne.includes(s);if(!(s in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!re.includes(s))return;const n=async function(t,...e){const n=this.transaction(t,r?"readwrite":"readonly");let a=n.store;return i&&(a=a.index(e.shift())),(await Promise.all([a[s](...e),r&&n.done]))[0]};return ae.set(e,n),n}te=(t=>({...t,get:(e,s,i)=>oe(e,s)||t.get(e,s,i),has:(e,s)=>!!oe(e,s)||t.has(e,s)}))(te);const he="@firebase/installations",ce="0.6.4",le=1e4,pe=`w:${ce}`,ue="FIS_v2",de="https://firebaseinstallations.googleapis.com/v1",me=36e5,fe=new v("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ye(t){return t instanceof C&&t.code.includes("request-failed")}function Ie({projectId:t}){return`${de}/projects/${t}/installations`}function ge(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function be(t,e){const s=(await e.json()).error;return fe.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function xe({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}async function we(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Te(t){return new Promise((e=>{setTimeout(e,t)}))}const Ne=/^[cdef][\w-]{21}$/,Ce="";function ve(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){var e;return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22)}(t);return Ne.test(e)?e:Ce}catch(t){return Ce}}function Se(t){return`${t.appName}!${t.appId}`}const Pe=new Map;function Ee(t,e){const s=Se(t);_e(s,e),function(t,e){const s=(!Le&&"BroadcastChannel"in self&&(Le=new BroadcastChannel("[Firebase] FID Change"),Le.onmessage=t=>{_e(t.data.key,t.data.fid)}),Le);s&&s.postMessage({key:t,fid:e}),0===Pe.size&&Le&&(Le.close(),Le=null)}(s,e)}function _e(t,e){const s=Pe.get(t);if(s)for(const t of s)t(e)}let Le=null;const ke="firebase-installations-database",Me=1,Ae="firebase-installations-store";let Oe=null;function Ze(){return Oe||(Oe=function(t,e,{blocked:s,upgrade:i,blocking:r,terminated:n}={}){const a=indexedDB.open(t,e),o=se(a);return i&&a.addEventListener("upgradeneeded",(t=>{i(se(a.result),t.oldVersion,t.newVersion,se(a.transaction))})),s&&a.addEventListener("blocked",(()=>s())),o.then((t=>{n&&t.addEventListener("close",(()=>n())),r&&t.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),o}(ke,Me,{upgrade:(t,e)=>{0===e&&t.createObjectStore(Ae)}})),Oe}async function je(t,e){const s=Se(t),i=(await Ze()).transaction(Ae,"readwrite"),r=i.objectStore(Ae),n=await r.get(s);return await r.put(e,s),await i.done,n&&n.fid===e.fid||Ee(t,e.fid),e}async function De(t){const e=Se(t),s=(await Ze()).transaction(Ae,"readwrite");await s.objectStore(Ae).delete(e),await s.done}async function Ye(t,e){const s=Se(t),i=(await Ze()).transaction(Ae,"readwrite"),r=i.objectStore(Ae),n=await r.get(s),a=e(n);return void 0===a?await r.delete(s):await r.put(a,s),await i.done,!a||n&&n.fid===a.fid||Ee(t,a.fid),a}async function We(t){let e;const s=await Ye(t.appConfig,(s=>{const i=function(t){return Je(t||{fid:ve(),registrationStatus:0})}(s),r=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(fe.create("app-offline"))};const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(t,e){try{const s=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:s}){const i=Ie(t),r=xe(t),n=e.getImmediate({optional:!0});if(n){const t=await n.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const a={fid:s,authVersion:ue,appId:t.appId,sdkVersion:pe},o={method:"POST",headers:r,body:JSON.stringify(a)},h=await we((()=>fetch(i,o)));if(h.ok){const t=await h.json();return{fid:t.fid||s,registrationStatus:2,refreshToken:t.refreshToken,authToken:ge(t.authToken)}}throw await be("Create Installation",h)}(t,e);return je(t.appConfig,s)}catch(s){throw ye(s)&&409===s.customData.serverCode?await De(t.appConfig):await je(t.appConfig,{fid:e.fid,registrationStatus:0}),s}}(t,s);return{installationEntry:s,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Re(t)}:{installationEntry:e}}(t,i);return e=r.registrationPromise,r.installationEntry}));return s.fid===Ce?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}async function Re(t){let e=await Fe(t.appConfig);for(;1===e.registrationStatus;)await Te(100),e=await Fe(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:s}=await We(t);return s||e}return e}function Fe(t){return Ye(t,(t=>{if(!t)throw fe.create("installation-not-found");return Je(t)}))}function Je(t){return 1===(e=t).registrationStatus&&e.registrationTime+le<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}async function Ue({appConfig:t,heartbeatServiceProvider:e},s){const i=function(t,{fid:e}){return`${Ie(t)}/${e}/authTokens:generate`}(t,s),r=function(t,{refreshToken:e}){const s=xe(t);return s.append("Authorization",function(t){return`${ue} ${t}`}(e)),s}(t,s),n=e.getImmediate({optional:!0});if(n){const t=await n.getHeartbeatsHeader();t&&r.append("x-firebase-client",t)}const a={installation:{sdkVersion:pe,appId:t.appId}},o={method:"POST",headers:r,body:JSON.stringify(a)},h=await we((()=>fetch(i,o)));if(h.ok)return ge(await h.json());throw await be("Generate Auth Token",h)}async function ze(t,e=!1){let s;const i=await Ye(t.appConfig,(i=>{if(!Ve(i))throw fe.create("not-registered");const r=i.authToken;if(!e&&(2===(n=r).requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+me}(n)))return i;var n;if(1===r.requestStatus)return s=async function(t,e){let s=await Be(t.appConfig);for(;1===s.authToken.requestStatus;)await Te(100),s=await Be(t.appConfig);const i=s.authToken;return 0===i.requestStatus?ze(t,e):i}(t,e),i;{if(!navigator.onLine)throw fe.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(i);return s=async function(t,e){try{const s=await Ue(t,e),i=Object.assign(Object.assign({},e),{authToken:s});return await je(t.appConfig,i),s}catch(s){if(!ye(s)||401!==s.customData.serverCode&&404!==s.customData.serverCode){const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await je(t.appConfig,s)}else await De(t.appConfig);throw s}}(t,e),e}}));return s?await s:i.authToken}function Be(t){return Ye(t,(t=>{if(!Ve(t))throw fe.create("not-registered");return 1===(e=t.authToken).requestStatus&&e.requestTime+le<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var e}))}function Ve(t){return void 0!==t&&2===t.registrationStatus}function Ge(t){return fe.create("missing-app-config-values",{valueName:t})}const He="installations";Et(new B(He,(t=>{const e=t.getProvider("app").getImmediate(),s=function(t){if(!t||!t.options)throw Ge("App Configuration");if(!t.name)throw Ge("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!t.options[s])throw Ge(s);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:s,heartbeatServiceProvider:_t(e,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),Et(new B("installations-internal",(t=>{const e=_t(t.getProvider("app").getImmediate(),He).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:s,registrationPromise:i}=await We(e);return i?i.catch(console.error):ze(e).catch(console.error),s.fid}(e),getToken:t=>async function(t,e=!1){const s=t;return await async function(t){const{registrationPromise:e}=await We(t);e&&await e}(s),(await ze(s,e)).token}(e,t)}}),"PRIVATE")),Ot(he,ce),Ot(he,ce,"esm2017");const Xe="analytics",Qe="firebase_id",qe="origin",$e=6e4,Ke="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ts="https://www.googletagmanager.com/gtag/js",es=new et("@firebase/analytics"),ss=new v("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function is(t){if(!t.startsWith(ts)){const e=ss.create("invalid-gtag-resource",{gtagURL:t});return es.warn(e.message),""}return t}function rs(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}const ns=30,as=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function os(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function hs(t,e=as,s){const{appId:i,apiKey:r,measurementId:n}=t.options;if(!i)throw ss.create("no-app-id");if(!r){if(n)return{measurementId:n,appId:i};throw ss.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new ls;return setTimeout((async()=>{o.abort()}),void 0!==s?s:$e),cs({appId:i,apiKey:r,measurementId:n},a,o,e)}async function cs(t,{throttleEndTimeMillis:e,backoffCount:s},i,r=as){var n;const{appId:a,measurementId:o}=t;try{await function(t,e){return new Promise(((s,i)=>{const r=Math.max(e-Date.now(),0),n=setTimeout(s,r);t.addEventListener((()=>{clearTimeout(n),i(ss.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(i,e)}catch(t){if(o)return es.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${null==t?void 0:t.message}]`),{appId:a,measurementId:o};throw t}try{const e=await async function(t){var e;const{appId:s,apiKey:i}=t,r={method:"GET",headers:os(i)},n=Ke.replace("{app-id}",s),a=await fetch(n,r);if(200!==a.status&&304!==a.status){let t="";try{const s=await a.json();(null===(e=s.error)||void 0===e?void 0:e.message)&&(t=s.error.message)}catch(t){}throw ss.create("config-fetch-failed",{httpStatus:a.status,responseMessage:t})}return a.json()}(t);return r.deleteThrottleMetadata(a),e}catch(e){const h=e;if(!function(t){if(!(t instanceof C&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(h)){if(r.deleteThrottleMetadata(a),o)return es.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${null==h?void 0:h.message}]`),{appId:a,measurementId:o};throw e}const c=503===Number(null===(n=null==h?void 0:h.customData)||void 0===n?void 0:n.httpStatus)?U(s,r.intervalMillis,ns):U(s,r.intervalMillis),l={throttleEndTimeMillis:Date.now()+c,backoffCount:s+1};return r.setThrottleMetadata(a,l),es.debug(`Calling attemptFetch again in ${c} millis`),cs(t,l,i,r)}}class ls{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}let ps,us;async function ds(t,e,s,i,r,n,a){var o;const h=hs(t);h.then((e=>{s[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&es.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>es.error(t))),e.push(h);const c=async function(){if(!T())return es.warn(ss.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await N()}catch(t){return es.warn(ss.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?i.getId():void 0)),[l,p]=await Promise.all([h,c]);(function(t){const e=window.document.getElementsByTagName("script");for(const s of Object.values(e))if(s.src&&s.src.includes(ts)&&s.src.includes(t))return s;return null})(n)||function(t,e){const s=function(t,e){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy("firebase-js-sdk-policy",e)),s}(0,{createScriptURL:is}),i=document.createElement("script"),r=`${ts}?l=${t}&id=${e}`;i.src=s?null==s?void 0:s.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}(n,l.measurementId),us&&(r("consent","default",us),us=void 0),r("js",new Date);const u=null!==(o=null==a?void 0:a.config)&&void 0!==o?o:{};return u[qe]="firebase",u.update=!0,null!=p&&(u[Qe]=p),r("config",l.measurementId,u),ps&&(r("set",ps),ps=void 0),l.measurementId}class ms{constructor(t){this.app=t}_delete(){return delete fs[this.app.options.appId],Promise.resolve()}}let fs={},ys=[];const Is={};let gs,bs,xs="dataLayer",ws=!1;function Ts(t,e,s){!function(){const t=[];if(function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()&&t.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),s=ss.create("invalid-analytics-context",{errorInfo:e});es.warn(s.message)}}();const i=t.options.appId;if(!i)throw ss.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw ss.create("no-api-key");es.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=fs[i])throw ss.create("already-exists",{id:i});if(!ws){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(xs);const{wrappedGtag:t,gtagCore:e}=function(t,e,s,i,r){let n=function(...t){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(n=window[r]),window[r]=function(t,e,s,i){return async function(r,...n){try{if("event"===r){const[i,r]=n;await async function(t,e,s,i,r){try{let n=[];if(r&&r.send_to){let t=r.send_to;Array.isArray(t)||(t=[t]);const i=await rs(s);for(const s of t){const t=i.find((t=>t.measurementId===s)),r=t&&e[t.appId];if(!r){n=[];break}n.push(r)}}0===n.length&&(n=Object.values(e)),await Promise.all(n),t("event",i,r||{})}catch(t){es.error(t)}}(t,e,s,i,r)}else if("config"===r){const[r,a]=n;await async function(t,e,s,i,r,n){const a=i[r];try{if(a)await e[a];else{const t=(await rs(s)).find((t=>t.measurementId===r));t&&await e[t.appId]}}catch(t){es.error(t)}t("config",r,n)}(t,e,s,i,r,a)}else if("consent"===r){const[e]=n;t("consent","update",e)}else if("get"===r){const[e,s,i]=n;t("get",e,s,i)}else if("set"===r){const[e]=n;t("set",e)}else t(r,...n)}catch(t){es.error(t)}}}(n,t,e,s),{gtagCore:n,wrappedGtag:window[r]}}(fs,ys,Is,xs,"gtag");bs=t,gs=e,ws=!0}return fs[i]=ds(t,ys,Is,e,gs,xs,s),new ms(t)}const Ns="@firebase/analytics",Cs="0.10.0";Et(new B(Xe,((t,{options:e})=>Ts(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),Et(new B("analytics-internal",(function(t){try{const e=t.getProvider(Xe).getImmediate();return{logEvent:(t,s,i)=>function(t,e,s,i){t=z(t),async function(t,e,s,i,r){if(r&&r.global)t("event",s,i);else{const r=await e;t("event",s,Object.assign(Object.assign({},i),{send_to:r}))}}(bs,fs[t.app.options.appId],e,s,i).catch((t=>es.error(t)))}(e,t,s,i)}}catch(t){throw ss.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),Ot(Ns,Cs),Ot(Ns,Cs,"esm2017");const vs="@firebase/database",Ss="1.0.1";let Ps="";class Es{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),E(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:P(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class _s{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return L(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const Ls=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Es(e)}}catch(t){}return new _s},ks=Ls("localStorage"),Ms=Ls("sessionStorage"),As=new et("@firebase/database"),Os=function(){let t=1;return function(){return t++}}(),Zs=function(t){const e=function(t){const e=[];let s=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const e=r-55296;i++,h(i<t.length,"Surrogate pair missing trail surrogate."),r=65536+(e<<10)+(t.charCodeAt(i)-56320)}r<128?e[s++]=r:r<2048?(e[s++]=r>>6|192,e[s++]=63&r|128):r<65536?(e[s++]=r>>12|224,e[s++]=r>>6&63|128,e[s++]=63&r|128):(e[s++]=r>>18|240,e[s++]=r>>12&63|128,e[s++]=r>>6&63|128,e[s++]=63&r|128)}return e}(t),s=new j;s.update(e);const i=s.digest();return p.encodeByteArray(i)},js=function(...t){let e="";for(let s=0;s<t.length;s++){const i=t[s];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=js.apply(null,i):e+="object"==typeof i?E(i):i,e+=" "}return e};let Ds=null,Ys=!0;const Ws=function(...t){if(!0===Ys&&(Ys=!1,null===Ds&&!0===Ms.get("logging_enabled")&&(e=!0,h(!s||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(As.logLevel=Q.VERBOSE,Ds=As.log.bind(As),s&&Ms.set("logging_enabled",!0)):"function"==typeof e?Ds=e:(Ds=null,Ms.remove("logging_enabled")))),Ds){const e=js.apply(null,t);Ds(e)}var e,s},Rs=function(t){return function(...e){Ws(t,...e)}},Fs=function(...t){const e="FIREBASE INTERNAL ERROR: "+js(...t);As.error(e)},Js=function(...t){const e=`FIREBASE FATAL ERROR: ${js(...t)}`;throw As.error(e),new Error(e)},Us=function(...t){const e="FIREBASE WARNING: "+js(...t);As.warn(e)},zs=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Bs="[MIN_NAME]",Vs="[MAX_NAME]",Gs=function(t,e){if(t===e)return 0;if(t===Bs||e===Vs)return-1;if(e===Bs||t===Vs)return 1;{const s=ei(t),i=ei(e);return null!==s?null!==i?s-i==0?t.length-e.length:s-i:-1:null!==i?1:t<e?-1:1}},Hs=function(t,e){return t===e?0:t<e?-1:1},Xs=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+E(e))},Qs=function(t){if("object"!=typeof t||null===t)return E(t);const e=[];for(const s in t)e.push(s);e.sort();let s="{";for(let i=0;i<e.length;i++)0!==i&&(s+=","),s+=E(e[i]),s+=":",s+=Qs(t[e[i]]);return s+="}",s},qs=function(t,e){const s=t.length;if(s<=e)return[t];const i=[];for(let r=0;r<s;r+=e)r+e>s?i.push(t.substring(r,s)):i.push(t.substring(r,r+e));return i};function $s(t,e){for(const s in t)t.hasOwnProperty(s)&&e(s,t[s])}const Ks=function(t){h(!zs(t),"Invalid JSON number");let e,s,i,r,n;0===t?(s=0,i=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(r=Math.min(Math.floor(Math.log(t)/Math.LN2),1023),s=r+1023,i=Math.round(t*Math.pow(2,52-r)-Math.pow(2,52))):(s=0,i=Math.round(t/Math.pow(2,-1074))));const a=[];for(n=52;n;n-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(n=11;n;n-=1)a.push(s%2?1:0),s=Math.floor(s/2);a.push(e?1:0),a.reverse();const o=a.join("");let c="";for(n=0;n<64;n+=8){let t=parseInt(o.substr(n,8),2).toString(16);1===t.length&&(t="0"+t),c+=t}return c.toLowerCase()},ti=new RegExp("^-?(0*)\\d{1,10}$"),ei=function(t){if(ti.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},si=function(t){try{t()}catch(t){setTimeout((()=>{const e=t.stack||"";throw Us("Exception was thrown by user callback.",e),t}),Math.floor(0))}},ii=function(t,e){const s=setTimeout(t,e);return"number"==typeof s&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(s):"object"==typeof s&&s.unref&&s.unref(),s};class ri{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((t=>this.appCheck=t))}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise(((e,s)=>{setTimeout((()=>{this.appCheck?this.getToken(t).then(e,s):e(null)}),0)}))}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((e=>e.addTokenListener(t)))}notifyForInvalidToken(){Us(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ni{constructor(t,e,s){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit((t=>this.auth_=t))}getToken(t){return this.auth_?this.auth_.getToken(t).catch((t=>t&&"auth/token-not-initialized"===t.code?(Ws("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t))):new Promise(((e,s)=>{setTimeout((()=>{this.auth_?this.getToken(t).then(e,s):e(null)}),0)}))}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((e=>e.addAuthTokenListener(t)))}removeTokenChangeListener(t){this.authProvider_.get().then((e=>e.removeAuthTokenListener(t)))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Us(t)}}class ai{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}ai.OWNER="owner";const oi="5",hi=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ci="ac",li="websocket",pi="long_polling";class ui{constructor(t,e,s,i,r=!1,n="",a=!1,o=!1){this.secure=e,this.namespace=s,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=n,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=o,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ks.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ks.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function di(t,e,s){let i;if(h("string"==typeof e,"typeof type must == string"),h("object"==typeof s,"typeof params must == object"),e===li)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==pi)throw new Error("Unknown connection type: "+e);i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(s.ns=t.namespace);const r=[];return $s(s,((t,e)=>{r.push(t+"="+e)})),i+r.join("&")}class mi{constructor(){this.counters_={}}incrementCounter(t,e=1){L(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return y(this.counters_)}}const fi={},yi={};function Ii(t){const e=t.toString();return fi[e]||(fi[e]=new mi),fi[e]}class gi{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const t=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let e=0;e<t.length;++e)t[e]&&si((()=>{this.onMessage_(t[e])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const bi="start";class xi{constructor(t,e,s,i,r,n,a){this.connId=t,this.repoInfo=e,this.applicationId=s,this.appCheckToken=i,this.authToken=r,this.transportSessionId=n,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Rs(t),this.stats_=Ii(e),this.urlFn=t=>(this.appCheckToken&&(t[ci]=this.appCheckToken),di(e,pi,t))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new gi(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let e=!1;const s=function(){document.body?e||(e=!0,t()):setTimeout(s,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&s()})),window.attachEvent("onload",s))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new wi(((...t)=>{const[e,s,i,r,n]=t;if(this.incrementIncomingBytes_(t),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,e===bi)this.id=s,this.password=i;else{if("close"!==e)throw new Error("Unrecognized command received: "+e);s?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(s,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...t)=>{const[e,s]=t;this.incrementIncomingBytes_(t),this.myPacketOrderer.handleResponse(e,s)}),(()=>{this.onClosed_()}),this.urlFn);const t={};t[bi]="t",t.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=this.scriptTagHolder.uniqueCallbackIdentifier),t.v=oi,this.transportSessionId&&(t.s=this.transportSessionId),this.lastSessionId&&(t.ls=this.lastSessionId),this.applicationId&&(t.p=this.applicationId),this.appCheckToken&&(t[ci]=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&hi.test(location.hostname)&&(t.r="f");const e=this.urlFn(t);this.log_("Connecting via long-poll to "+e),this.scriptTagHolder.addTag(e,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){xi.forceAllow_=!0}static forceDisallow(){xi.forceDisallow_=!0}static isAvailable(){return!(!xi.forceAllow_&&(xi.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=E(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const s=d(e),i=qs(s,1840);for(let t=0;t<i.length;t++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[t]),this.curSegmentNum++}addDisconnectPingFrame(t,e){this.myDisconnFrame=document.createElement("iframe");const s={dframe:"t"};s.id=t,s.pw=e,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=E(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class wi{constructor(t,e,s,i){this.onDisconnect=s,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Os(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=wi.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const i="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(t){Ws("frame writing exception"),t.stack&&Ws(t.stack),Ws(t)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Ws("No IE domain setting required")}catch(e){const s=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),s="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+s.length<=1870;){const t=this.pendingSegs.shift();s=s+"&seg"+i+"="+t.seg+"&ts"+i+"="+t.ts+"&d"+i+"="+t.d,i++}return e+=s,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,s){this.pendingSegs.push({seg:t,ts:e,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const s=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(s,Math.floor(25e3));this.addTag(t,(()=>{clearTimeout(i),s()}))}addTag(t,e){setTimeout((()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=t,s.onload=s.onreadystatechange=function(){const t=s.readyState;t&&"loaded"!==t&&"complete"!==t||(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),e())},s.onerror=()=>{Ws("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch(t){}}),Math.floor(1))}}let Ti=null;"undefined"!=typeof MozWebSocket?Ti=MozWebSocket:"undefined"!=typeof WebSocket&&(Ti=WebSocket);class Ni{constructor(t,e,s,i,r,n,a){this.connId=t,this.applicationId=s,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Rs(this.connId),this.stats_=Ii(e),this.connURL=Ni.connectionURL_(e,n,a,i,s),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,s,i,r){const n={};return n.v=oi,"undefined"!=typeof location&&location.hostname&&hi.test(location.hostname)&&(n.r="f"),e&&(n.s=e),s&&(n.ls=s),i&&(n[ci]=i),r&&(n.p=r),di(t,li,n)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ks.set("previous_websocket_failure",!0);try{let t;0,this.mySock=new Ti(this.connURL,[],t)}catch(t){this.log_("Error instantiating WebSocket.");const e=t.message||t.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=t=>{this.handleIncomingFrame(t)},this.mySock.onerror=t=>{this.log_("WebSocket error.  Closing connection.");const e=t.message||t.data;e&&this.log_(e),this.onClosed_()}}start(){}static forceDisallow(){Ni.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(e);s&&s.length>1&&parseFloat(s[1])<4.4&&(t=!0)}return!t&&null!==Ti&&!Ni.forceDisallow_}static previouslyFailed(){return ks.isInMemoryStorage||!0===ks.get("previous_websocket_failure")}markConnectionHealthy(){ks.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const e=P(t);this.onMessage(e)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(h(null===this.frames,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{const t=this.extractFrameCount_(e);null!==t&&this.appendFrame_(t)}}send(t){this.resetKeepAlive();const e=E(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const s=qs(e,16384);s.length>1&&this.sendString_(String(s.length));for(let t=0;t<s.length;t++)this.sendString_(s[t])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ni.responsesRequiredToBeHealthy=2,Ni.healthyTimeout=3e4;class Ci{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[xi,Ni]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const e=Ni&&Ni.isAvailable();let s=e&&!Ni.previouslyFailed();if(t.webSocketOnly&&(e||Us("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Ni];else{const t=this.transports_=[];for(const e of Ci.ALL_TRANSPORTS)e&&e.isAvailable()&&t.push(e);Ci.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ci.globalTransportInitialized_=!1;class vi{constructor(t,e,s,i,r,n,a,o,h,c){this.id=t,this.repoInfo_=e,this.applicationId_=s,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=n,this.onReady_=a,this.onDisconnect_=o,this.onKill_=h,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Rs("c:"+this.id+":"),this.transportManager_=new Ci(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(e,s)}),Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=ii((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Xs("t",t),s=Xs("d",t);if("c"===e)this.onSecondaryControl_(s);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(s)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Xs("t",t),s=Xs("d",t);"c"===e?this.onControl_(s):"d"===e&&this.onDataMessage_(s)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Xs("t",t);if("d"in t){const s=t.d;if("h"===e){const t=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(t.h=this.repoInfo_.host),this.onHandshake_(t)}else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let t=0;t<this.pendingDataMessages.length;++t)this.onDataMessage_(this.pendingDataMessages[t]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(s):"r"===e?this.onReset_(s):"e"===e?Fs("Server Error: "+s):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Fs("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,s=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),oi!==s&&Us("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,s),ii((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ii((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ks.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Si{put(t,e,s,i){}merge(t,e,s,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,s){}onDisconnectMerge(t,e,s){}onDisconnectCancel(t,e){}reportStats(t){}}class Pi{constructor(t){this.allowedEvents_=t,this.listeners_={},h(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const s=[...this.listeners_[t]];for(let t=0;t<s.length;t++)s[t].callback.apply(s[t].context,e)}}on(t,e,s){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:s});const i=this.getInitialEvent(t);i&&e.apply(s,i)}off(t,e,s){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let t=0;t<i.length;t++)if(i[t].callback===e&&(!s||s===i[t].context))return void i.splice(t,1)}validateEventType_(t){h(this.allowedEvents_.find((e=>e===t)),"Unknown event: "+t)}}class Ei extends Pi{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||w()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new Ei}getInitialEvent(t){return h("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class _i{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let e=0;for(let t=0;t<this.pieces_.length;t++)this.pieces_[t].length>0&&(this.pieces_[e]=this.pieces_[t],e++);this.pieces_.length=e,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function Li(){return new _i("")}function ki(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Mi(t){return t.pieces_.length-t.pieceNum_}function Ai(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new _i(t.pieces_,e)}function Oi(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Zi(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function ji(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let s=t.pieceNum_;s<t.pieces_.length-1;s++)e.push(t.pieces_[s]);return new _i(e,0)}function Di(t,e){const s=[];for(let e=t.pieceNum_;e<t.pieces_.length;e++)s.push(t.pieces_[e]);if(e instanceof _i)for(let t=e.pieceNum_;t<e.pieces_.length;t++)s.push(e.pieces_[t]);else{const t=e.split("/");for(let e=0;e<t.length;e++)t[e].length>0&&s.push(t[e])}return new _i(s,0)}function Yi(t){return t.pieceNum_>=t.pieces_.length}function Wi(t,e){const s=ki(t),i=ki(e);if(null===s)return e;if(s===i)return Wi(Ai(t),Ai(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ri(t,e){if(Mi(t)!==Mi(e))return!1;for(let s=t.pieceNum_,i=e.pieceNum_;s<=t.pieces_.length;s++,i++)if(t.pieces_[s]!==e.pieces_[i])return!1;return!0}function Fi(t,e){let s=t.pieceNum_,i=e.pieceNum_;if(Mi(t)>Mi(e))return!1;for(;s<t.pieces_.length;){if(t.pieces_[s]!==e.pieces_[i])return!1;++s,++i}return!0}class Ji{constructor(t,e){this.errorPrefix_=e,this.parts_=Zi(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let t=0;t<this.parts_.length;t++)this.byteLength_+=Y(this.parts_[t]);Ui(this)}}function Ui(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+zi(t))}function zi(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class Bi extends Pi{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,(()=>{const e=!document[t];e!==this.visible_&&(this.visible_=e,this.trigger("visible",e))}),!1)}static getInstance(){return new Bi}getInitialEvent(t){return h("visible"===t,"Unknown event type: "+t),[this.visible_]}}const Vi=1e3;class Gi extends Si{constructor(t,e,s,i,r,n,a,o){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=s,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=n,this.appCheckTokenProvider_=a,this.authOverride_=o,this.id=Gi.nextPersistentConnectionId_++,this.log_=Rs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Vi,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Bi.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Ei.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,s){const i=++this.requestNumber_,r={r:i,a:t,b:e};this.log_(E(r)),h(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),s&&(this.requestCBHash_[i]=s)}get(t){this.initConnection_();const e=new x,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:t=>{const s=t.d;"ok"===t.s?e.resolve(s):e.reject(s)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),e.promise}listen(t,e,s,i){this.initConnection_();const r=t._queryIdentifier,n=t._path.toString();this.log_("Listen called for "+n+" "+r),this.listens.has(n)||this.listens.set(n,new Map),h(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),h(!this.listens.get(n).has(r),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:e,query:t,tag:s};this.listens.get(n).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,(s=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(s)}))}sendListen_(t){const e=t.query,s=e._path.toString(),i=e._queryIdentifier;this.log_("Listen on "+s+" for "+i);const r={p:s};t.tag&&(r.q=e._queryObject,r.t=t.tag),r.h=t.hashFn(),this.sendRequest("q",r,(r=>{const n=r.d,a=r.s;Gi.warnOnListenWarnings_(n,e),(this.listens.get(s)&&this.listens.get(s).get(i))===t&&(this.log_("listen response",r),"ok"!==a&&this.removeListen_(s,i),t.onComplete&&t.onComplete(a,n))}))}static warnOnListenWarnings_(t,e){if(t&&"object"==typeof t&&L(t,"w")){const s=k(t,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',s=e._path.toString();Us(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${t} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(t){const e=_(t).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=function(t){const e=_(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")}(t)?"auth":"gauth",s={cred:t};null===this.authOverride_?s.noauth=!0:"object"==typeof this.authOverride_&&(s.authvar=this.authOverride_),this.sendRequest(e,s,(e=>{const s=e.s,i=e.d||"error";this.authToken_===t&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,i))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(t=>{const e=t.s,s=t.d||"error";"ok"===e?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,s)}))}unlisten(t,e){const s=t._path.toString(),i=t._queryIdentifier;this.log_("Unlisten called for "+s+" "+i),h(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,i)&&this.connected_&&this.sendUnlisten_(s,i,t._queryObject,e)}sendUnlisten_(t,e,s,i){this.log_("Unlisten on "+t+" for "+e);const r={p:t};i&&(r.q=s,r.t=i),this.sendRequest("n",r)}onDisconnectPut(t,e,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:s})}onDisconnectMerge(t,e,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,s):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:s})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,s,i){const r={p:e,d:s};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,(t=>{i&&setTimeout((()=>{i(t.s,t.d)}),Math.floor(0))}))}put(t,e,s,i){this.putInternal("p",t,e,s,i)}merge(t,e,s,i){this.putInternal("m",t,e,s,i)}putInternal(t,e,s,i,r){this.initConnection_();const n={p:e,d:s};void 0!==r&&(n.h=r),this.outstandingPuts_.push({action:t,request:n,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,s=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,s,(s=>{this.log_(e+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)}))}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,(t=>{if("ok"!==t.s){const e=t.d;this.log_("reportStats","Error sending stats: "+e)}}))}}onDataMessage_(t){if("r"in t){this.log_("from server: "+E(t));const e=t.r,s=this.requestCBHash_[e];s&&(delete this.requestCBHash_[e],s(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Fs("Unrecognized action received from server: "+E(t)+"\nAre you using the latest client?")}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){h(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Vi,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Vi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Vi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Gi.nextConnectionId_++,r=this.lastSessionId;let n=!1,a=null;const o=function(){a?a.close():(n=!0,s())},c=function(t){h(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(t)};this.realtime_={close:o,sendRequest:c};const l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,h]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);n?Ws("getToken() completed but was canceled"):(Ws("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=h&&h.token,a=new vi(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,s,(t=>{Us(t+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),r))}catch(t){this.log_("Failed to get token: "+t),n||(this.repoInfo_.nodeAdmin&&Us(t),o())}}}interrupt(t){Ws("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ws("Resuming connection for reason: "+t),delete this.interruptReasons_[t],M(this.interruptReasons_)&&(this.reconnectDelay_=Vi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let s;s=e?e.map((t=>Qs(t))).join("$"):"default";const i=this.removeListen_(t,s);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(t,e){const s=new _i(t).toString();let i;if(this.listens.has(s)){const t=this.listens.get(s);i=t.get(e),t.delete(e),0===t.size&&this.listens.delete(s)}else i=void 0;return i}onAuthRevoked_(t,e){Ws("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){Ws("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";t["sdk."+e+"."+Ps.replace(/\./g,"-")]=1,w()?t["framework.cordova"]=1:"object"==typeof navigator&&"ReactNative"===navigator.product&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Ei.getInstance().currentlyOnline();return M(this.interruptReasons_)&&t}}Gi.nextPersistentConnectionId_=0,Gi.nextConnectionId_=0;class Hi{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Hi(t,e)}}class Xi{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const s=new Hi(Bs,t),i=new Hi(Bs,e);return 0!==this.compare(s,i)}minPost(){return Hi.MIN}}let Qi;class qi extends Xi{static get __EMPTY_NODE(){return Qi}static set __EMPTY_NODE(t){Qi=t}compare(t,e){return Gs(t.name,e.name)}isDefinedOn(t){throw c("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Hi.MIN}maxPost(){return new Hi(Vs,Qi)}makePost(t,e){return h("string"==typeof t,"KeyIndex indexValue must always be a string."),new Hi(t,Qi)}toString(){return".key"}}const $i=new qi;class Ki{constructor(t,e,s,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let n=1;for(;!t.isEmpty();)if(n=e?s(t.key,e):1,i&&(n*=-1),n<0)t=this.isReverse_?t.left:t.right;else{if(0===n){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class tr{constructor(t,e,s,i,r){this.key=t,this.value=e,this.color=null!=s?s:tr.RED,this.left=null!=i?i:er.EMPTY_NODE,this.right=null!=r?r:er.EMPTY_NODE}copy(t,e,s,i,r){return new tr(null!=t?t:this.key,null!=e?e:this.value,null!=s?s:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,s){let i=this;const r=s(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,s),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,s)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return er.EMPTY_NODE;let t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let s,i;if(s=this,e(t,s.key)<0)s.left.isEmpty()||s.left.isRed_()||s.left.left.isRed_()||(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),s.right.isEmpty()||s.right.isRed_()||s.right.left.isRed_()||(s=s.moveRedRight_()),0===e(t,s.key)){if(s.right.isEmpty())return er.EMPTY_NODE;i=s.right.min_(),s=s.copy(i.key,i.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,tr.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,tr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}tr.RED=!0,tr.BLACK=!1;class er{constructor(t,e=er.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new er(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,tr.BLACK,null,null))}remove(t){return new er(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,tr.BLACK,null,null))}get(t){let e,s=this.root_;for(;!s.isEmpty();){if(e=this.comparator_(t,s.key),0===e)return s.value;e<0?s=s.left:e>0&&(s=s.right)}return null}getPredecessorKey(t){let e,s=this.root_,i=null;for(;!s.isEmpty();){if(e=this.comparator_(t,s.key),0===e){if(s.left.isEmpty())return i?i.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}e<0?s=s.left:e>0&&(i=s,s=s.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Ki(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Ki(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Ki(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Ki(this.root_,null,this.comparator_,!0,t)}}function sr(t,e){return Gs(t.name,e.name)}function ir(t,e){return Gs(t,e)}let rr;er.EMPTY_NODE=new class{copy(t,e,s,i,r){return this}insert(t,e,s){return new tr(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const nr=function(t){return"number"==typeof t?"number:"+Ks(t):"string:"+t},ar=function(t){if(t.isLeafNode()){const e=t.val();h("string"==typeof e||"number"==typeof e||"object"==typeof e&&L(e,".sv"),"Priority must be a string or number.")}else h(t===rr||t.isEmpty(),"priority of unexpected type.");h(t===rr||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let or,hr,cr;class lr{constructor(t,e=lr.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,h(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ar(this.priorityNode_)}static set __childrenNodeConstructor(t){or=t}static get __childrenNodeConstructor(){return or}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new lr(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:lr.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Yi(t)?this:".priority"===ki(t)?this.priorityNode_:lr.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:lr.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){const s=ki(t);return null===s?e:e.isEmpty()&&".priority"!==s?this:(h(".priority"!==s||1===Mi(t),".priority must be the last token in a path"),this.updateImmediateChild(s,lr.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ai(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+nr(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",t+="number"===e?Ks(this.value_):this.value_,this.lazyHash_=Zs(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===lr.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof lr.__childrenNodeConstructor?-1:(h(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const e=typeof t.value_,s=typeof this.value_,i=lr.VALUE_TYPE_ORDER.indexOf(e),r=lr.VALUE_TYPE_ORDER.indexOf(s);return h(i>=0,"Unknown leaf type: "+e),h(r>=0,"Unknown leaf type: "+s),i===r?"object"===s?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1}}lr.VALUE_TYPE_ORDER=["object","boolean","number","string"];const pr=new class extends Xi{compare(t,e){const s=t.node.getPriority(),i=e.node.getPriority(),r=s.compareTo(i);return 0===r?Gs(t.name,e.name):r}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Hi.MIN}maxPost(){return new Hi(Vs,new lr("[PRIORITY-POST]",cr))}makePost(t,e){const s=hr(t);return new Hi(e,new lr("[PRIORITY-POST]",s))}toString(){return".priority"}},ur=Math.log(2);class dr{constructor(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/ur,10)),this.current_=this.count-1;const s=(i=this.count,parseInt(Array(i+1).join("1"),2));var i;this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const mr=function(t,e,s,i){t.sort(e);const r=function(e,i){const n=i-e;let a,o;if(0===n)return null;if(1===n)return a=t[e],o=s?s(a):a,new tr(o,a.node,tr.BLACK,null,null);{const h=parseInt(n/2,10)+e,c=r(e,h),l=r(h+1,i);return a=t[h],o=s?s(a):a,new tr(o,a.node,tr.BLACK,c,l)}},n=function(e){let i=null,n=null,a=t.length;const o=function(e,i){const n=a-e,o=a;a-=e;const c=r(n+1,o),l=t[n],p=s?s(l):l;h(new tr(p,l.node,i,null,c))},h=function(t){i?(i.left=t,i=t):(n=t,i=t)};for(let t=0;t<e.count;++t){const s=e.nextBitIsOne(),i=Math.pow(2,e.count-(t+1));s?o(i,tr.BLACK):(o(i,tr.BLACK),o(i,tr.RED))}return n}(new dr(t.length));return new er(i||e,n)};let fr;const yr={};class Ir{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return h(yr&&pr,"ChildrenNode.ts has not been loaded"),fr=fr||new Ir({".priority":yr},{".priority":pr}),fr}get(t){const e=k(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof er?e:null}hasIndex(t){return L(this.indexSet_,t.toString())}addIndex(t,e){h(t!==$i,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let i=!1;const r=e.getIterator(Hi.Wrap);let n,a=r.getNext();for(;a;)i=i||t.isDefinedOn(a.node),s.push(a),a=r.getNext();n=i?mr(s,t.getCompare()):yr;const o=t.toString(),c=Object.assign({},this.indexSet_);c[o]=t;const l=Object.assign({},this.indexes_);return l[o]=n,new Ir(l,c)}addToIndexes(t,e){const s=A(this.indexes_,((s,i)=>{const r=k(this.indexSet_,i);if(h(r,"Missing index implementation for "+i),s===yr){if(r.isDefinedOn(t.node)){const s=[],i=e.getIterator(Hi.Wrap);let n=i.getNext();for(;n;)n.name!==t.name&&s.push(n),n=i.getNext();return s.push(t),mr(s,r.getCompare())}return yr}{const i=e.get(t.name);let r=s;return i&&(r=r.remove(new Hi(t.name,i))),r.insert(t,t.node)}}));return new Ir(s,this.indexSet_)}removeFromIndexes(t,e){const s=A(this.indexes_,(s=>{if(s===yr)return s;{const i=e.get(t.name);return i?s.remove(new Hi(t.name,i)):s}}));return new Ir(s,this.indexSet_)}}let gr;class br{constructor(t,e,s){this.children_=t,this.priorityNode_=e,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&ar(this.priorityNode_),this.children_.isEmpty()&&h(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return gr||(gr=new br(new er(ir),null,Ir.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||gr}updatePriority(t){return this.children_.isEmpty()?this:new br(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const e=this.children_.get(t);return null===e?gr:e}}getChild(t){const e=ki(t);return null===e?this:this.getImmediateChild(e).getChild(Ai(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,e){if(h(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);{const s=new Hi(t,e);let i,r;e.isEmpty()?(i=this.children_.remove(t),r=this.indexMap_.removeFromIndexes(s,this.children_)):(i=this.children_.insert(t,e),r=this.indexMap_.addToIndexes(s,this.children_));const n=i.isEmpty()?gr:this.priorityNode_;return new br(i,n,r)}}updateChild(t,e){const s=ki(t);if(null===s)return e;{h(".priority"!==ki(t)||1===Mi(t),".priority must be the last token in a path");const i=this.getImmediateChild(s).updateChild(Ai(t),e);return this.updateImmediateChild(s,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let s=0,i=0,r=!0;if(this.forEachChild(pr,((n,a)=>{e[n]=a.val(t),s++,r&&br.INTEGER_REGEXP_.test(n)?i=Math.max(i,Number(n)):r=!1})),!t&&r&&i<2*s){const t=[];for(const s in e)t[s]=e[s];return t}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+nr(this.getPriority().val())+":"),this.forEachChild(pr,((e,s)=>{const i=s.hash();""!==i&&(t+=":"+e+":"+i)})),this.lazyHash_=""===t?"":Zs(t)}return this.lazyHash_}getPredecessorChildName(t,e,s){const i=this.resolveIndex_(s);if(i){const s=i.getPredecessorKey(new Hi(t,e));return s?s.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.minKey();return t&&t.name}return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new Hi(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.maxKey();return t&&t.name}return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new Hi(e,this.children_.get(e)):null}forEachChild(t,e){const s=this.resolveIndex_(t);return s?s.inorderTraversal((t=>e(t.name,t.node))):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const s=this.resolveIndex_(e);if(s)return s.getIteratorFrom(t,(t=>t));{const s=this.children_.getIteratorFrom(t.name,Hi.Wrap);let i=s.peek();for(;null!=i&&e.compare(i,t)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const s=this.resolveIndex_(e);if(s)return s.getReverseIteratorFrom(t,(t=>t));{const s=this.children_.getReverseIteratorFrom(t.name,Hi.Wrap);let i=s.peek();for(;null!=i&&e.compare(i,t)>0;)s.getNext(),i=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===xr?-1:0}withIndex(t){if(t===$i||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new br(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===$i||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){const t=this.getIterator(pr),s=e.getIterator(pr);let i=t.getNext(),r=s.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=t.getNext(),r=s.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(t){return t===$i?null:this.indexMap_.get(t.toString())}}br.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const xr=new class extends br{constructor(){super(new er(ir),br.EMPTY_NODE,Ir.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return br.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Hi,{MIN:{value:new Hi(Bs,br.EMPTY_NODE)},MAX:{value:new Hi(Vs,xr)}}),qi.__EMPTY_NODE=br.EMPTY_NODE,lr.__childrenNodeConstructor=br,rr=xr,cr=xr;const wr=!0;function Tr(t,e=null){if(null===t)return br.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),h(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new lr(t,Tr(e));if(t instanceof Array||!wr){let s=br.EMPTY_NODE;return $s(t,((e,i)=>{if(L(t,e)&&"."!==e.substring(0,1)){const t=Tr(i);!t.isLeafNode()&&t.isEmpty()||(s=s.updateImmediateChild(e,t))}})),s.updatePriority(Tr(e))}{const s=[];let i=!1;if($s(t,((t,e)=>{if("."!==t.substring(0,1)){const r=Tr(e);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),s.push(new Hi(t,r)))}})),0===s.length)return br.EMPTY_NODE;const r=mr(s,sr,(t=>t.name),ir);if(i){const t=mr(s,pr.getCompare());return new br(r,Tr(e),new Ir({".priority":t},{".priority":pr}))}return new br(r,Tr(e),Ir.Default)}}!function(t){hr=t}(Tr);class Nr extends Xi{constructor(t){super(),this.indexPath_=t,h(!Yi(t)&&".priority"!==ki(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const s=this.extractChild(t.node),i=this.extractChild(e.node),r=s.compareTo(i);return 0===r?Gs(t.name,e.name):r}makePost(t,e){const s=Tr(t),i=br.EMPTY_NODE.updateChild(this.indexPath_,s);return new Hi(e,i)}maxPost(){const t=br.EMPTY_NODE.updateChild(this.indexPath_,xr);return new Hi(Vs,t)}toString(){return Zi(this.indexPath_,0).join("/")}}const Cr=new class extends Xi{compare(t,e){const s=t.node.compareTo(e.node);return 0===s?Gs(t.name,e.name):s}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Hi.MIN}maxPost(){return Hi.MAX}makePost(t,e){const s=Tr(t);return new Hi(e,s)}toString(){return".value"}};function vr(t){return{type:"value",snapshotNode:t}}function Sr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Pr(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Er(t,e,s){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:s}}class _r{constructor(t){this.index_=t}updateChild(t,e,s,i,r,n){h(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=t.getImmediateChild(e);return a.getChild(i).equals(s.getChild(i))&&a.isEmpty()===s.isEmpty()?t:(null!=n&&(s.isEmpty()?t.hasChild(e)?n.trackChildChange(Pr(e,a)):h(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?n.trackChildChange(Sr(e,s)):n.trackChildChange(Er(e,s,a))),t.isLeafNode()&&s.isEmpty()?t:t.updateImmediateChild(e,s).withIndex(this.index_))}updateFullNode(t,e,s){return null!=s&&(t.isLeafNode()||t.forEachChild(pr,((t,i)=>{e.hasChild(t)||s.trackChildChange(Pr(t,i))})),e.isLeafNode()||e.forEachChild(pr,((e,i)=>{if(t.hasChild(e)){const r=t.getImmediateChild(e);r.equals(i)||s.trackChildChange(Er(e,i,r))}else s.trackChildChange(Sr(e,i))}))),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?br.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Lr{constructor(t){this.indexedFilter_=new _r(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Lr.getStartPost_(t),this.endPost_=Lr.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,s=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&s}updateChild(t,e,s,i,r,n){return this.matches(new Hi(e,s))||(s=br.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,s,i,r,n)}updateFullNode(t,e,s){e.isLeafNode()&&(e=br.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(br.EMPTY_NODE);const r=this;return e.forEachChild(pr,((t,e)=>{r.matches(new Hi(t,e))||(i=i.updateImmediateChild(t,br.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,i,s)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class kr{constructor(t){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const e=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?e<=0:e<0},this.withinEndPost=t=>{const e=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?e<=0:e<0},this.rangedFilter_=new Lr(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,s,i,r,n){return this.rangedFilter_.matches(new Hi(e,s))||(s=br.EMPTY_NODE),t.getImmediateChild(e).equals(s)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,s,i,r,n):this.fullLimitUpdateChild_(t,e,s,r,n)}updateFullNode(t,e,s){let i;if(e.isLeafNode()||e.isEmpty())i=br.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let t;i=br.EMPTY_NODE.withIndex(this.index_),t=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;t.hasNext()&&s<this.limit_;){const e=t.getNext();if(this.withinDirectionalStart(e)){if(!this.withinDirectionalEnd(e))break;i=i.updateImmediateChild(e.name,e.node),s++}}}else{let t;i=e.withIndex(this.index_),i=i.updatePriority(br.EMPTY_NODE),t=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let s=0;for(;t.hasNext();){const e=t.getNext();s<this.limit_&&this.withinDirectionalStart(e)&&this.withinDirectionalEnd(e)?s++:i=i.updateImmediateChild(e.name,br.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,s)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,s,i,r){let n;if(this.reverse_){const t=this.index_.getCompare();n=(e,s)=>t(s,e)}else n=this.index_.getCompare();const a=t;h(a.numChildren()===this.limit_,"");const o=new Hi(e,s),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(o);if(a.hasChild(e)){const t=a.getImmediateChild(e);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=h&&(h.name===e||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const p=null==h?1:n(h,o);if(l&&!s.isEmpty()&&p>=0)return null!=r&&r.trackChildChange(Er(e,s,t)),a.updateImmediateChild(e,s);{null!=r&&r.trackChildChange(Pr(e,t));const s=a.updateImmediateChild(e,br.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=r&&r.trackChildChange(Sr(h.name,h.node)),s.updateImmediateChild(h.name,h.node)):s}}return s.isEmpty()?t:l&&n(c,o)>=0?(null!=r&&(r.trackChildChange(Pr(c.name,c.node)),r.trackChildChange(Sr(e,s))),a.updateImmediateChild(e,s).updateImmediateChild(c.name,br.EMPTY_NODE)):t}}class Mr{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=pr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return h(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return h(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Bs}hasEnd(){return this.endSet_}getIndexEndValue(){return h(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return h(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return h(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===pr}copy(){const t=new Mr;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function Ar(t){const e={};if(t.isDefault())return e;let s;if(t.index_===pr?s="$priority":t.index_===Cr?s="$value":t.index_===$i?s="$key":(h(t.index_ instanceof Nr,"Unrecognized index type!"),s=t.index_.toString()),e.orderBy=E(s),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=E(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+E(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=E(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+E(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Or(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let s=t.viewFrom_;""===s&&(s=t.isViewFromLeft()?"l":"r"),e.vf=s}return t.index_!==pr&&(e.i=t.index_.toString()),e}class Zr extends Si{constructor(t,e,s,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=s,this.appCheckTokenProvider_=i,this.log_=Rs("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:(h(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,s,i){const r=t._path.toString();this.log_("Listen called for "+r+" "+t._queryIdentifier);const n=Zr.getListenId_(t,s),a={};this.listens_[n]=a;const o=Ar(t._queryParams);this.restRequest_(r+".json",o,((t,e)=>{let o=e;if(404===t&&(o=null,t=null),null===t&&this.onDataUpdate_(r,o,!1,s),k(this.listens_,n)===a){let e;e=t?401===t?"permission_denied":"rest_error:"+t:"ok",i(e,null)}}))}unlisten(t,e){const s=Zr.getListenId_(t,e);delete this.listens_[s]}get(t){const e=Ar(t._queryParams),s=t._path.toString(),i=new x;return this.restRequest_(s+".json",e,((t,e)=>{let r=e;404===t&&(r=null,t=null),null===t?(this.onDataUpdate_(s,r,!1,null),i.resolve(r)):i.reject(new Error(r))})),i.promise}refreshAuthToken(t){}restRequest_(t,e={},s){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([i,r])=>{i&&i.accessToken&&(e.auth=i.accessToken),r&&r.token&&(e.ac=r.token);const n=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+function(t){const e=[];for(const[s,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(s)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}(e);this.log_("Sending REST request for "+n);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&4===a.readyState){this.log_("REST Response for "+n+" received. status:",a.status,"response:",a.responseText);let t=null;if(a.status>=200&&a.status<300){try{t=P(a.responseText)}catch(t){Us("Failed to parse JSON response for "+n+": "+a.responseText)}s(null,t)}else 401!==a.status&&404!==a.status&&Us("Got unsuccessful REST response for "+n+" Status: "+a.status),s(a.status);s=null}},a.open("GET",n,!0),a.send()}))}}class jr{constructor(){this.rootNode_=br.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function Dr(){return{value:null,children:new Map}}function Yr(t,e,s){if(Yi(e))t.value=s,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,s);else{const i=ki(e);t.children.has(i)||t.children.set(i,Dr()),Yr(t.children.get(i),e=Ai(e),s)}}function Wr(t,e,s){null!==t.value?s(e,t.value):function(t,e){t.children.forEach(((t,s)=>{e(s,t)}))}(t,((t,i)=>{Wr(i,new _i(e.toString()+"/"+t),s)}))}class Rr{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&$s(this.last_,((t,s)=>{e[t]=e[t]-s})),this.last_=t,e}}class Fr{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Rr(t);const s=1e4+2e4*Math.random();ii(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const t=this.statsListener_.get(),e={};let s=!1;$s(t,((t,i)=>{i>0&&L(this.statsToReport_,t)&&(e[t]=i,s=!0)})),s&&this.server_.reportStats(e),ii(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Jr;function Ur(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Jr||(Jr={}));class zr{constructor(t,e,s){this.path=t,this.affectedTree=e,this.revert=s,this.type=Jr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(Yi(this.path)){if(null!=this.affectedTree.value)return h(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new _i(t));return new zr(Li(),e,this.revert)}}return h(ki(this.path)===t,"operationForChild called for unrelated child."),new zr(Ai(this.path),this.affectedTree,this.revert)}}class Br{constructor(t,e){this.source=t,this.path=e,this.type=Jr.LISTEN_COMPLETE}operationForChild(t){return Yi(this.path)?new Br(this.source,Li()):new Br(this.source,Ai(this.path))}}class Vr{constructor(t,e,s){this.source=t,this.path=e,this.snap=s,this.type=Jr.OVERWRITE}operationForChild(t){return Yi(this.path)?new Vr(this.source,Li(),this.snap.getImmediateChild(t)):new Vr(this.source,Ai(this.path),this.snap)}}class Gr{constructor(t,e,s){this.source=t,this.path=e,this.children=s,this.type=Jr.MERGE}operationForChild(t){if(Yi(this.path)){const e=this.children.subtree(new _i(t));return e.isEmpty()?null:e.value?new Vr(this.source,Li(),e.value):new Gr(this.source,Li(),e)}return h(ki(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Gr(this.source,Ai(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Hr{constructor(t,e,s){this.node_=t,this.fullyInitialized_=e,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Yi(t))return this.isFullyInitialized()&&!this.filtered_;const e=ki(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class Xr{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Qr(t,e,s,i,r,n){const a=i.filter((t=>t.type===s));a.sort(((e,s)=>function(t,e,s){if(null==e.childName||null==s.childName)throw c("Should only compare child_ events.");const i=new Hi(e.childName,e.snapshotNode),r=new Hi(s.childName,s.snapshotNode);return t.index_.compare(i,r)}(t,e,s))),a.forEach((s=>{const i=function(t,e,s){return"value"===e.type||"child_removed"===e.type||(e.prevName=s.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,s,n);r.forEach((r=>{r.respondsTo(s.type)&&e.push(r.createEvent(i,t.query_))}))}))}function qr(t,e){return{eventCache:t,serverCache:e}}function $r(t,e,s,i){return qr(new Hr(e,s,i),t.serverCache)}function Kr(t,e,s,i){return qr(t.eventCache,new Hr(e,s,i))}function tn(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function en(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let sn;class rn{constructor(t,e=(()=>(sn||(sn=new er(Hs)),sn))()){this.value=t,this.children=e}static fromObject(t){let e=new rn(null);return $s(t,((t,s)=>{e=e.set(new _i(t),s)})),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:Li(),value:this.value};if(Yi(t))return null;{const s=ki(t),i=this.children.get(s);if(null!==i){const r=i.findRootMostMatchingPathAndValue(Ai(t),e);return null!=r?{path:Di(new _i(s),r.path),value:r.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,(()=>!0))}subtree(t){if(Yi(t))return this;{const e=ki(t),s=this.children.get(e);return null!==s?s.subtree(Ai(t)):new rn(null)}}set(t,e){if(Yi(t))return new rn(e,this.children);{const s=ki(t),i=(this.children.get(s)||new rn(null)).set(Ai(t),e),r=this.children.insert(s,i);return new rn(this.value,r)}}remove(t){if(Yi(t))return this.children.isEmpty()?new rn(null):new rn(null,this.children);{const e=ki(t),s=this.children.get(e);if(s){const i=s.remove(Ai(t));let r;return r=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&r.isEmpty()?new rn(null):new rn(this.value,r)}return this}}get(t){if(Yi(t))return this.value;{const e=ki(t),s=this.children.get(e);return s?s.get(Ai(t)):null}}setTree(t,e){if(Yi(t))return e;{const s=ki(t),i=(this.children.get(s)||new rn(null)).setTree(Ai(t),e);let r;return r=i.isEmpty()?this.children.remove(s):this.children.insert(s,i),new rn(this.value,r)}}fold(t){return this.fold_(Li(),t)}fold_(t,e){const s={};return this.children.inorderTraversal(((i,r)=>{s[i]=r.fold_(Di(t,i),e)})),e(t,this.value,s)}findOnPath(t,e){return this.findOnPath_(t,Li(),e)}findOnPath_(t,e,s){const i=!!this.value&&s(e,this.value);if(i)return i;if(Yi(t))return null;{const i=ki(t),r=this.children.get(i);return r?r.findOnPath_(Ai(t),Di(e,i),s):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,Li(),e)}foreachOnPath_(t,e,s){if(Yi(t))return this;{this.value&&s(e,this.value);const i=ki(t),r=this.children.get(i);return r?r.foreachOnPath_(Ai(t),Di(e,i),s):new rn(null)}}foreach(t){this.foreach_(Li(),t)}foreach_(t,e){this.children.inorderTraversal(((s,i)=>{i.foreach_(Di(t,s),e)})),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal(((e,s)=>{s.value&&t(e,s.value)}))}}class nn{constructor(t){this.writeTree_=t}static empty(){return new nn(new rn(null))}}function an(t,e,s){if(Yi(e))return new nn(new rn(s));{const i=t.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let n=i.value;const a=Wi(r,e);return n=n.updateChild(a,s),new nn(t.writeTree_.set(r,n))}{const i=new rn(s),r=t.writeTree_.setTree(e,i);return new nn(r)}}}function on(t,e,s){let i=t;return $s(s,((t,s)=>{i=an(i,Di(e,t),s)})),i}function hn(t,e){if(Yi(e))return nn.empty();{const s=t.writeTree_.setTree(e,new rn(null));return new nn(s)}}function cn(t,e){return null!=ln(t,e)}function ln(t,e){const s=t.writeTree_.findRootMostValueAndPath(e);return null!=s?t.writeTree_.get(s.path).getChild(Wi(s.path,e)):null}function pn(t){const e=[],s=t.writeTree_.value;return null!=s?s.isLeafNode()||s.forEachChild(pr,((t,s)=>{e.push(new Hi(t,s))})):t.writeTree_.children.inorderTraversal(((t,s)=>{null!=s.value&&e.push(new Hi(t,s.value))})),e}function un(t,e){if(Yi(e))return t;{const s=ln(t,e);return new nn(null!=s?new rn(s):t.writeTree_.subtree(e))}}function dn(t){return t.writeTree_.isEmpty()}function mn(t,e){return fn(Li(),t.writeTree_,e)}function fn(t,e,s){if(null!=e.value)return s.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal(((e,r)=>{".priority"===e?(h(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):s=fn(Di(t,e),r,s)})),s.getChild(t).isEmpty()||null===i||(s=s.updateChild(Di(t,".priority"),i)),s}}function yn(t,e){return Pn(e,t)}function In(t,e){if(t.snap)return Fi(t.path,e);for(const s in t.children)if(t.children.hasOwnProperty(s)&&Fi(Di(t.path,s),e))return!0;return!1}function gn(t){return t.visible}function bn(t,e,s){let i=nn.empty();for(let r=0;r<t.length;++r){const n=t[r];if(e(n)){const t=n.path;let e;if(n.snap)Fi(s,t)?(e=Wi(s,t),i=an(i,e,n.snap)):Fi(t,s)&&(e=Wi(t,s),i=an(i,Li(),n.snap.getChild(e)));else{if(!n.children)throw c("WriteRecord should have .snap or .children");if(Fi(s,t))e=Wi(s,t),i=on(i,e,n.children);else if(Fi(t,s))if(e=Wi(t,s),Yi(e))i=on(i,Li(),n.children);else{const t=k(n.children,ki(e));if(t){const s=t.getChild(Ai(e));i=an(i,Li(),s)}}}}}return i}function xn(t,e,s,i,r){if(i||r){const n=un(t.visibleWrites,e);if(!r&&dn(n))return s;if(r||null!=s||cn(n,Li())){const n=function(t){return(t.visible||r)&&(!i||!~i.indexOf(t.writeId))&&(Fi(t.path,e)||Fi(e,t.path))};return mn(bn(t.allWrites,n,e),s||br.EMPTY_NODE)}return null}{const i=ln(t.visibleWrites,e);if(null!=i)return i;{const i=un(t.visibleWrites,e);return dn(i)?s:null!=s||cn(i,Li())?mn(i,s||br.EMPTY_NODE):null}}}function wn(t,e,s,i){return xn(t.writeTree,t.treePath,e,s,i)}function Tn(t,e){return function(t,e,s){let i=br.EMPTY_NODE;const r=ln(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(pr,((t,e)=>{i=i.updateImmediateChild(t,e)})),i;if(s){const r=un(t.visibleWrites,e);return s.forEachChild(pr,((t,e)=>{const s=mn(un(r,new _i(t)),e);i=i.updateImmediateChild(t,s)})),pn(r).forEach((t=>{i=i.updateImmediateChild(t.name,t.node)})),i}return pn(un(t.visibleWrites,e)).forEach((t=>{i=i.updateImmediateChild(t.name,t.node)})),i}(t.writeTree,t.treePath,e)}function Nn(t,e,s,i){return function(t,e,s,i,r){h(i||r,"Either existingEventSnap or existingServerSnap must exist");const n=Di(e,s);if(cn(t.visibleWrites,n))return null;{const e=un(t.visibleWrites,n);return dn(e)?r.getChild(s):mn(e,r.getChild(s))}}(t.writeTree,t.treePath,e,s,i)}function Cn(t,e){return function(t,e){return ln(t.visibleWrites,e)}(t.writeTree,Di(t.treePath,e))}function vn(t,e,s){return function(t,e,s,i){const r=Di(e,s),n=ln(t.visibleWrites,r);return null!=n?n:i.isCompleteForChild(s)?mn(un(t.visibleWrites,r),i.getNode().getImmediateChild(s)):null}(t.writeTree,t.treePath,e,s)}function Sn(t,e){return Pn(Di(t.treePath,e),t.writeTree)}function Pn(t,e){return{treePath:t,writeTree:e}}class En{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,s=t.childName;h("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),h(".priority"!==s,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(s);if(i){const r=i.type;if("child_added"===e&&"child_removed"===r)this.changeMap.set(s,Er(s,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===r)this.changeMap.delete(s);else if("child_removed"===e&&"child_changed"===r)this.changeMap.set(s,Pr(s,i.oldSnap));else if("child_changed"===e&&"child_added"===r)this.changeMap.set(s,Sr(s,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==r)throw c("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(s,Er(s,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(s,t)}getChanges(){return Array.from(this.changeMap.values())}}const _n=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,s){return null}};class Ln{constructor(t,e,s=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=s}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const e=null!=this.optCompleteServerCache_?new Hr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vn(this.writes_,t,e)}}getChildAfterChild(t,e,s){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:en(this.viewCache_),r=function(t,e,s,i,r,n){return function(t,e,s,i,r,n,a){let o;const h=un(t.visibleWrites,e),c=ln(h,Li());if(null!=c)o=c;else{if(null==s)return[];o=mn(h,s)}if(o=o.withIndex(a),o.isEmpty()||o.isLeafNode())return[];{const t=[],e=a.getCompare(),s=n?o.getReverseIteratorFrom(i,a):o.getIteratorFrom(i,a);let h=s.getNext();for(;h&&t.length<r;)0!==e(h,i)&&t.push(h),h=s.getNext();return t}}(t.writeTree,t.treePath,e,s,i,r,n)}(this.writes_,i,e,1,s,t);return 0===r.length?null:r[0]}}function kn(t,e,s,i,r,n){const a=e.eventCache;if(null!=Cn(i,s))return e;{let o,c;if(Yi(s))if(h(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const s=en(e),r=Tn(i,s instanceof br?s:br.EMPTY_NODE);o=t.filter.updateFullNode(e.eventCache.getNode(),r,n)}else{const s=wn(i,en(e));o=t.filter.updateFullNode(e.eventCache.getNode(),s,n)}else{const l=ki(s);if(".priority"===l){h(1===Mi(s),"Can't have a priority with additional path components");const r=a.getNode();c=e.serverCache.getNode();const n=Nn(i,s,r,c);o=null!=n?t.filter.updatePriority(r,n):a.getNode()}else{const h=Ai(s);let p;if(a.isCompleteForChild(l)){c=e.serverCache.getNode();const t=Nn(i,s,a.getNode(),c);p=null!=t?a.getNode().getImmediateChild(l).updateChild(h,t):a.getNode().getImmediateChild(l)}else p=vn(i,l,e.serverCache);o=null!=p?t.filter.updateChild(a.getNode(),l,p,h,r,n):a.getNode()}}return $r(e,o,a.isFullyInitialized()||Yi(s),t.filter.filtersNodes())}}function Mn(t,e,s,i,r,n,a,o){const h=e.serverCache;let c;const l=a?t.filter:t.filter.getIndexedFilter();if(Yi(s))c=l.updateFullNode(h.getNode(),i,null);else if(l.filtersNodes()&&!h.isFiltered()){const t=h.getNode().updateChild(s,i);c=l.updateFullNode(h.getNode(),t,null)}else{const t=ki(s);if(!h.isCompleteForPath(s)&&Mi(s)>1)return e;const r=Ai(s),n=h.getNode().getImmediateChild(t).updateChild(r,i);c=".priority"===t?l.updatePriority(h.getNode(),n):l.updateChild(h.getNode(),t,n,r,_n,null)}const p=Kr(e,c,h.isFullyInitialized()||Yi(s),l.filtersNodes());return kn(t,p,s,r,new Ln(r,p,n),o)}function An(t,e,s,i,r,n,a){const o=e.eventCache;let h,c;const l=new Ln(r,e,n);if(Yi(s))c=t.filter.updateFullNode(e.eventCache.getNode(),i,a),h=$r(e,c,!0,t.filter.filtersNodes());else{const r=ki(s);if(".priority"===r)c=t.filter.updatePriority(e.eventCache.getNode(),i),h=$r(e,c,o.isFullyInitialized(),o.isFiltered());else{const n=Ai(s),c=o.getNode().getImmediateChild(r);let p;if(Yi(n))p=i;else{const t=l.getCompleteChild(r);p=null!=t?".priority"===Oi(n)&&t.getChild(ji(n)).isEmpty()?t:t.updateChild(n,i):br.EMPTY_NODE}h=c.equals(p)?e:$r(e,t.filter.updateChild(o.getNode(),r,p,n,l,a),o.isFullyInitialized(),t.filter.filtersNodes())}}return h}function On(t,e){return t.eventCache.isCompleteForChild(e)}function Zn(t,e,s){return s.foreach(((t,s)=>{e=e.updateChild(t,s)})),e}function jn(t,e,s,i,r,n,a,o){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let h,c=e;h=Yi(s)?i:new rn(null).setTree(s,i);const l=e.serverCache.getNode();return h.children.inorderTraversal(((s,i)=>{if(l.hasChild(s)){const h=Zn(0,e.serverCache.getNode().getImmediateChild(s),i);c=Mn(t,c,new _i(s),h,r,n,a,o)}})),h.children.inorderTraversal(((s,i)=>{const h=!e.serverCache.isCompleteForChild(s)&&null===i.value;if(!l.hasChild(s)&&!h){const h=Zn(0,e.serverCache.getNode().getImmediateChild(s),i);c=Mn(t,c,new _i(s),h,r,n,a,o)}})),c}class Dn{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const s=this.query_._queryParams,i=new _r(s.getIndex()),r=(n=s).loadsAllData()?new _r(n.getIndex()):n.hasLimit()?new kr(n):new Lr(n);var n;this.processor_=function(t){return{filter:t}}(r);const a=e.serverCache,o=e.eventCache,h=i.updateFullNode(br.EMPTY_NODE,a.getNode(),null),c=r.updateFullNode(br.EMPTY_NODE,o.getNode(),null),l=new Hr(h,a.isFullyInitialized(),i.filtersNodes()),p=new Hr(c,o.isFullyInitialized(),r.filtersNodes());this.viewCache_=qr(p,l),this.eventGenerator_=new Xr(this.query_)}get query(){return this.query_}}function Yn(t,e){const s=en(t.viewCache_);return s&&(t.query._queryParams.loadsAllData()||!Yi(e)&&!s.getImmediateChild(ki(e)).isEmpty())?s.getChild(e):null}function Wn(t){return 0===t.eventRegistrations_.length}function Rn(t,e,s){const i=[];if(s){h(null==e,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach((t=>{const e=t.createCancelEvent(s,r);e&&i.push(e)}))}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const r=t.eventRegistrations_[i];if(r.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}else s.push(r)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return i}function Fn(t,e,s,i){e.type===Jr.MERGE&&null!==e.source.queryId&&(h(en(t.viewCache_),"We should always have a full cache before handling merges"),h(tn(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,n=function(t,e,s,i,r){const n=new En;let a,o;if(s.type===Jr.OVERWRITE){const c=s;c.source.fromUser?a=An(t,e,c.path,c.snap,i,r,n):(h(c.source.fromServer,"Unknown source."),o=c.source.tagged||e.serverCache.isFiltered()&&!Yi(c.path),a=Mn(t,e,c.path,c.snap,i,r,o,n))}else if(s.type===Jr.MERGE){const c=s;c.source.fromUser?a=function(t,e,s,i,r,n,a){let o=e;return i.foreach(((i,h)=>{const c=Di(s,i);On(e,ki(c))&&(o=An(t,o,c,h,r,n,a))})),i.foreach(((i,h)=>{const c=Di(s,i);On(e,ki(c))||(o=An(t,o,c,h,r,n,a))})),o}(t,e,c.path,c.children,i,r,n):(h(c.source.fromServer,"Unknown source."),o=c.source.tagged||e.serverCache.isFiltered(),a=jn(t,e,c.path,c.children,i,r,o,n))}else if(s.type===Jr.ACK_USER_WRITE){const o=s;a=o.revert?function(t,e,s,i,r,n){let a;if(null!=Cn(i,s))return e;{const o=new Ln(i,e,r),c=e.eventCache.getNode();let l;if(Yi(s)||".priority"===ki(s)){let s;if(e.serverCache.isFullyInitialized())s=wn(i,en(e));else{const t=e.serverCache.getNode();h(t instanceof br,"serverChildren would be complete if leaf node"),s=Tn(i,t)}l=t.filter.updateFullNode(c,s,n)}else{const r=ki(s);let h=vn(i,r,e.serverCache);null==h&&e.serverCache.isCompleteForChild(r)&&(h=c.getImmediateChild(r)),l=null!=h?t.filter.updateChild(c,r,h,Ai(s),o,n):e.eventCache.getNode().hasChild(r)?t.filter.updateChild(c,r,br.EMPTY_NODE,Ai(s),o,n):c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=wn(i,en(e)),a.isLeafNode()&&(l=t.filter.updateFullNode(l,a,n)))}return a=e.serverCache.isFullyInitialized()||null!=Cn(i,Li()),$r(e,l,a,t.filter.filtersNodes())}}(t,e,o.path,i,r,n):function(t,e,s,i,r,n,a){if(null!=Cn(r,s))return e;const o=e.serverCache.isFiltered(),h=e.serverCache;if(null!=i.value){if(Yi(s)&&h.isFullyInitialized()||h.isCompleteForPath(s))return Mn(t,e,s,h.getNode().getChild(s),r,n,o,a);if(Yi(s)){let i=new rn(null);return h.getNode().forEachChild($i,((t,e)=>{i=i.set(new _i(t),e)})),jn(t,e,s,i,r,n,o,a)}return e}{let c=new rn(null);return i.foreach(((t,e)=>{const i=Di(s,t);h.isCompleteForPath(i)&&(c=c.set(t,h.getNode().getChild(i)))})),jn(t,e,s,c,r,n,o,a)}}(t,e,o.path,o.affectedTree,i,r,n)}else{if(s.type!==Jr.LISTEN_COMPLETE)throw c("Unknown operation type: "+s.type);a=function(t,e,s,i,r){const n=e.serverCache;return kn(t,Kr(e,n.getNode(),n.isFullyInitialized()||Yi(s),n.isFiltered()),s,i,_n,r)}(t,e,s.path,i,n)}const l=n.getChanges();return function(t,e,s){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),n=tn(t);(s.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(n)||!i.getNode().getPriority().equals(n.getPriority()))&&s.push(vr(tn(e)))}}(e,a,l),{viewCache:a,changes:l}}(t.processor_,r,e,s,i);var a,o;return a=t.processor_,o=n.viewCache,h(o.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),h(o.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),h(n.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=n.viewCache,Jn(t,n.changes,n.viewCache.eventCache.getNode(),null)}function Jn(t,e,s,i){const r=i?[i]:t.eventRegistrations_;return function(t,e,s,i){const r=[],n=[];return e.forEach((e=>{var s;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&n.push((s=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:s}))})),Qr(t,r,"child_removed",e,i,s),Qr(t,r,"child_added",e,i,s),Qr(t,r,"child_moved",n,i,s),Qr(t,r,"child_changed",e,i,s),Qr(t,r,"value",e,i,s),r}(t.eventGenerator_,e,s,r)}let Un,zn;class Bn{constructor(){this.views=new Map}}function Vn(t,e,s,i){const r=e.source.queryId;if(null!==r){const n=t.views.get(r);return h(null!=n,"SyncTree gave us an op for an invalid query."),Fn(n,e,s,i)}{let r=[];for(const n of t.views.values())r=r.concat(Fn(n,e,s,i));return r}}function Gn(t,e,s,i,r){const n=e._queryIdentifier,a=t.views.get(n);if(!a){let t=wn(s,r?i:null),n=!1;t?n=!0:i instanceof br?(t=Tn(s,i),n=!1):(t=br.EMPTY_NODE,n=!1);const a=qr(new Hr(t,n,!1),new Hr(i,r,!1));return new Dn(e,a)}return a}function Hn(t){const e=[];for(const s of t.views.values())s.query._queryParams.loadsAllData()||e.push(s);return e}function Xn(t,e){let s=null;for(const i of t.views.values())s=s||Yn(i,e);return s}function Qn(t,e){if(e._queryParams.loadsAllData())return Kn(t);{const s=e._queryIdentifier;return t.views.get(s)}}function qn(t,e){return null!=Qn(t,e)}function $n(t){return null!=Kn(t)}function Kn(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let ta=1;class ea{constructor(t){this.listenProvider_=t,this.syncPointTree_=new rn(null),this.pendingWriteTree_={visibleWrites:nn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sa(t,e,s,i,r){return function(t,e,s,i,r){h(i>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),t.allWrites.push({path:e,snap:s,writeId:i,visible:r}),r&&(t.visibleWrites=an(t.visibleWrites,e,s)),t.lastWriteId=i}(t.pendingWriteTree_,e,s,i,r),r?ca(t,new Vr({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,s)):[]}function ia(t,e,s=!1){const i=function(t,e){for(let s=0;s<t.allWrites.length;s++){const i=t.allWrites[s];if(i.writeId===e)return i}return null}(t.pendingWriteTree_,e);if(function(t,e){const s=t.allWrites.findIndex((t=>t.writeId===e));h(s>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[s];t.allWrites.splice(s,1);let r=i.visible,n=!1,a=t.allWrites.length-1;for(;r&&a>=0;){const e=t.allWrites[a];e.visible&&(a>=s&&In(e,i.path)?r=!1:Fi(i.path,e.path)&&(n=!0)),a--}return!!r&&(n?(function(t){t.visibleWrites=bn(t.allWrites,gn,Li()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0):(i.snap?t.visibleWrites=hn(t.visibleWrites,i.path):$s(i.children,(e=>{t.visibleWrites=hn(t.visibleWrites,Di(i.path,e))})),!0))}(t.pendingWriteTree_,e)){let e=new rn(null);return null!=i.snap?e=e.set(Li(),!0):$s(i.children,(t=>{e=e.set(new _i(t),!0)})),ca(t,new zr(i.path,e,s))}return[]}function ra(t,e,s){return ca(t,new Vr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,s))}function na(t,e,s,i,r=!1){const n=e._path,a=t.syncPointTree_.get(n);let o=[];if(a&&("default"===e._queryIdentifier||qn(a,e))){const c=function(t,e,s,i){const r=e._queryIdentifier,n=[];let a=[];const o=$n(t);if("default"===r)for(const[e,r]of t.views.entries())a=a.concat(Rn(r,s,i)),Wn(r)&&(t.views.delete(e),r.query._queryParams.loadsAllData()||n.push(r.query));else{const e=t.views.get(r);e&&(a=a.concat(Rn(e,s,i)),Wn(e)&&(t.views.delete(r),e.query._queryParams.loadsAllData()||n.push(e.query)))}return o&&!$n(t)&&n.push(new(h(Un,"Reference.ts has not been loaded"),Un)(e._repo,e._path)),{removed:n,events:a}}(a,e,s,i);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(n));const l=c.removed;if(o=c.events,!r){const s=-1!==l.findIndex((t=>t._queryParams.loadsAllData())),r=t.syncPointTree_.findOnPath(n,((t,e)=>$n(e)));if(s&&!r){const e=t.syncPointTree_.subtree(n);if(!e.isEmpty()){const s=function(t){return t.fold(((t,e,s)=>{if(e&&$n(e))return[Kn(e)];{let t=[];return e&&(t=Hn(e)),$s(s,((e,s)=>{t=t.concat(s)})),t}}))}(e);for(let e=0;e<s.length;++e){const i=s[e],r=i.query,n=ua(t,i);t.listenProvider_.startListening(ga(r),da(t,r),n.hashFn,n.onComplete)}}}if(!r&&l.length>0&&!i)if(s){const s=null;t.listenProvider_.stopListening(ga(e),s)}else l.forEach((e=>{const s=t.queryToTagMap.get(ma(e));t.listenProvider_.stopListening(ga(e),s)}))}!function(t,e){for(let s=0;s<e.length;++s){const i=e[s];if(!i._queryParams.loadsAllData()){const e=ma(i),s=t.queryToTagMap.get(e);t.queryToTagMap.delete(e),t.tagToQueryMap.delete(s)}}}(t,l)}return o}function aa(t,e,s,i){const r=fa(t,i);if(null!=r){const i=ya(r),n=i.path,a=i.queryId,o=Wi(n,e);return Ia(t,n,new Vr(Ur(a),o,s))}return[]}function oa(t,e,s,i=!1){const r=e._path;let n=null,a=!1;t.syncPointTree_.foreachOnPath(r,((t,e)=>{const s=Wi(t,r);n=n||Xn(e,s),a=a||$n(e)}));let o,c=t.syncPointTree_.get(r);c?(a=a||$n(c),n=n||Xn(c,Li())):(c=new Bn,t.syncPointTree_=t.syncPointTree_.set(r,c)),null!=n?o=!0:(o=!1,n=br.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(((t,e)=>{const s=Xn(e,Li());s&&(n=n.updateImmediateChild(t,s))})));const l=qn(c,e);if(!l&&!e._queryParams.loadsAllData()){const s=ma(e);h(!t.queryToTagMap.has(s),"View does not exist, but we have a tag");const i=ta++;t.queryToTagMap.set(s,i),t.tagToQueryMap.set(i,s)}let p=function(t,e,s,i,r,n){const a=Gn(t,e,i,r,n);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),function(t,e){t.eventRegistrations_.push(e)}(a,s),function(t,e){const s=t.viewCache_.eventCache,i=[];return s.getNode().isLeafNode()||s.getNode().forEachChild(pr,((t,e)=>{i.push(Sr(t,e))})),s.isFullyInitialized()&&i.push(vr(s.getNode())),Jn(t,i,s.getNode(),e)}(a,s)}(c,e,s,yn(t.pendingWriteTree_,r),n,o);if(!l&&!a&&!i){const s=Qn(c,e);p=p.concat(function(t,e,s){const i=e._path,r=da(t,e),n=ua(t,s),a=t.listenProvider_.startListening(ga(e),r,n.hashFn,n.onComplete),o=t.syncPointTree_.subtree(i);if(r)h(!$n(o.value),"If we're adding a query, it shouldn't be shadowed");else{const e=o.fold(((t,e,s)=>{if(!Yi(t)&&e&&$n(e))return[Kn(e).query];{let t=[];return e&&(t=t.concat(Hn(e).map((t=>t.query)))),$s(s,((e,s)=>{t=t.concat(s)})),t}}));for(let s=0;s<e.length;++s){const i=e[s];t.listenProvider_.stopListening(ga(i),da(t,i))}}return a}(t,e,s))}return p}function ha(t,e,s){const i=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,((t,s)=>{const i=Xn(s,Wi(t,e));if(i)return i}));return xn(i,e,r,s,!0)}function ca(t,e){return la(e,t.syncPointTree_,null,yn(t.pendingWriteTree_,Li()))}function la(t,e,s,i){if(Yi(t.path))return pa(t,e,s,i);{const r=e.get(Li());null==s&&null!=r&&(s=Xn(r,Li()));let n=[];const a=ki(t.path),o=t.operationForChild(a),h=e.children.get(a);if(h&&o){const t=s?s.getImmediateChild(a):null,e=Sn(i,a);n=n.concat(la(o,h,t,e))}return r&&(n=n.concat(Vn(r,t,i,s))),n}}function pa(t,e,s,i){const r=e.get(Li());null==s&&null!=r&&(s=Xn(r,Li()));let n=[];return e.children.inorderTraversal(((e,r)=>{const a=s?s.getImmediateChild(e):null,o=Sn(i,e),h=t.operationForChild(e);h&&(n=n.concat(pa(h,r,a,o)))})),r&&(n=n.concat(Vn(r,t,i,s))),n}function ua(t,e){const s=e.query,i=da(t,s);return{hashFn:()=>{const t=function(t){return t.viewCache_.serverCache.getNode()}(e)||br.EMPTY_NODE;return t.hash()},onComplete:e=>{if("ok"===e)return i?function(t,e,s){const i=fa(t,s);if(i){const s=ya(i),r=s.path,n=s.queryId,a=Wi(r,e);return Ia(t,r,new Br(Ur(n),a))}return[]}(t,s._path,i):function(t,e){return ca(t,new Br({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,s._path);{const i=function(t,e){let s="Unknown Error";"too_big"===t?s="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?s="Client doesn't have permission to access the desired data.":"unavailable"===t&&(s="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+s);return i.code=t.toUpperCase(),i}(e,s);return na(t,s,null,i)}}}}function da(t,e){const s=ma(e);return t.queryToTagMap.get(s)}function ma(t){return t._path.toString()+"$"+t._queryIdentifier}function fa(t,e){return t.tagToQueryMap.get(e)}function ya(t){const e=t.indexOf("$");return h(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new _i(t.substr(0,e))}}function Ia(t,e,s){const i=t.syncPointTree_.get(e);return h(i,"Missing sync point for query tag that we're tracking"),Vn(i,s,yn(t.pendingWriteTree_,e),null)}function ga(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(h(zn,"Reference.ts has not been loaded"),zn)(t._repo,t._path):t}class ba{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new ba(e)}node(){return this.node_}}class xa{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Di(this.path_,t);return new xa(this.syncTree_,e)}node(){return ha(this.syncTree_,this.path_)}}const wa=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},Ta=function(t,e,s){return t&&"object"==typeof t?(h(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Na(t[".sv"],e,s):"object"==typeof t[".sv"]?Ca(t[".sv"],e):void h(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Na=function(t,e,s){if("timestamp"===t)return s.timestamp;h(!1,"Unexpected server value: "+t)},Ca=function(t,e,s){t.hasOwnProperty("increment")||h(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;"number"!=typeof i&&h(!1,"Unexpected increment value: "+i);const r=e.node();if(h(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const n=r.getValue();return"number"!=typeof n?i:n+i},va=function(t,e,s,i){return Pa(e,new xa(s,t),i)},Sa=function(t,e,s){return Pa(t,new ba(e),s)};function Pa(t,e,s){const i=t.getPriority().val(),r=Ta(i,e.getImmediateChild(".priority"),s);let n;if(t.isLeafNode()){const i=t,n=Ta(i.getValue(),e,s);return n!==i.getValue()||r!==i.getPriority().val()?new lr(n,Tr(r)):t}{const i=t;return n=i,r!==i.getPriority().val()&&(n=n.updatePriority(new lr(r))),i.forEachChild(pr,((t,i)=>{const r=Pa(i,e.getImmediateChild(t),s);r!==i&&(n=n.updateImmediateChild(t,r))})),n}}class Ea{constructor(t="",e=null,s={children:{},childCount:0}){this.name=t,this.parent=e,this.node=s}}function _a(t,e){let s=e instanceof _i?e:new _i(e),i=t,r=ki(s);for(;null!==r;){const t=k(i.node.children,r)||{children:{},childCount:0};i=new Ea(r,i,t),s=Ai(s),r=ki(s)}return i}function La(t){return t.node.value}function ka(t,e){t.node.value=e,ja(t)}function Ma(t){return t.node.childCount>0}function Aa(t,e){$s(t.node.children,((s,i)=>{e(new Ea(s,t,i))}))}function Oa(t,e,s,i){s&&!i&&e(t),Aa(t,(t=>{Oa(t,e,!0,i)})),s&&i&&e(t)}function Za(t){return new _i(null===t.parent?t.name:Za(t.parent)+"/"+t.name)}function ja(t){null!==t.parent&&function(t,e,s){const i=function(t){return void 0===La(t)&&!Ma(t)}(s),r=L(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,ja(t)):i||r||(t.node.children[e]=s.node,t.node.childCount++,ja(t))}(t.parent,t.name,t)}const Da=/[\[\].#$\/\u0000-\u001F\u007F]/,Ya=/[\[\].#$\u0000-\u001F\u007F]/,Wa=10485760,Ra=function(t){return"string"==typeof t&&0!==t.length&&!Da.test(t)},Fa=function(t){return"string"==typeof t&&0!==t.length&&!Ya.test(t)},Ja=function(t,e,s){const i=s instanceof _i?new Ji(s,t):s;if(void 0===e)throw new Error(t+"contains undefined "+zi(i));if("function"==typeof e)throw new Error(t+"contains a function "+zi(i)+" with contents = "+e.toString());if(zs(e))throw new Error(t+"contains "+e.toString()+" "+zi(i));if("string"==typeof e&&e.length>Wa/3&&Y(e)>Wa)throw new Error(t+"contains a string greater than "+Wa+" utf8 bytes "+zi(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let s=!1,r=!1;if($s(e,((e,n)=>{if(".value"===e)s=!0;else if(".priority"!==e&&".sv"!==e&&(r=!0,!Ra(e)))throw new Error(t+" contains an invalid key ("+e+") "+zi(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Y(e),Ui(t)}(i,e),Ja(t,n,i),function(t){const e=t.parts_.pop();t.byteLength_-=Y(e),t.parts_.length>0&&(t.byteLength_-=1)}(i)})),s&&r)throw new Error(t+' contains ".value" child '+zi(i)+" in addition to actual children.")}},Ua=function(t,e,s,i){if(!(i&&void 0===s||Fa(s)))throw new Error(D(t,e)+'was an invalid path = "'+s+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},za=function(t,e,s,i){s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),Ua(t,e,s,i)};class Ba{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Va(t,e){let s=null;for(let i=0;i<e.length;i++){const r=e[i],n=r.getPath();null===s||Ri(n,s.path)||(t.eventLists_.push(s),s=null),null===s&&(s={events:[],path:n}),s.events.push(r)}s&&t.eventLists_.push(s)}function Ga(t,e,s){Va(t,s),function(t,e){t.recursionDepth_++;let s=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];r&&(e(r.path)?(Ha(t.eventLists_[i]),t.eventLists_[i]=null):s=!1)}s&&(t.eventLists_=[]),t.recursionDepth_--}(t,(t=>Fi(t,e)||Fi(e,t)))}function Ha(t){for(let e=0;e<t.events.length;e++){const s=t.events[e];if(null!==s){t.events[e]=null;const i=s.getEventRunner();Ds&&Ws("event: "+s.toString()),si(i)}}}const Xa=25;class Qa{constructor(t,e,s,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=s,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ba,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Dr(),this.transactionQueueTree_=new Ea,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function qa(t,e,s){if(t.stats_=Ii(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Zr(t.repoInfo_,((e,s,i,r)=>{to(t,e,s,i,r)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((()=>eo(t,!0)),0);else{if(null!=s){if("object"!=typeof s)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{E(s)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}t.persistentConnection_=new Gi(t.repoInfo_,e,((e,s,i,r)=>{to(t,e,s,i,r)}),(e=>{eo(t,e)}),(e=>{!function(t,e){$s(e,((e,s)=>{so(t,e,s)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,s),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((e=>{t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((e=>{t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=function(e,s){const i=e.toString();return yi[i]||(yi[i]=new Fr(t.stats_,t.server_)),yi[i]}(t.repoInfo_),t.infoData_=new jr,t.infoSyncTree_=new ea({startListening:(e,s,i,r)=>{let n=[];const a=t.infoData_.getNode(e._path);return a.isEmpty()||(n=ra(t.infoSyncTree_,e._path,a),setTimeout((()=>{r("ok")}),0)),n},stopListening:()=>{}}),so(t,"connected",!1),t.serverSyncTree_=new ea({startListening:(e,s,i,r)=>(t.server_.listen(e,i,s,((s,i)=>{const n=r(s,i);Ga(t.eventQueue_,e._path,n)})),[]),stopListening:(e,s)=>{t.server_.unlisten(e,s)}})}function $a(t){const e=t.infoData_.getNode(new _i(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Ka(t){return wa({timestamp:$a(t)})}function to(t,e,s,i,r){t.dataUpdateCount++;const n=new _i(e);s=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,s):s;let a=[];if(r)if(i){const e=A(s,(t=>Tr(t)));a=function(t,e,s,i){const r=fa(t,i);if(r){const i=ya(r),n=i.path,a=i.queryId,o=Wi(n,e),h=rn.fromObject(s);return Ia(t,n,new Gr(Ur(a),o,h))}return[]}(t.serverSyncTree_,n,e,r)}else{const e=Tr(s);a=aa(t.serverSyncTree_,n,e,r)}else if(i){const e=A(s,(t=>Tr(t)));a=function(t,e,s){const i=rn.fromObject(s);return ca(t,new Gr({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,n,e)}else{const e=Tr(s);a=ra(t.serverSyncTree_,n,e)}let o=n;a.length>0&&(o=ho(t,n)),Ga(t.eventQueue_,o,a)}function eo(t,e){so(t,"connected",e),!1===e&&function(t){no(t,"onDisconnectEvents");const e=Ka(t),s=Dr();Wr(t.onDisconnect_,Li(),((i,r)=>{const n=va(i,r,t.serverSyncTree_,e);Yr(s,i,n)}));let i=[];Wr(s,Li(),((e,s)=>{i=i.concat(ra(t.serverSyncTree_,e,s));const r=mo(t,e);ho(t,r)})),t.onDisconnect_=Dr(),Ga(t.eventQueue_,Li(),i)}(t)}function so(t,e,s){const i=new _i("/.info/"+e),r=Tr(s);t.infoData_.updateSnapshot(i,r);const n=ra(t.infoSyncTree_,i,r);Ga(t.eventQueue_,i,n)}function io(t){return t.nextWriteId_++}function ro(t,e,s,i,r){no(t,"set",{path:e.toString(),value:s,priority:i});const n=Ka(t),a=Tr(s,i),o=ha(t.serverSyncTree_,e),h=Sa(a,o,n),c=io(t),l=sa(t.serverSyncTree_,e,h,c,!0);Va(t.eventQueue_,l),t.server_.put(e.toString(),a.val(!0),((s,i)=>{const n="ok"===s;n||Us("set at "+e+" failed: "+s);const a=ia(t.serverSyncTree_,c,!n);Ga(t.eventQueue_,e,a),function(t,e,s,i){e&&si((()=>{if("ok"===s)e(null);else{const t=(s||"error").toUpperCase();let r=t;i&&(r+=": "+i);const n=new Error(r);n.code=t,e(n)}}))}(0,r,s,i)}));const p=mo(t,e);ho(t,p),Ga(t.eventQueue_,p,[])}function no(t,...e){let s="";t.persistentConnection_&&(s=t.persistentConnection_.id+":"),Ws(s,...e)}function ao(t,e,s){return ha(t.serverSyncTree_,e,s)||br.EMPTY_NODE}function oo(t,e=t.transactionQueueTree_){if(e||uo(t,e),La(e)){const s=lo(t,e);h(s.length>0,"Sending zero length transaction queue"),s.every((t=>0===t.status))&&function(t,e,s){const i=s.map((t=>t.currentWriteId)),r=ao(t,e,i);let n=r;const a=r.hash();for(let t=0;t<s.length;t++){const i=s[t];h(0===i.status,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=1,i.retryCount++;const r=Wi(e,i.path);n=n.updateChild(r,i.currentOutputSnapshotRaw)}const o=n.val(!0),c=e;t.server_.put(c.toString(),o,(i=>{no(t,"transaction put response",{path:c.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let e=0;e<s.length;e++)s[e].status=2,r=r.concat(ia(t.serverSyncTree_,s[e].currentWriteId)),s[e].onComplete&&i.push((()=>s[e].onComplete(null,!0,s[e].currentOutputSnapshotResolved))),s[e].unwatcher();uo(t,_a(t.transactionQueueTree_,e)),oo(t,t.transactionQueueTree_),Ga(t.eventQueue_,e,r);for(let t=0;t<i.length;t++)si(i[t])}else{if("datastale"===i)for(let t=0;t<s.length;t++)3===s[t].status?s[t].status=4:s[t].status=0;else{Us("transaction at "+c.toString()+" failed: "+i);for(let t=0;t<s.length;t++)s[t].status=4,s[t].abortReason=i}ho(t,e)}}),a)}(t,Za(e),s)}else Ma(e)&&Aa(e,(e=>{oo(t,e)}))}function ho(t,e){const s=co(t,e),i=Za(s);return function(t,e,s){if(0===e.length)return;const i=[];let r=[];const n=e.filter((t=>0===t.status)).map((t=>t.currentWriteId));for(let o=0;o<e.length;o++){const c=e[o],l=Wi(s,c.path);let p,u=!1;if(h(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)u=!0,p=c.abortReason,r=r.concat(ia(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=Xa)u=!0,p="maxretry",r=r.concat(ia(t.serverSyncTree_,c.currentWriteId,!0));else{const s=ao(t,c.path,n);c.currentInputSnapshot=s;const i=e[o].update(s.val());if(void 0!==i){Ja("transaction failed: Data returned ",i,c.path);let e=Tr(i);"object"==typeof i&&null!=i&&L(i,".priority")||(e=e.updatePriority(s.getPriority()));const a=c.currentWriteId,o=Ka(t),h=Sa(e,s,o);c.currentOutputSnapshotRaw=e,c.currentOutputSnapshotResolved=h,c.currentWriteId=io(t),n.splice(n.indexOf(a),1),r=r.concat(sa(t.serverSyncTree_,c.path,h,c.currentWriteId,c.applyLocally)),r=r.concat(ia(t.serverSyncTree_,a,!0))}else u=!0,p="nodata",r=r.concat(ia(t.serverSyncTree_,c.currentWriteId,!0))}Ga(t.eventQueue_,s,r),r=[],u&&(e[o].status=2,a=e[o].unwatcher,setTimeout(a,Math.floor(0)),e[o].onComplete&&("nodata"===p?i.push((()=>e[o].onComplete(null,!1,e[o].currentInputSnapshot))):i.push((()=>e[o].onComplete(new Error(p),!1,null)))))}var a;uo(t,t.transactionQueueTree_);for(let t=0;t<i.length;t++)si(i[t]);oo(t,t.transactionQueueTree_)}(t,lo(t,s),i),i}function co(t,e){let s,i=t.transactionQueueTree_;for(s=ki(e);null!==s&&void 0===La(i);)i=_a(i,s),s=ki(e=Ai(e));return i}function lo(t,e){const s=[];return po(t,e,s),s.sort(((t,e)=>t.order-e.order)),s}function po(t,e,s){const i=La(e);if(i)for(let t=0;t<i.length;t++)s.push(i[t]);Aa(e,(e=>{po(t,e,s)}))}function uo(t,e){const s=La(e);if(s){let t=0;for(let e=0;e<s.length;e++)2!==s[e].status&&(s[t]=s[e],t++);s.length=t,ka(e,s.length>0?s:void 0)}Aa(e,(e=>{uo(t,e)}))}function mo(t,e){const s=Za(co(t,e)),i=_a(t.transactionQueueTree_,e);return function(t,e,s){let i=t.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,(e=>{fo(t,e)})),fo(t,i),Oa(i,(e=>{fo(t,e)})),s}function fo(t,e){const s=La(e);if(s){const i=[];let r=[],n=-1;for(let e=0;e<s.length;e++)3===s[e].status||(1===s[e].status?(h(n===e-1,"All SENT items should be at beginning of queue."),n=e,s[e].status=3,s[e].abortReason="set"):(h(0===s[e].status,"Unexpected transaction status in abort"),s[e].unwatcher(),r=r.concat(ia(t.serverSyncTree_,s[e].currentWriteId,!0)),s[e].onComplete&&i.push(s[e].onComplete.bind(null,new Error("set"),!1,null))));-1===n?ka(e,void 0):s.length=n+1,Ga(t.eventQueue_,Za(e),r);for(let t=0;t<i.length;t++)si(i[t])}}const yo=function(t,e){const s=Io(t),i=s.namespace;"firebase.com"===s.domain&&Js(s.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===s.domain||Js("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),s.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Us("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const r="ws"===s.scheme||"wss"===s.scheme;return{repoInfo:new ui(s.host,s.secure,i,r,e,"",i!==s.subdomain),path:new _i(s.pathString)}},Io=function(t){let e="",s="",i="",r="",n="",a=!0,o="https",h=443;if("string"==typeof t){let c=t.indexOf("//");c>=0&&(o=t.substring(0,c-1),t=t.substring(c+2));let l=t.indexOf("/");-1===l&&(l=t.length);let p=t.indexOf("?");-1===p&&(p=t.length),e=t.substring(0,Math.min(l,p)),l<p&&(r=function(t){let e="";const s=t.split("/");for(let t=0;t<s.length;t++)if(s[t].length>0){let i=s[t];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(l,p)));const u=function(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const s of t.split("&")){if(0===s.length)continue;const i=s.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Us(`Invalid query segment '${s}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,p)));c=e.indexOf(":"),c>=0?(a="https"===o||"wss"===o,h=parseInt(e.substring(c+1),10)):c=e.length;const d=e.slice(0,c);if("localhost"===d.toLowerCase())s="localhost";else if(d.split(".").length<=2)s=d;else{const t=e.indexOf(".");i=e.substring(0,t).toLowerCase(),s=e.substring(t+1),n=i}"ns"in u&&(n=u.ns)}return{host:e,port:h,domain:s,subdomain:i,secure:a,scheme:o,pathString:r,namespace:n}};class go{constructor(t,e,s,i){this.eventType=t,this.eventRegistration=e,this.snapshot=s,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+E(this.snapshot.exportVal())}}class bo{constructor(t,e,s){this.eventRegistration=t,this.error=e,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class xo{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return h(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class wo{constructor(t,e,s,i){this._repo=t,this._path=e,this._queryParams=s,this._orderByCalled=i}get key(){return Yi(this._path)?null:Oi(this._path)}get ref(){return new To(this._repo,this._path)}get _queryIdentifier(){const t=Or(this._queryParams),e=Qs(t);return"{}"===e?"default":e}get _queryObject(){return Or(this._queryParams)}isEqual(t){if(!((t=z(t))instanceof wo))return!1;const e=this._repo===t._repo,s=Ri(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return e&&s&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(t){let e="";for(let s=t.pieceNum_;s<t.pieces_.length;s++)""!==t.pieces_[s]&&(e+="/"+encodeURIComponent(String(t.pieces_[s])));return e||"/"}(this._path)}}class To extends wo{constructor(t,e){super(t,e,new Mr,!1)}get parent(){const t=ji(this._path);return null===t?null:new To(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class No{constructor(t,e,s){this._node=t,this.ref=e,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new _i(t),s=Co(this.ref,t);return new No(this._node.getChild(e),s,pr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,((e,s)=>t(new No(s,Co(this.ref,e),pr))))}hasChild(t){const e=new _i(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Co(t,e){return null===ki((t=z(t))._path)?za("child","path",e,!1):Ua("child","path",e,!1),new To(t._repo,Di(t._path,e))}function vo(t,e){(function(t,e){if(".info"===ki(e))throw new Error(t+" failed = Can't modify data under /.info/")})("set",(t=z(t))._path),function(t,e,s,i){i&&void 0===e||Ja(D(t,"value"),e,s)}("set",e,t._path,!1);const s=new x;return ro(t._repo,t._path,e,null,s.wrapCallback((()=>{}))),s.promise}function So(t){t=z(t);const e=new xo((()=>{})),s=new Po(e);return function(t,e,s){const i=function(t,e){const s=e._path;let i=null;t.syncPointTree_.foreachOnPath(s,((t,e)=>{const r=Wi(t,s);i=i||Xn(e,r)}));let r=t.syncPointTree_.get(s);r?i=i||Xn(r,Li()):(r=new Bn,t.syncPointTree_=t.syncPointTree_.set(s,r));const n=null!=i,a=n?new Hr(i,!0,!1):null;return tn(Gn(r,e,yn(t.pendingWriteTree_,e._path),n?a.getNode():br.EMPTY_NODE,n).viewCache_)}(t.serverSyncTree_,e);return null!=i?Promise.resolve(i):t.server_.get(e).then((i=>{const r=Tr(i).withIndex(e._queryParams.getIndex());let n;if(oa(t.serverSyncTree_,e,s,!0),e._queryParams.loadsAllData())n=ra(t.serverSyncTree_,e._path,r);else{const s=da(t.serverSyncTree_,e);n=aa(t.serverSyncTree_,e._path,r,s)}return Ga(t.eventQueue_,e._path,n),na(t.serverSyncTree_,e,s,null,!0),r}),(s=>(no(t,"get for query "+E(e)+" failed: "+s),Promise.reject(new Error(s)))))}(t._repo,t,s).then((e=>new No(e,new To(t._repo,t._path),t._queryParams.getIndex())))}class Po{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const s=e._queryParams.getIndex();return new go("value",this,new No(t.snapshotNode,new To(e._repo,e._path),s))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new bo(this,t,e):null}matches(t){return t instanceof Po&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}!function(t){h(!Un,"__referenceConstructor has already been defined"),Un=t}(To),function(t){h(!zn,"__referenceConstructor has already been defined"),zn=t}(To);const Eo={};function _o(t,e,s,i,r){let n=i||t.options.databaseURL;void 0===n&&(t.options.projectId||Js("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ws("Using default host for project ",t.options.projectId),n=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a,o,h=yo(n,r),c=h.repoInfo;"undefined"!=typeof process&&process.env&&(o=process.env.FIREBASE_DATABASE_EMULATOR_HOST),o?(a=!0,n=`http://${o}?ns=${c.namespace}`,h=yo(n,r),c=h.repoInfo):a=!h.repoInfo.secure;const l=r&&a?new ai(ai.OWNER):new ni(t.name,t.options,e);(function(t,e){const s=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Ra(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==s.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Fa(t)}(s))throw new Error(D(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",h),Yi(h.path)||Js("Database URL must point to the root of a Firebase Database (not including a child path).");const p=function(t,e,s,i){let r=Eo[e.name];r||(r={},Eo[e.name]=r);let n=r[t.toURLString()];return n&&Js("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),n=new Qa(t,false,s,i),r[t.toURLString()]=n,n}(c,t,l,new ri(t.name,s));return new Lo(p,t)}class Lo{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(qa(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new To(this._repo,Li())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(t,e){const s=Eo[e];s&&s[t.key]===t||Js(`Database ${e}(${t.repoInfo_}) has already been deleted.`),function(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete s[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Js("Cannot call "+t+" on a deleted database.")}}function ko(t){const e=Object.create(Storage.prototype);return e.getItem=e=>t.get(e),e.setItem=(e,s)=>t.set(e,s),e.removeItem=e=>{t.delete(e)},e.clear=()=>t.clear(),e.key=e=>t.keys()[e]||null,Object.defineProperty(e,"length",{get:()=>t.size,enumerable:!1,configurable:!1}),Object.freeze(e)}function Mo(t){const e=Object.create(null);return e.has=e=>e in t,e.get=e=>t[e]||null,e.set=(e,s)=>{t[e]=s},e.delete=e=>delete t[e],e.clear=()=>{for(const e of Object.keys(t))delete t[e]},e.keys=()=>Object.keys(t),e.values=()=>{const e=[];for(const s of Object.keys(t))e.push(t[s]);return e},e.entries=()=>{const e=[];for(const s of Object.keys(t))e.push([s,t[s]]);return e},Object.defineProperties(e,{size:{get:()=>Object.keys(t).length,enumerable:!1,configurable:!1}}),Object.freeze(e)}function Ao(t){const e=Object.create(null);return e.has=e=>null!==t.getItem(e),e.get=e=>t.getItem(e),e.set=(e,s)=>t.setItem(e,s),e.clear=()=>t.clear(),e.delete=e=>(t.removeItem(e),!0),e.keys=()=>{const e=t.length,s=new Array(e);for(let i=0;i<e;i++)s[i]=t.key(i);return s},e.values=()=>{const e=t.length,s=new Array(e);for(let i=0;i<e;i++)s[i]=t.getItem(t.key(i));return s},e.entries=()=>{const e=t.length,s=new Array(e);for(let i=0;i<e;i++){const e=t.key(i);s[i]=[e,t.getItem(e)]}return s},Object.defineProperties(e,{size:{get:()=>t.length,enumerable:!1,configurable:!1}}),Object.freeze(e)}Gi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Gi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},Ps="10.6.0",Et(new B("database",((t,{instanceIdentifier:e})=>_o(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e)),"PUBLIC").setMultipleInstances(!0)),Ot(vs,Ss,void 0),Ot(vs,Ss,"esm2017");const Oo=function(...t){if(1!==t.length)throw new Error("Invalid arguments");const e=t[0];if("object"!=typeof e)throw new Error("Invalid arguments");const s=Object.create(Zo);try{const t=e.localStorage,i=e.sessionStorage;if("object"!=typeof t||"object"!=typeof i)throw new Error;s.storageEnabled=!0,s.localStorage=Ao(t),s.sessionStorage=Ao(i)}catch(t){s.storageEnabled=!1,s.localStorage=Mo(Object.create(null)),s.sessionStorage=Mo(Object.create(null))}return Object.defineProperties(e,{localStorage:{value:ko(s.localStorage),writable:!1,enumerable:!1,configurable:!1},sessionStorage:{value:ko(s.sessionStorage),writable:!1,enumerable:!1,configurable:!1}}),Object.freeze(s)},Zo=Object.freeze(Object.create(null));Object.defineProperty(Oo,"prototype",{value:Zo,writable:!1,enumerable:!1,configurable:!1}),Object.setPrototypeOf(Oo,null),Object.freeze(Oo);const jo=Oo;var Do=s(383);function Yo(t,e){let s="";switch(e.type){case"VariableDeclaration":switch(e.kind){case"var":case"let":for(const i of e.declarations){s+='window["'+i.id.name+'"] = ';const e=i.init;if(null!=e){const i=t.slice(e.start,e.end).trim();";"!==i[i.length-1]?s+=i+";\n":s+=i+"\n"}else s+="void 0;\n"}break;case"const":for(const i of e.declarations){s+='Object.defineProperty(window, "'+i.id.name+'", { value: ';const e=i.init;if(null!=e){const i=t.slice(e.start,e.end).trim(),r=i.length-1;";"===i[r]?s+=i.slice(0,r):s+=i}else s+="void 0";s+=", writable: false, enumerable: false, configurable: false });\n"}break;default:s+="// invalid expression\n"}break;case"InterfaceDeclaration":case"FunctionDeclaration":case"ClassDeclaration":case"EnumDeclaration":{const i=e.id;null!=i&&(s+='window["'+i.name+'"] = ');const r=t.slice(e.start,e.end).trim();";"!==r[r.length-1]?s+=r+";\n":s+=r+"\n"}break;case"EmptyStatement":case"DebuggerStatement":case"ExpressionStatement":break;default:{const i=t.slice(e.start,e.end).trim();";"!==i[i.length-1]?s+=i+";\n":s+=i+"\n"}}return s}const Wo=Mt({apiKey:"AIzaSyCPXTy7dt3fpcLd8kVTBtXy0xuBdeuhbFc",authDomain:"whitespider.firebaseapp.com",projectId:"whitespider",storageBucket:"whitespider.appspot.com",messagingSenderId:"176227430389",appId:"1:176227430389:web:94270de43b7eb971c03abc",measurementId:"G-F72WBJT57S"}),Ro=(function(t=At()){const e=_t(t=z(t),Xe);e.isInitialized()?e.getImmediate():function(t,e={}){const s=_t(t,Xe);if(s.isInitialized()){const t=s.getImmediate();if(O(e,s.getOptions()))return t;throw ss.create("already-initialized")}s.initialize({options:e})}(t)}(Wo),function(t=At(),e){const s=_t(t,"database").getImmediate({identifier:e});if(!s._instanceStarted){const t=(t=>{const e=(t=>{var e,s;return null===(s=null===(e=g())||void 0===e?void 0:e.emulatorHosts)||void 0===s?void 0:s[t]})(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(s+1),10);return"["===e[0]?[e.substring(1,s-1),i]:[e.substring(0,s),i]})("database");t&&function(t,e,s,i={}){(t=z(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&Js("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let n;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Js('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),n=new ai(ai.OWNER);else if(i.mockUserToken){const e="string"==typeof i.mockUserToken?i.mockUserToken:function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const n=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[m(JSON.stringify({alg:"none",type:"JWT"})),m(JSON.stringify(n)),""].join(".")}(i.mockUserToken,t.app.options.projectId);n=new ai(e)}!function(t,e,s,i){t.repoInfo_=new ui(`${e}:${s}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}(r,e,s,n)}(s,...t)}return s}(Wo));(async({window:t,document:e})=>{function s(t){const s=e.getElementById(t);if(null==s)throw new Error("Element does not exist: "+t);return s}function i(t){const s=e.querySelector(t);if(s instanceof HTMLElement)return s;throw new Error("Failed to query selector: "+t)}const r=s("error"),n=new DOMParser;t.onerror=(t,e,s,i,n)=>{let a="Unhandled error at "+(e||"unknown source ");null!=s&&(a+=s),null!=i&&(a+=":"+i),null!=n&&(a+="\n\n"+n),r.textContent=a,r.style.display="block"},t.onkeydown=s=>{if(s.ctrlKey&&!s.altKey&&!s.metaKey&&!s.shiftKey)switch(s.key){case"q":s.preventDefault(),s.stopPropagation(),t.location.replace("https://www.google.com/webhp?igu=1");break;case"h":s.preventDefault(),s.stopPropagation(),"WhiteSpider"===e.title?(e.title="Google",i("link[rel*='icon']").href="/res/google.ico"):(e.title="WhiteSpider",i("link[rel*='icon']").href="/favicon.ico")}},await new Promise((t=>{const s=setInterval((()=>{"complete"===e.readyState&&(clearInterval(s),t(void 0))}),50)}));const a=jo(t);a.storageEnabled||E("Warning: Cookies are blocked by your browser. Some features might not work properly, and your game data will NOT be saved.");const h=t.navigator.serviceWorker;if(null!=h)try{await h.register("/sw.js",{scope:"/",type:"classic",updateViaCache:"none"}),await h.ready}catch(J){}const c=(p="gamelist",(l=z(l=Ro))._checkNotDeleted("ref"),void 0!==p?Co(l._root,p):l._root);var l,p;{const U=await So(c);if(U.exists()){const{data:B}=U.val();Array.isArray(B)&&o.push.apply(o,B)}}const u=e.querySelectorAll("#nav-bar>button, #content>div:not(#footer)"),d=s("home-btn"),m=s("game-btn"),f=s("srvs-btn"),y=s("chat-btn");d.onclick=()=>P("home",d),m.onclick=()=>P("games",m),f.onclick=()=>P("services",f),y.onclick=()=>P("community",y);const I=s("frame"),g=s("frame-view"),b=s("frame-close"),x=s("frame-newtab"),w=s("submit-game-frame"),T=s("game-name"),N=s("game-url"),C=s("error-msg"),v=s("cancel"),S=s("submit");function P(t,e){for(const t of u)t.removeAttribute("current");s(t+"-page").setAttribute("current","true"),null==e||e.setAttribute("current","true")}function E(t){null!=t?(r.textContent=t,r.style.display="block"):r.style.display="none"}function _(t){const e=L(t);I.appendChild(e),b.onclick=()=>{I.innerHTML="",g.style.display="none"},x.onclick=()=>{I.innerHTML="",g.style.display="none",k(e)},g.style.display="block"}function L(t){const s=e.createElement("embed");return s.type="text/plain",s.width="1024",s.height="768",s.src=t.startsWith("http://")?"https://"+t.substring(7):t,s}function k(e){const s=t.open(void 0,"_blank");if(null==s)return void E("Error: Failed to open the popup window. Please allow popups in your browser settings.");s.focus();const i=n.parseFromString(`<?xml version="1.0" encoding="utf-8" ?>\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" lang="en">\n\t<head>\n\t\t<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />\n\t\t<meta http-equiv="Referrer-Policy" content="no-referrer" />\n\t\t<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />\n\t\t<meta name="referrer" content="no-referrer" />\n\t\t<meta name="viewport" content="width=device-width,initial-scale=1" />\n\t\t<link rel="icon" type="image/x-icon" href="res/google.ico" />\n\t\t<link rel="stylesheet" type="text/css" href="data:text/css;base64,Ym9keSwgZW1iZWQsIGlmcmFtZSB7Cglwb3NpdGlvbjogYWJzb2x1dGU7CglkaXNwbGF5OiBibG9jazsKCXdpZHRoOiAxMDAlOwoJaGVpZ2h0OiAxMDAlOwoJbWFyZ2luOiAwcHg7CglwYWRkaW5nOiAwcHg7Cglib3JkZXI6IG5vbmU7CglvdmVyZmxvdzogaGlkZGVuOwp9Cg==" />\n\t\t<base href="${t.origin}"/>\n\t\t<title>Google</title>\n\t</head>\n\t<body>\n\t\t\x3c!-- dummy --\x3e\n\t</body>\n</html>`,"application/xhtml+xml");i.title="Google",i.body.innerHTML="",i.body.appendChild(e),s.document.documentElement.replaceWith(i.documentElement)}const M=s("game-search"),A=s("game-container");function O(t){A.innerHTML="";for(const s of t){const t=e.createElement("div");"user"===s.type?t.style.backgroundImage='url("/res/preview.svg")':t.style.backgroundImage='url("/d/'+encodeURIComponent(s.name)+'.jpg"), url("/res/preview.svg")',t.onclick=()=>{const{clientWidth:t,clientHeight:i}=e.body;t<1300||i<750?k(L("player.html?type="+s.type+"&url="+encodeURIComponent(s.url))):_("player.html?type="+s.type+"&url="+encodeURIComponent(s.url))},t.oncontextmenu=t=>{t.preventDefault(),t.stopPropagation()};const i=e.createElement("div");i.textContent=s.name,t.appendChild(i);const r=e.createElement("label");switch(s.type){case"html5":r.textContent="HTML5",r.style.background="#ff9933";break;case"flash":r.textContent="Flash",r.style.background="#00cc99";break;case"dos":r.textContent="Dos",r.style.background="#80bfff";break;case"user":r.textContent="User",r.style.background="#ff0000"}if(t.appendChild(r),s.new){const s=e.createElement("label");s.textContent="New",s.style.background="#ff0000",t.appendChild(s)}A.appendChild(t)}}M.oninput=()=>{const t=M.value.toLowerCase();if(0==t.length)return void O(o);const e=[];for(const s of o)s.name.toLowerCase().includes(t)&&e.push(s);O(e)},s("cbhk-btn").onclick=()=>{const t=e.createElement("a");t.rel="noopener",t.href="https://sites.google.com/view/cbhk/",t.target="_blank",d.replaceWith(t),t.click(),t.replaceWith(d)},i('a[href="#unbl10"]').onclick=()=>{f.click(),Z.scrollIntoView({behavior:"instant",block:"start",inline:"start"})},i('a[href="#ytunbl"]').onclick=()=>{f.click(),F.scrollIntoView({behavior:"instant",block:"start",inline:"start"})},s("submit-game").onclick=()=>{w.style.display="block"},v.onclick=()=>{w.style.display="none",T.value="",N.value="",C.innerHTML="",C.style.display="none"},S.onclick=async()=>{var t;const e=T.value.replace(/\s+/g," ").trim(),s=Y(N.value.trim());if(0===e.length)return C.textContent="Game name must not be empty.",void(C.style.display="block");if(null==s)return C.textContent="Invalid URL",void(C.style.display="block");if("https:"!==s.protocol)return C.textContent="URL protocol must be 'https:'. (Insecure 'http:' URLs are not supported)",void(C.style.display="block");if(!function(t){const e=t.length;for(let s=0;s<e;s++){const i=t.charCodeAt(s);if((i<65||i>90)&&(i<97||i>122)&&(i<48||i>57)){if(0===s&&40!==i)return!1;if(s===e-1&&41!==i)return!1;switch(i){case 32:case 39:case 40:case 41:case 45:break;default:return!1}}}return!0}(e))return C.textContent="Game name contains illegal characters.",void(C.style.display="block");v.disabled=!0,S.disabled=!0;const i={url:s.href,name:e,type:"user"},r=await So(c),n=r.exists()&&(null===(t=r.val())||void 0===t?void 0:t.data)||[];n.push(i),await vo(c,{data:n}),o.push(i),O(o),v.disabled=!1,S.disabled=!1,v.click()};const Z=s("unbl-search"),j=s("unbl-mode"),D=s("use-tor");function Y(t){try{return new URL(t)}catch(t){return null}}function W(t){t=t.toLowerCase();for(let e=0;e<t.length;e++){const s=t.charCodeAt(e);if((s<48||s>57)&&(s<97||s>122)&&45!==s&&46!==s)return!1}return!0}function R(t,e){const s=Z.value.toLowerCase(),i=e?t+encodeURIComponent(s):function(t,e){const s=Y(t=t.replace(/\s+/g," ").trim());if(null!=s)return s.href;if(t.includes(" "))return e+encodeURIComponent(t);const i=t.indexOf("/");if(0===i)return e+encodeURIComponent(t);if(i>0){if(W(t.substring(0,i)))return"https://"+t}else if(W(t)&&t.includes("."))return"https://"+t;return e+encodeURIComponent(t)}(s,t);switch(j.value){case"embed":_(i);break;case"puppeteer":k(L("unbl.xht?q="+encodeURIComponent(i)+"&t="+D.checked));break;default:throw new Error("Unexpected mode value")}}j.onchange=()=>{switch(j.value){case"puppeteer":case"webcore":D.disabled=!1;break;default:D.disabled=!0}},Z.onkeydown=t=>{"Enter"===t.key&&(t.preventDefault(),R("https://www.google.com/search?igu=1&q=",!1))},s("search-btn").onclick=()=>R("https://www.google.com/search?igu=1&q=",!0),s("random-btn").onclick=()=>R("https://www.google.com/search?igu=1&btnI=Im+Feeling+Lucky&q=",!0);const F=s("yt-search-input");{const V=s("yt-search-button"),G=s("yt-max-results"),H=s("yt-order"),X=s("yt-results"),Q=s("yt-load-more"),q=s("yt-api-key");let $;function K(t){try{return new URL(t)}catch(t){return null}}function tt(t){switch(t.host){case"youtube.com":case"youtube-nocookie.com":case"www.youtube.com":case"www.youtube-nocookie.com":const e=t.pathname;return"/watch"===e?t.searchParams.get("v")||null:e.startsWith("/embed/")&&t.pathname.substring(7)||null;case"youtu.be":return t.pathname.substring(1)||null;default:return null}}async function et(){const e=new URL("https://youtube.googleapis.com/youtube/v3/search"),s=e.searchParams;s.set("q",F.value),s.set("key",q.value||"AIzaSyARuwknsJhvP-ysM8-DwbqqJ5e-EaTL-UY"),s.set("type","video"),s.set("part","snippet"),s.set("order",H.value),s.set("maxResults",G.value),s.set("safeSearch","none"),s.set("videoEmbeddable","true"),null!=$&&s.set("pageToken",$);const i=await t.fetch(e,{method:"GET",headers:{Accept:"application/json"}});return"application/json"===(i.headers.get("content-type")||"").split(";",2)[0].trim()?await i.json():null}async function st(){E(null),V.disabled=!0,Q.style.display="none";const t=await et();if(null==t)return void E("API server returned invalid data.");if("error"in t){const{message:e,code:s}=t.error;return void E(e+" (Code: "+s+")")}const s=t.items;if(0==s.length)return void E("No results match your search.");for(const t of s){const s=t.id.videoId,i=t.snippet,r=e.createElement("div");r.onclick=()=>_("https://www.youtube-nocookie.com/embed/"+s+"?autoplay=1&controls=1&rel=0&color=white");const n=document.createElement("img");n.width=160,n.height=90,n.title="Video Preview",n.draggable=!1,n.src=i.thumbnails.medium.url,r.appendChild(n);const a=document.createElement("div");r.appendChild(a);const o=document.createElement("div");o.className="title",o.textContent=i.title,a.appendChild(o);const h=document.createElement("div");h.className="desc",h.textContent=i.description,a.appendChild(h);const c=document.createElement("div");c.className="time",c.textContent=i.publishTime,a.appendChild(c),X.appendChild(r)}const i=t.nextPageToken;null!=i&&(Q.style.display="block",Q.onclick=()=>{$=i,st().then((()=>{V.disabled=!1}))})}q.value=a.localStorage.get("yt-api-key")||"",V.onclick=()=>{X.innerHTML="",$=null;const t=K(F.value);if(null==t)return void st().then((()=>{V.disabled=!1}));E(null),Q.style.display="none";const e=tt(t);null!=e?_("https://www.youtube-nocookie.com/embed/"+e+"?autoplay=1&controls=1&rel=0&color=white"):E("Invalid YouTube Video URL")},F.onkeydown=t=>{"Enter"==t.key&&(t.preventDefault(),V.click())},G.onblur=()=>{const t=parseInt(G.value);isNaN(t)?G.value="10":t<1?G.value="1":t>30&&(G.value="30")},q.onblur=()=>{const t=q.value;t.length>0&&39!==t.length?(q.setAttribute("style","border-color: #ff0000;"),E("API key must have exactly a length of 39 characters.")):(a.localStorage.set("yt-api-key",t),q.removeAttribute("style"),E(null))}}e.title="WhiteSpider",O(o),t._lcp();{const it=i("#console-input>input"),rt=s("console-output"),nt=[];let at=0,ot=!0,ht=!1;const ct=(()=>{const t=e.createElement("iframe");return t.setAttribute("width","100"),t.setAttribute("height","100"),t.setAttribute("title","Hidden Element"),t.setAttribute("allow",""),t.setAttribute("allowfullscreen","true"),t.setAttribute("allowpaymentrequest","true"),t.setAttribute("credentialless","true"),t.setAttribute("loading","lazy"),t.setAttribute("style","position:absolute;display:block;width:10px;height:10px;border:none;visibility:hidden;"),e.body.appendChild(t),t.contentWindow})();function lt(t,s,i){const r=e.createElement("span");return r.style.color=s||"",r.style.whiteSpace="pre-wrap",r.style.overflowWrap="break-word",r.textContent=t,(i||rt).appendChild(r),r}function pt(){rt.appendChild(e.createElement("hr"))}function ut(t,s,i){const r=s?100:1e3,n=t.length;if(n>r){const s=lt('"'+bt(t.slice(0,r))+"\n..."+(n-r)+" more characters","#008000",i),a=e.createElement("button");a.type="button",a.textContent="Expand",a.onclick=()=>{s.textContent='"'+bt(t)+'"',a.remove()},rt.appendChild(a)}else lt('"'+bt(t)+'"',"#008000",i)}function dt(t,e,s){lt("[\n",void 0,e);for(const s of t)lt("\t",void 0,e),It(s,!0,e),lt(",\n",void 0,e);lt(s||"]",void 0,e)}function mt(t,s,i){const r=t.length;if(0!==r)if(s)lt("[...]",void 0,i);else if(r>20){const s=e.createElement("span");dt(t.slice(0,20),s,"\t..."+(r-20)+" more items");const n=e.createElement("button");n.type="button",n.textContent="Expand",n.onclick=()=>{s.innerHTML="",dt(t,s)},s.appendChild(n),(i||rt).appendChild(s)}else dt(t,i);else lt("[]",void 0,i)}function ft(t,e,s,i){var r,n,a,o,h,c;const l=gt(t);l.length>0?lt(l+" {\n",void 0,s):lt("{\n",void 0,s);const p=Object.getPrototypeOf(t);null!=p&&(lt("\t[[prototype]]: ",void 0,s),yt(p,!0,s),lt(",\n",void 0,s));for(const i of e){lt("\t",void 0,s);const e=Object.getOwnPropertyDescriptor(t,i)||{value:void 0};"value"in e?(null===(r=e.writable)||void 0===r||r||lt("readonly ","#000080",s),null===(n=e.configurable)||void 0===n||n||lt("final ","#000080",s),lt("string"==typeof i?i:"["+i.toString()+"]",null===(a=e.enumerable)||void 0===a||a?"#008000":"#808080",s),lt(": ",void 0,s),It(e.value,!0,s),lt(",\n",void 0,s)):(null===(o=e.configurable)||void 0===o||o||lt("final ","#000080",s),"get"in e&&(lt("get ","#000080",s),lt("string"==typeof i?i:"["+i.toString()+"]",null===(h=e.enumerable)||void 0===h||h?"#008000":"#808080",s),lt("() { ... }, ",void 0,s)),"set"in e&&(lt("set ","#000080",s),lt("string"==typeof i?i:"["+i.toString()+"]",null===(c=e.enumerable)||void 0===c||c?"#008000":"#808080",s),lt("(v) { ... }, ",void 0,s)),lt("\n",void 0,s))}lt(i||"}",void 0,s)}function yt(t,s,i){if(null==t)return void lt("null","#000080",i);if(Array.isArray(t))return void mt(t,s);if(s){const e=gt(t);return void lt((e.length>0?e+" {":"{")+(Object.keys(t).length>0?"...":"")+"}",void 0,i)}const r=Object.getOwnPropertyNames(t).sort();if(r.push.apply(r,Object.getOwnPropertySymbols(t)),r.length>20){const s=e.createElement("span");ft(t,r.slice(0,20),s,"\t...\n}");const n=e.createElement("button");n.type="button",n.textContent="Expand",n.onclick=()=>{s.innerHTML="",ft(t,r,s)},s.appendChild(n),(i||rt).appendChild(s)}else ft(t,r,i)}function It(t,e,s){switch(typeof t){case"boolean":lt(t?"true":"false","#000080",s);break;case"number":lt(t.toString(10),"#0000ff",s);break;case"bigint":lt(String(t)+"n","#0000ff",s);break;case"symbol":lt(t.toString(),"#800080",s);break;case"function":lt(String(t),void 0,s);break;case"undefined":lt("undefined","#000080",s);break;case"string":ut(t,e,s);break;default:yt(t,e,s)}}function gt(t){try{const e=t[Symbol.toStringTag];if("string"==typeof e)return e;const s=t.constructor;if("function"==typeof s){const{name:t}=s;if("string"==typeof t)return t}}catch(t){}return""}function bt(t){return t.replace(/[\"\'\n\r\\]/g,(t=>{switch(t){case"\n":return"\\n";case"\r":return"\\r";case'"':return'\\"';case"'":return"\\'";case"\\":return"\\\\";default:return""}}))}function xt(){lt("Invalid arguments. Try '/help' for more information.\n","#ff0000"),pt()}function wt(t){const e=t.replace(/\s+/g," ").split(" ");switch(t=e[0]){case"clear":if(e.length>1)return void xt();rt.innerHTML="";break;case"help":lt("JSConsole version 0.1.0 by WhiteSpider Dev\n\n","#0000ff"),lt("All inputs that starts with '/' will be treated as a built-in command.\n","#808000"),lt("All other inputs will be executed as JavaScript code with 'eval(code)'.\n\n","#808000"),lt("Built-in commands:\n","#008000"),lt("\t/newcontext\t\t- Start a new window context.\n","#008000"),lt("\t/async [on|off]\t- Enable or disable async eval.\n","#008000"),lt("\t/strict [on|off]\t- Enable or disable strict mode.\n","#008000"),lt("\t/clear\t\t\t\t- Clear the console.\n","#008000"),lt("\t/help\t\t\t\t- Show version info and built-in command list.\n\n","#008000"),pt();break;case"async":if(e.length>2)return void xt();switch(e[1]||"on"){case"on":ot=!0;break;case"off":ot=!1;break;default:return void xt()}break;case"strict":if(e.length>2)return void xt();switch(e[1]||"on"){case"on":ht=!0;break;case"off":ht=!1;break;default:return void xt()}break;case"newcontext":if(e.length>1)return void xt();ct.location.replace("about:blank");break;default:lt(t+": command not found. \nTry '/help' for a list of built-in commands.\n","#ff0000")}}async function Tt(t){if(lt("->  ","#808080"),lt(t=t.trim(),"#323232"),pt(),"/"!==t[0]){try{t=function(t){const{body:e}=(0,Do.Qc)(t,{ranges:!0,tokens:!1,strictMode:!0,sourceType:"script",attachComment:!1,allowAwaitOutsideFunction:!0,allowReturnOutsideFunction:!0}).program,s=e.pop();let i="";for(const s of e)i+=Yo(t,s);return null!=s&&("ExpressionStatement"===s.type?i+="return "+t.slice(s.start,s.end):i+=Yo(t,s)),i}(t)}catch(t){return lt(String(t)+"\n","#ff0000"),void pt()}try{ot&&(t="(async()=>{\n"+t+"\n})();"),ht&&(t='"use strict";'+t),It(await ct.eval(t),!1),lt("\n"),pt()}catch(t){lt("Uncaught "+String(t)+"\n","#ff0000"),pt()}}else wt(t.slice(1))}it.onkeydown=t=>{switch(t.key){case"Enter":t.preventDefault();const{value:e}=it;e.length>0&&(nt.push(e),at=nt.length,it.value="",it.disabled=!0,Tt(e).then((()=>{it.disabled=!1,it.scrollIntoView({behavior:"instant",block:"start",inline:"start"}),it.focus({preventScroll:!0})})));break;case"ArrowUp":t.preventDefault(),at>0&&(it.value=nt[--at]);break;case"ArrowDown":t.preventDefault(),at<nt.length&&(it.value=nt[++at]||"")}}}})(self)})()})();